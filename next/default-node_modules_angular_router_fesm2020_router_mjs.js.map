{"version":3,"file":"default-node_modules_angular_router_fesm2020_router_mjs.js","mappings":"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","sources":["./node_modules/rxjs/src/internal/BehaviorSubject.ts","./node_modules/rxjs/src/internal/observable/ConnectableObservable.ts","./node_modules/rxjs/src/internal/observable/concat.ts","./node_modules/rxjs/src/internal/observable/defer.ts","./node_modules/rxjs/src/internal/observable/throwError.ts","./node_modules/rxjs/src/internal/operators/concatAll.ts","./node_modules/rxjs/src/internal/operators/concatMap.ts","./node_modules/rxjs/src/internal/operators/defaultIfEmpty.ts","./node_modules/rxjs/src/internal/operators/filter.ts","./node_modules/rxjs/src/internal/operators/finalize.ts","./node_modules/rxjs/src/internal/operators/first.ts","./node_modules/rxjs/src/internal/operators/last.ts","./node_modules/rxjs/src/internal/operators/mapTo.ts","./node_modules/rxjs/src/internal/operators/refCount.ts","./node_modules/rxjs/src/internal/operators/scan.ts","./node_modules/rxjs/src/internal/operators/scanInternals.ts","./node_modules/rxjs/src/internal/operators/startWith.ts","./node_modules/rxjs/src/internal/operators/switchMap.ts","./node_modules/rxjs/src/internal/operators/take.ts","./node_modules/rxjs/src/internal/operators/takeLast.ts","./node_modules/rxjs/src/internal/operators/takeWhile.ts","./node_modules/rxjs/src/internal/operators/tap.ts","./node_modules/rxjs/src/internal/operators/throwIfEmpty.ts","../../packages/router/src/shared.ts","../../packages/router/src/utils/collection.ts","../../packages/router/src/url_tree.ts","../../packages/router/src/create_url_tree.ts","../../packages/router/src/events.ts","../../packages/router/src/create_url_tree_strategy.ts","../../packages/router/src/utils/tree.ts","../../packages/router/src/router_state.ts","../../packages/router/src/create_router_state.ts","../../packages/router/src/navigation_canceling_error.ts","../../packages/router/src/router_outlet_context.ts","../../packages/router/src/directives/router_outlet.ts","../../packages/router/src/components/empty_outlet.ts","../../packages/router/src/utils/config.ts","../../packages/router/src/operators/activate_routes.ts","../../packages/router/src/utils/preactivation.ts","../../packages/router/src/utils/type_guards.ts","../../packages/router/src/operators/prioritized_guard_value.ts","../../packages/router/src/operators/check_guards.ts","../../packages/router/src/utils/config_matching.ts","../../packages/router/src/apply_redirects.ts","../../packages/router/src/operators/apply_redirects.ts","../../packages/router/src/recognize.ts","../../packages/router/src/operators/recognize.ts","../../packages/router/src/operators/resolve_data.ts","../../packages/router/src/operators/switch_tap.ts","../../packages/router/src/deprecated_load_children.ts","../../packages/router/src/router_config_loader.ts","../../packages/router/src/navigation_transition.ts","../../packages/router/src/page_title_strategy.ts","../../packages/router/src/route_reuse_strategy.ts","../../packages/router/src/router_config.ts","../../packages/router/src/url_handling_strategy.ts","../../packages/router/src/router.ts","../../packages/router/src/directives/router_link.ts","../../packages/router/src/directives/router_link_active.ts","../../packages/router/src/router_preloader.ts","../../packages/router/src/router_scroller.ts","../../packages/router/src/provide_router.ts","../../packages/router/src/router_module.ts","../../packages/router/src/version.ts","../../packages/router/public_api.ts","../../packages/router/index.ts","../../packages/router/router.ts"],"sourcesContent":["import { Subject } from './Subject';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\n\n/**\n * A variant of Subject that requires an initial value and emits its current\n * value whenever it is subscribed to.\n *\n * @class BehaviorSubject<T>\n */\nexport class BehaviorSubject<T> extends Subject<T> {\n  constructor(private _value: T) {\n    super();\n  }\n\n  get value(): T {\n    return this.getValue();\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    const subscription = super._subscribe(subscriber);\n    !subscription.closed && subscriber.next(this._value);\n    return subscription;\n  }\n\n  getValue(): T {\n    const { hasError, thrownError, _value } = this;\n    if (hasError) {\n      throw thrownError;\n    }\n    this._throwIfClosed();\n    return _value;\n  }\n\n  next(value: T): void {\n    super.next((this._value = value));\n  }\n}\n","import { Subject } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { hasLift } from '../util/lift';\n\n/**\n * @class ConnectableObservable<T>\n * @deprecated Will be removed in v8. Use {@link connectable} to create a connectable observable.\n * If you are using the `refCount` method of `ConnectableObservable`, use the {@link share} operator\n * instead.\n * Details: https://rxjs.dev/deprecations/multicasting\n */\nexport class ConnectableObservable<T> extends Observable<T> {\n  protected _subject: Subject<T> | null = null;\n  protected _refCount: number = 0;\n  protected _connection: Subscription | null = null;\n\n  /**\n   * @param source The source observable\n   * @param subjectFactory The factory that creates the subject used internally.\n   * @deprecated Will be removed in v8. Use {@link connectable} to create a connectable observable.\n   * `new ConnectableObservable(source, factory)` is equivalent to\n   * `connectable(source, { connector: factory })`.\n   * When the `refCount()` method is needed, the {@link share} operator should be used instead:\n   * `new ConnectableObservable(source, factory).refCount()` is equivalent to\n   * `source.pipe(share({ connector: factory }))`.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  constructor(public source: Observable<T>, protected subjectFactory: () => Subject<T>) {\n    super();\n    // If we have lift, monkey patch that here. This is done so custom observable\n    // types will compose through multicast. Otherwise the resulting observable would\n    // simply be an instance of `ConnectableObservable`.\n    if (hasLift(source)) {\n      this.lift = source.lift;\n    }\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>) {\n    return this.getSubject().subscribe(subscriber);\n  }\n\n  protected getSubject(): Subject<T> {\n    const subject = this._subject;\n    if (!subject || subject.isStopped) {\n      this._subject = this.subjectFactory();\n    }\n    return this._subject!;\n  }\n\n  protected _teardown() {\n    this._refCount = 0;\n    const { _connection } = this;\n    this._subject = this._connection = null;\n    _connection?.unsubscribe();\n  }\n\n  /**\n   * @deprecated {@link ConnectableObservable} will be removed in v8. Use {@link connectable} instead.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  connect(): Subscription {\n    let connection = this._connection;\n    if (!connection) {\n      connection = this._connection = new Subscription();\n      const subject = this.getSubject();\n      connection.add(\n        this.source.subscribe(\n          createOperatorSubscriber(\n            subject as any,\n            undefined,\n            () => {\n              this._teardown();\n              subject.complete();\n            },\n            (err) => {\n              this._teardown();\n              subject.error(err);\n            },\n            () => this._teardown()\n          )\n        )\n      );\n\n      if (connection.closed) {\n        this._connection = null;\n        connection = Subscription.EMPTY;\n      }\n    }\n    return connection;\n  }\n\n  /**\n   * @deprecated {@link ConnectableObservable} will be removed in v8. Use the {@link share} operator instead.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  refCount(): Observable<T> {\n    return higherOrderRefCount()(this) as Observable<T>;\n  }\n}\n","import { Observable } from '../Observable';\nimport { ObservableInputTuple, SchedulerLike } from '../types';\nimport { concatAll } from '../operators/concatAll';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\n\nexport function concat<T extends readonly unknown[]>(...inputs: [...ObservableInputTuple<T>]): Observable<T[number]>;\nexport function concat<T extends readonly unknown[]>(\n  ...inputsAndScheduler: [...ObservableInputTuple<T>, SchedulerLike]\n): Observable<T[number]>;\n\n/**\n * Creates an output Observable which sequentially emits all values from the first given\n * Observable and then moves on to the next.\n *\n * <span class=\"informal\">Concatenates multiple Observables together by\n * sequentially emitting their values, one Observable after the other.</span>\n *\n * ![](concat.png)\n *\n * `concat` joins multiple Observables together, by subscribing to them one at a time and\n * merging their results into the output Observable. You can pass either an array of\n * Observables, or put them directly as arguments. Passing an empty array will result\n * in Observable that completes immediately.\n *\n * `concat` will subscribe to first input Observable and emit all its values, without\n * changing or affecting them in any way. When that Observable completes, it will\n * subscribe to then next Observable passed and, again, emit its values. This will be\n * repeated, until the operator runs out of Observables. When last input Observable completes,\n * `concat` will complete as well. At any given moment only one Observable passed to operator\n * emits values. If you would like to emit values from passed Observables concurrently, check out\n * {@link merge} instead, especially with optional `concurrent` parameter. As a matter of fact,\n * `concat` is an equivalent of `merge` operator with `concurrent` parameter set to `1`.\n *\n * Note that if some input Observable never completes, `concat` will also never complete\n * and Observables following the one that did not complete will never be subscribed. On the other\n * hand, if some Observable simply completes immediately after it is subscribed, it will be\n * invisible for `concat`, which will just move on to the next Observable.\n *\n * If any Observable in chain errors, instead of passing control to the next Observable,\n * `concat` will error immediately as well. Observables that would be subscribed after\n * the one that emitted error, never will.\n *\n * If you pass to `concat` the same Observable many times, its stream of values\n * will be \"replayed\" on every subscription, which means you can repeat given Observable\n * as many times as you like. If passing the same Observable to `concat` 1000 times becomes tedious,\n * you can always use {@link repeat}.\n *\n * ## Examples\n *\n * Concatenate a timer counting from 0 to 3 with a synchronous sequence from 1 to 10\n *\n * ```ts\n * import { interval, take, range, concat } from 'rxjs';\n *\n * const timer = interval(1000).pipe(take(4));\n * const sequence = range(1, 10);\n * const result = concat(timer, sequence);\n * result.subscribe(x => console.log(x));\n *\n * // results in:\n * // 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3 -immediate-> 1 ... 10\n * ```\n *\n * Concatenate 3 Observables\n *\n * ```ts\n * import { interval, take, concat } from 'rxjs';\n *\n * const timer1 = interval(1000).pipe(take(10));\n * const timer2 = interval(2000).pipe(take(6));\n * const timer3 = interval(500).pipe(take(10));\n *\n * const result = concat(timer1, timer2, timer3);\n * result.subscribe(x => console.log(x));\n *\n * // results in the following:\n * // (Prints to console sequentially)\n * // -1000ms-> 0 -1000ms-> 1 -1000ms-> ... 9\n * // -2000ms-> 0 -2000ms-> 1 -2000ms-> ... 5\n * // -500ms-> 0 -500ms-> 1 -500ms-> ... 9\n * ```\n *\n * Concatenate the same Observable to repeat it\n *\n * ```ts\n * import { interval, take, concat } from 'rxjs';\n *\n * const timer = interval(1000).pipe(take(2));\n *\n * concat(timer, timer) // concatenating the same Observable!\n *   .subscribe({\n *     next: value => console.log(value),\n *     complete: () => console.log('...and it is done!')\n *   });\n *\n * // Logs:\n * // 0 after 1s\n * // 1 after 2s\n * // 0 after 3s\n * // 1 after 4s\n * // '...and it is done!' also after 4s\n * ```\n *\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link startWith}\n * @see {@link endWith}\n *\n * @param args Input Observables to concatenate.\n */\nexport function concat(...args: any[]): Observable<unknown> {\n  return concatAll()(from(args, popScheduler(args)));\n}\n","import { Observable } from '../Observable';\nimport { ObservedValueOf, ObservableInput } from '../types';\nimport { innerFrom } from './innerFrom';\n\n/**\n * Creates an Observable that, on subscribe, calls an Observable factory to\n * make an Observable for each new Observer.\n *\n * <span class=\"informal\">Creates the Observable lazily, that is, only when it\n * is subscribed.\n * </span>\n *\n * ![](defer.png)\n *\n * `defer` allows you to create an Observable only when the Observer\n * subscribes. It waits until an Observer subscribes to it, calls the given\n * factory function to get an Observable -- where a factory function typically\n * generates a new Observable -- and subscribes the Observer to this Observable.\n * In case the factory function returns a falsy value, then EMPTY is used as\n * Observable instead. Last but not least, an exception during the factory\n * function call is transferred to the Observer by calling `error`.\n *\n * ## Example\n *\n * Subscribe to either an Observable of clicks or an Observable of interval, at random\n *\n * ```ts\n * import { defer, fromEvent, interval } from 'rxjs';\n *\n * const clicksOrInterval = defer(() => {\n *   return Math.random() > 0.5\n *     ? fromEvent(document, 'click')\n *     : interval(1000);\n * });\n * clicksOrInterval.subscribe(x => console.log(x));\n *\n * // Results in the following behavior:\n * // If the result of Math.random() is greater than 0.5 it will listen\n * // for clicks anywhere on the \"document\"; when document is clicked it\n * // will log a MouseEvent object to the console. If the result is less\n * // than 0.5 it will emit ascending numbers, one every second(1000ms).\n * ```\n *\n * @see {@link Observable}\n *\n * @param {function(): ObservableInput} observableFactory The Observable\n * factory function to invoke for each Observer that subscribes to the output\n * Observable. May also return a Promise, which will be converted on the fly\n * to an Observable.\n * @return {Observable} An Observable whose Observers' subscriptions trigger\n * an invocation of the given Observable factory function.\n */\nexport function defer<R extends ObservableInput<any>>(observableFactory: () => R): Observable<ObservedValueOf<R>> {\n  return new Observable<ObservedValueOf<R>>((subscriber) => {\n    innerFrom(observableFactory()).subscribe(subscriber);\n  });\n}\n","import { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { SchedulerLike } from '../types';\nimport { isFunction } from '../util/isFunction';\n\n/**\n * Creates an observable that will create an error instance and push it to the consumer as an error\n * immediately upon subscription.\n *\n * <span class=\"informal\">Just errors and does nothing else</span>\n *\n * ![](throw.png)\n *\n * This creation function is useful for creating an observable that will create an error and error every\n * time it is subscribed to. Generally, inside of most operators when you might want to return an errored\n * observable, this is unnecessary. In most cases, such as in the inner return of {@link concatMap},\n * {@link mergeMap}, {@link defer}, and many others, you can simply throw the error, and RxJS will pick\n * that up and notify the consumer of the error.\n *\n * ## Example\n *\n * Create a simple observable that will create a new error with a timestamp and log it\n * and the message every time you subscribe to it\n *\n * ```ts\n * import { throwError } from 'rxjs';\n *\n * let errorCount = 0;\n *\n * const errorWithTimestamp$ = throwError(() => {\n *   const error: any = new Error(`This is error number ${ ++errorCount }`);\n *   error.timestamp = Date.now();\n *   return error;\n * });\n *\n * errorWithTimestamp$.subscribe({\n *   error: err => console.log(err.timestamp, err.message)\n * });\n *\n * errorWithTimestamp$.subscribe({\n *   error: err => console.log(err.timestamp, err.message)\n * });\n *\n * // Logs the timestamp and a new error message for each subscription\n * ```\n *\n * ### Unnecessary usage\n *\n * Using `throwError` inside of an operator or creation function\n * with a callback, is usually not necessary\n *\n * ```ts\n * import { of, concatMap, timer, throwError } from 'rxjs';\n *\n * const delays$ = of(1000, 2000, Infinity, 3000);\n *\n * delays$.pipe(\n *   concatMap(ms => {\n *     if (ms < 10000) {\n *       return timer(ms);\n *     } else {\n *       // This is probably overkill.\n *       return throwError(() => new Error(`Invalid time ${ ms }`));\n *     }\n *   })\n * )\n * .subscribe({\n *   next: console.log,\n *   error: console.error\n * });\n * ```\n *\n * You can just throw the error instead\n *\n * ```ts\n * import { of, concatMap, timer } from 'rxjs';\n *\n * const delays$ = of(1000, 2000, Infinity, 3000);\n *\n * delays$.pipe(\n *   concatMap(ms => {\n *     if (ms < 10000) {\n *       return timer(ms);\n *     } else {\n *       // Cleaner and easier to read for most folks.\n *       throw new Error(`Invalid time ${ ms }`);\n *     }\n *   })\n * )\n * .subscribe({\n *   next: console.log,\n *   error: console.error\n * });\n * ```\n *\n * @param errorFactory A factory function that will create the error instance that is pushed.\n */\nexport function throwError(errorFactory: () => any): Observable<never>;\n\n/**\n * Returns an observable that will error with the specified error immediately upon subscription.\n *\n * @param error The error instance to emit\n * @deprecated Support for passing an error value will be removed in v8. Instead, pass a factory function to `throwError(() => new Error('test'))`. This is\n * because it will create the error at the moment it should be created and capture a more appropriate stack trace. If\n * for some reason you need to create the error ahead of time, you can still do that: `const err = new Error('test'); throwError(() => err);`.\n */\nexport function throwError(error: any): Observable<never>;\n\n/**\n * Notifies the consumer of an error using a given scheduler by scheduling it at delay `0` upon subscription.\n *\n * @param errorOrErrorFactory An error instance or error factory\n * @param scheduler A scheduler to use to schedule the error notification\n * @deprecated The `scheduler` parameter will be removed in v8.\n * Use `throwError` in combination with {@link observeOn}: `throwError(() => new Error('test')).pipe(observeOn(scheduler));`.\n * Details: https://rxjs.dev/deprecations/scheduler-argument\n */\nexport function throwError(errorOrErrorFactory: any, scheduler: SchedulerLike): Observable<never>;\n\nexport function throwError(errorOrErrorFactory: any, scheduler?: SchedulerLike): Observable<never> {\n  const errorFactory = isFunction(errorOrErrorFactory) ? errorOrErrorFactory : () => errorOrErrorFactory;\n  const init = (subscriber: Subscriber<never>) => subscriber.error(errorFactory());\n  return new Observable(scheduler ? (subscriber) => scheduler.schedule(init as any, 0, subscriber) : init);\n}\n","import { mergeAll } from './mergeAll';\nimport { OperatorFunction, ObservableInput, ObservedValueOf } from '../types';\n\n/**\n * Converts a higher-order Observable into a first-order Observable by\n * concatenating the inner Observables in order.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by putting one\n * inner Observable after the other.</span>\n *\n * ![](concatAll.svg)\n *\n * Joins every Observable emitted by the source (a higher-order Observable), in\n * a serial fashion. It subscribes to each inner Observable only after the\n * previous inner Observable has completed, and merges all of their values into\n * the returned observable.\n *\n * __Warning:__ If the source Observable emits Observables quickly and\n * endlessly, and the inner Observables it emits generally complete slower than\n * the source emits, you can run into memory issues as the incoming Observables\n * collect in an unbounded buffer.\n *\n * Note: `concatAll` is equivalent to `mergeAll` with concurrency parameter set\n * to `1`.\n *\n * ## Example\n *\n * For each click event, tick every second from 0 to 3, with no concurrency\n *\n * ```ts\n * import { fromEvent, map, interval, take, concatAll } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map(() => interval(1000).pipe(take(4)))\n * );\n * const firstOrder = higherOrder.pipe(concatAll());\n * firstOrder.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link combineLatestAll}\n * @see {@link concat}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link exhaustAll}\n * @see {@link mergeAll}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link zipAll}\n *\n * @return A function that returns an Observable emitting values from all the\n * inner Observables concatenated.\n */\nexport function concatAll<O extends ObservableInput<any>>(): OperatorFunction<O, ObservedValueOf<O>> {\n  return mergeAll(1);\n}\n","import { mergeMap } from './mergeMap';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { isFunction } from '../util/isFunction';\n\n/* tslint:disable:max-line-length */\nexport function concatMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function concatMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: undefined\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function concatMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, in a serialized fashion waiting for each one to complete before\n * merging the next.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link concatAll}.</span>\n *\n * ![](concatMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each new inner Observable is\n * concatenated with the previous inner Observable.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMap` is equivalent to `mergeMap` with concurrency parameter set\n * to `1`.\n *\n * ## Example\n *\n * For each click event, tick every second from 0 to 3, with no concurrency\n *\n * ```ts\n * import { fromEvent, concatMap, interval, take } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(\n *   concatMap(ev => interval(1000).pipe(take(4)))\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n * ```\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMapTo}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return A function that returns an Observable that emits the result of\n * applying the projection function (and the optional deprecated\n * `resultSelector`) to each item emitted by the source Observable and taking\n * values from each projected inner Observable sequentially.\n */\nexport function concatMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  return isFunction(resultSelector) ? mergeMap(project, resultSelector, 1) : mergeMap(project, 1);\n}\n","import { OperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Emits a given value if the source Observable completes without emitting any\n * `next` value, otherwise mirrors the source Observable.\n *\n * <span class=\"informal\">If the source Observable turns out to be empty, then\n * this operator will emit a default value.</span>\n *\n * ![](defaultIfEmpty.png)\n *\n * `defaultIfEmpty` emits the values emitted by the source Observable or a\n * specified default value if the source Observable is empty (completes without\n * having emitted any `next` value).\n *\n * ## Example\n *\n * If no clicks happen in 5 seconds, then emit 'no clicks'\n *\n * ```ts\n * import { fromEvent, takeUntil, interval, defaultIfEmpty } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksBeforeFive = clicks.pipe(takeUntil(interval(5000)));\n * const result = clicksBeforeFive.pipe(defaultIfEmpty('no clicks'));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link empty}\n * @see {@link last}\n *\n * @param defaultValue The default value used if the source\n * Observable is empty.\n * @return A function that returns an Observable that emits either the\n * specified `defaultValue` if the source Observable emits no items, or the\n * values emitted by the source Observable.\n */\nexport function defaultIfEmpty<T, R>(defaultValue: R): OperatorFunction<T, T | R> {\n  return operate((source, subscriber) => {\n    let hasValue = false;\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value) => {\n          hasValue = true;\n          subscriber.next(value);\n        },\n        () => {\n          if (!hasValue) {\n            subscriber.next(defaultValue!);\n          }\n          subscriber.complete();\n        }\n      )\n    );\n  });\n}\n","import { OperatorFunction, MonoTypeOperatorFunction, TruthyTypesOf } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function filter<T, S extends T, A>(predicate: (this: A, value: T, index: number) => value is S, thisArg: A): OperatorFunction<T, S>;\nexport function filter<T, S extends T>(predicate: (value: T, index: number) => value is S): OperatorFunction<T, S>;\nexport function filter<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function filter<T, A>(predicate: (this: A, value: T, index: number) => boolean, thisArg: A): MonoTypeOperatorFunction<T>;\nexport function filter<T>(predicate: (value: T, index: number) => boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * ![](filter.png)\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * ## Example\n *\n * Emit only click events whose target was a DIV element\n *\n * ```ts\n * import { fromEvent, filter } from 'rxjs';\n *\n * const div = document.createElement('div');\n * div.style.cssText = 'width: 200px; height: 200px; background: #09c;';\n * document.body.appendChild(div);\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksOnDivs = clicks.pipe(filter(ev => (<HTMLElement>ev.target).tagName === 'DIV'));\n * clicksOnDivs.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param thisArg An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return A function that returns an Observable that emits items from the\n * source Observable that satisfy the specified `predicate`.\n */\nexport function filter<T>(predicate: (value: T, index: number) => boolean, thisArg?: any): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    // An index passed to our predicate function on each call.\n    let index = 0;\n\n    // Subscribe to the source, all errors and completions are\n    // forwarded to the consumer.\n    source.subscribe(\n      // Call the predicate with the appropriate `this` context,\n      // if the predicate returns `true`, then send the value\n      // to the consumer.\n      createOperatorSubscriber(subscriber, (value) => predicate.call(thisArg, value, index++) && subscriber.next(value))\n    );\n  });\n}\n","import { MonoTypeOperatorFunction } from '../types';\nimport { operate } from '../util/lift';\n\n/**\n * Returns an Observable that mirrors the source Observable, but will call a specified function when\n * the source terminates on complete or error.\n * The specified function will also be called when the subscriber explicitly unsubscribes.\n *\n * ## Examples\n *\n * Execute callback function when the observable completes\n *\n * ```ts\n * import { interval, take, finalize } from 'rxjs';\n *\n * // emit value in sequence every 1 second\n * const source = interval(1000);\n * const example = source.pipe(\n *   take(5), //take only the first 5 values\n *   finalize(() => console.log('Sequence complete')) // Execute when the observable completes\n * );\n * const subscribe = example.subscribe(val => console.log(val));\n *\n * // results:\n * // 0\n * // 1\n * // 2\n * // 3\n * // 4\n * // 'Sequence complete'\n * ```\n *\n * Execute callback function when the subscriber explicitly unsubscribes\n *\n * ```ts\n * import { interval, finalize, tap, noop, timer } from 'rxjs';\n *\n * const source = interval(100).pipe(\n *   finalize(() => console.log('[finalize] Called')),\n *   tap({\n *     next: () => console.log('[next] Called'),\n *     error: () => console.log('[error] Not called'),\n *     complete: () => console.log('[tap complete] Not called')\n *   })\n * );\n *\n * const sub = source.subscribe({\n *   next: x => console.log(x),\n *   error: noop,\n *   complete: () => console.log('[complete] Not called')\n * });\n *\n * timer(150).subscribe(() => sub.unsubscribe());\n *\n * // results:\n * // '[next] Called'\n * // 0\n * // '[finalize] Called'\n * ```\n *\n * @param {function} callback Function to be called when source terminates.\n * @return A function that returns an Observable that mirrors the source, but\n * will call the specified function on termination.\n */\nexport function finalize<T>(callback: () => void): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    // TODO: This try/finally was only added for `useDeprecatedSynchronousErrorHandling`.\n    // REMOVE THIS WHEN THAT HOT GARBAGE IS REMOVED IN V8.\n    try {\n      source.subscribe(subscriber);\n    } finally {\n      subscriber.add(callback);\n    }\n  });\n}\n","import { Observable } from '../Observable';\nimport { EmptyError } from '../util/EmptyError';\nimport { OperatorFunction, TruthyTypesOf } from '../types';\nimport { filter } from './filter';\nimport { take } from './take';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { identity } from '../util/identity';\n\nexport function first<T, D = T>(predicate?: null, defaultValue?: D): OperatorFunction<T, T | D>;\nexport function first<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\nexport function first<T, D>(predicate: BooleanConstructor, defaultValue: D): OperatorFunction<T, TruthyTypesOf<T> | D>;\nexport function first<T, S extends T>(\n  predicate: (value: T, index: number, source: Observable<T>) => value is S,\n  defaultValue?: S\n): OperatorFunction<T, S>;\nexport function first<T, S extends T, D>(\n  predicate: (value: T, index: number, source: Observable<T>) => value is S,\n  defaultValue: D\n): OperatorFunction<T, S | D>;\nexport function first<T, D = T>(\n  predicate: (value: T, index: number, source: Observable<T>) => boolean,\n  defaultValue?: D\n): OperatorFunction<T, T | D>;\n\n/**\n * Emits only the first value (or the first value that meets some condition)\n * emitted by the source Observable.\n *\n * <span class=\"informal\">Emits only the first value. Or emits only the first\n * value that passes some test.</span>\n *\n * ![](first.png)\n *\n * If called with no arguments, `first` emits the first value of the source\n * Observable, then completes. If called with a `predicate` function, `first`\n * emits the first value of the source that matches the specified condition. Throws an error if\n * `defaultValue` was not provided and a matching element is not found.\n *\n * ## Examples\n *\n * Emit only the first click that happens on the DOM\n *\n * ```ts\n * import { fromEvent, first } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(first());\n * result.subscribe(x => console.log(x));\n * ```\n *\n * Emits the first click that happens on a DIV\n *\n * ```ts\n * import { fromEvent, first } from 'rxjs';\n *\n * const div = document.createElement('div');\n * div.style.cssText = 'width: 200px; height: 200px; background: #09c;';\n * document.body.appendChild(div);\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(first(ev => (<HTMLElement>ev.target).tagName === 'DIV'));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link take}\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * This is how `first()` is different from {@link take}(1) which completes instead.\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} [predicate]\n * An optional function called with each item to test for condition matching.\n * @param {D} [defaultValue] The default value emitted in case no valid value\n * was found on the source.\n * @return A function that returns an Observable that emits the first item that\n * matches the condition.\n */\nexport function first<T, D>(\n  predicate?: ((value: T, index: number, source: Observable<T>) => boolean) | null,\n  defaultValue?: D\n): OperatorFunction<T, T | D> {\n  const hasDefaultValue = arguments.length >= 2;\n  return (source: Observable<T>) =>\n    source.pipe(\n      predicate ? filter((v, i) => predicate(v, i, source)) : identity,\n      take(1),\n      hasDefaultValue ? defaultIfEmpty(defaultValue!) : throwIfEmpty(() => new EmptyError())\n    );\n}\n","import { Observable } from '../Observable';\nimport { EmptyError } from '../util/EmptyError';\nimport { OperatorFunction, TruthyTypesOf } from '../types';\nimport { filter } from './filter';\nimport { takeLast } from './takeLast';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { identity } from '../util/identity';\n\nexport function last<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\nexport function last<T, D>(predicate: BooleanConstructor, defaultValue: D): OperatorFunction<T, TruthyTypesOf<T> | D>;\nexport function last<T, D = T>(predicate?: null, defaultValue?: D): OperatorFunction<T, T | D>;\nexport function last<T, S extends T>(\n  predicate: (value: T, index: number, source: Observable<T>) => value is S,\n  defaultValue?: S\n): OperatorFunction<T, S>;\nexport function last<T, D = T>(\n  predicate: (value: T, index: number, source: Observable<T>) => boolean,\n  defaultValue?: D\n): OperatorFunction<T, T | D>;\n\n/**\n * Returns an Observable that emits only the last item emitted by the source Observable.\n * It optionally takes a predicate function as a parameter, in which case, rather than emitting\n * the last item from the source Observable, the resulting Observable will emit the last item\n * from the source Observable that satisfies the predicate.\n *\n * ![](last.png)\n *\n * It will throw an error if the source completes without notification or one that matches the predicate. It\n * returns the last value or if a predicate is provided last value that matches the predicate. It returns the\n * given default value if no notification is emitted or matches the predicate.\n *\n * ## Examples\n *\n * Last alphabet from the sequence\n *\n * ```ts\n * import { from, last } from 'rxjs';\n *\n * const source = from(['x', 'y', 'z']);\n * const result = source.pipe(last());\n *\n * result.subscribe(value => console.log(`Last alphabet: ${ value }`));\n *\n * // Outputs\n * // Last alphabet: z\n * ```\n *\n * Default value when the value in the predicate is not matched\n *\n * ```ts\n * import { from, last } from 'rxjs';\n *\n * const source = from(['x', 'y', 'z']);\n * const result = source.pipe(last(char => char === 'a', 'not found'));\n *\n * result.subscribe(value => console.log(`'a' is ${ value }.`));\n *\n * // Outputs\n * // 'a' is not found.\n * ```\n *\n * @see {@link skip}\n * @see {@link skipUntil}\n * @see {@link skipLast}\n * @see {@link skipWhile}\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {function} [predicate] - The condition any source emitted item has to satisfy.\n * @param {any} [defaultValue] - An optional default value to provide if last\n * predicate isn't met or no values were emitted.\n * @return A function that returns an Observable that emits only the last item\n * satisfying the given condition from the source, or a NoSuchElementException\n * if no such items are emitted.\n * @throws - Throws if no items that match the predicate are emitted by the source Observable.\n */\nexport function last<T, D>(\n  predicate?: ((value: T, index: number, source: Observable<T>) => boolean) | null,\n  defaultValue?: D\n): OperatorFunction<T, T | D> {\n  const hasDefaultValue = arguments.length >= 2;\n  return (source: Observable<T>) =>\n    source.pipe(\n      predicate ? filter((v, i) => predicate(v, i, source)) : identity,\n      takeLast(1),\n      hasDefaultValue ? defaultIfEmpty(defaultValue!) : throwIfEmpty(() => new EmptyError())\n    );\n}\n","import { OperatorFunction } from '../types';\nimport { map } from './map';\n\n/** @deprecated To be removed in v9. Use {@link map} instead: `map(() => value)`. */\nexport function mapTo<R>(value: R): OperatorFunction<unknown, R>;\n/**\n * @deprecated Do not specify explicit type parameters. Signatures with type parameters\n * that cannot be inferred will be removed in v8. `mapTo` itself will be removed in v9,\n * use {@link map} instead: `map(() => value)`.\n * */\nexport function mapTo<T, R>(value: R): OperatorFunction<T, R>;\n\n/**\n * Emits the given constant value on the output Observable every time the source\n * Observable emits a value.\n *\n * <span class=\"informal\">Like {@link map}, but it maps every source value to\n * the same output value every time.</span>\n *\n * ![](mapTo.png)\n *\n * Takes a constant `value` as argument, and emits that whenever the source\n * Observable emits a value. In other words, ignores the actual source value,\n * and simply uses the emission moment to know when to emit the given `value`.\n *\n * ## Example\n *\n * Map every click to the string `'Hi'`\n *\n * ```ts\n * import { fromEvent, mapTo } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const greetings = clicks.pipe(mapTo('Hi'));\n *\n * greetings.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link map}\n *\n * @param value The value to map each source value to.\n * @return A function that returns an Observable that emits the given `value`\n * every time the source Observable emits.\n * @deprecated To be removed in v9. Use {@link map} instead: `map(() => value)`.\n */\nexport function mapTo<R>(value: R): OperatorFunction<unknown, R> {\n  return map(() => value);\n}\n","import { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Make a {@link ConnectableObservable} behave like a ordinary observable and automates the way\n * you can connect to it.\n *\n * Internally it counts the subscriptions to the observable and subscribes (only once) to the source if\n * the number of subscriptions is larger than 0. If the number of subscriptions is smaller than 1, it\n * unsubscribes from the source. This way you can make sure that everything before the *published*\n * refCount has only a single subscription independently of the number of subscribers to the target\n * observable.\n *\n * Note that using the {@link share} operator is exactly the same as using the `multicast(() => new Subject())` operator\n * (making the observable hot) and the *refCount* operator in a sequence.\n *\n * ![](refCount.png)\n *\n * ## Example\n *\n * In the following example there are two intervals turned into connectable observables\n * by using the *publish* operator. The first one uses the *refCount* operator, the\n * second one does not use it. You will notice that a connectable observable does nothing\n * until you call its connect function.\n *\n * ```ts\n * import { interval, tap, publish, refCount } from 'rxjs';\n *\n * // Turn the interval observable into a ConnectableObservable (hot)\n * const refCountInterval = interval(400).pipe(\n *   tap(num => console.log(`refCount ${ num }`)),\n *   publish(),\n *   refCount()\n * );\n *\n * const publishedInterval = interval(400).pipe(\n *   tap(num => console.log(`publish ${ num }`)),\n *   publish()\n * );\n *\n * refCountInterval.subscribe();\n * refCountInterval.subscribe();\n * // 'refCount 0' -----> 'refCount 1' -----> etc\n * // All subscriptions will receive the same value and the tap (and\n * // every other operator) before the `publish` operator will be executed\n * // only once per event independently of the number of subscriptions.\n *\n * publishedInterval.subscribe();\n * // Nothing happens until you call .connect() on the observable.\n * ```\n *\n * @return A function that returns an Observable that automates the connection\n * to ConnectableObservable.\n * @see {@link ConnectableObservable}\n * @see {@link share}\n * @see {@link publish}\n * @deprecated Replaced with the {@link share} operator. How `share` is used\n * will depend on the connectable observable you created just prior to the\n * `refCount` operator.\n * Details: https://rxjs.dev/deprecations/multicasting\n */\nexport function refCount<T>(): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let connection: Subscription | null = null;\n\n    (source as any)._refCount++;\n\n    const refCounter = createOperatorSubscriber(subscriber, undefined, undefined, undefined, () => {\n      if (!source || (source as any)._refCount <= 0 || 0 < --(source as any)._refCount) {\n        connection = null;\n        return;\n      }\n\n      ///\n      // Compare the local RefCountSubscriber's connection Subscription to the\n      // connection Subscription on the shared ConnectableObservable. In cases\n      // where the ConnectableObservable source synchronously emits values, and\n      // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n      // execution continues to here before the RefCountOperator has a chance to\n      // supply the RefCountSubscriber with the shared connection Subscription.\n      // For example:\n      // ```\n      // range(0, 10).pipe(\n      //   publish(),\n      //   refCount(),\n      //   take(5),\n      // )\n      // .subscribe();\n      // ```\n      // In order to account for this case, RefCountSubscriber should only dispose\n      // the ConnectableObservable's shared connection Subscription if the\n      // connection Subscription exists, *and* either:\n      //   a. RefCountSubscriber doesn't have a reference to the shared connection\n      //      Subscription yet, or,\n      //   b. RefCountSubscriber's connection Subscription reference is identical\n      //      to the shared connection Subscription\n      ///\n\n      const sharedConnection = (source as any)._connection;\n      const conn = connection;\n      connection = null;\n\n      if (sharedConnection && (!conn || sharedConnection === conn)) {\n        sharedConnection.unsubscribe();\n      }\n\n      subscriber.unsubscribe();\n    });\n\n    source.subscribe(refCounter);\n\n    if (!refCounter.closed) {\n      connection = (source as ConnectableObservable<T>).connect();\n    }\n  });\n}\n","import { OperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { scanInternals } from './scanInternals';\n\nexport function scan<V, A = V>(accumulator: (acc: A | V, value: V, index: number) => A): OperatorFunction<V, V | A>;\nexport function scan<V, A>(accumulator: (acc: A, value: V, index: number) => A, seed: A): OperatorFunction<V, A>;\nexport function scan<V, A, S>(accumulator: (acc: A | S, value: V, index: number) => A, seed: S): OperatorFunction<V, A>;\n\n// TODO: link to a \"redux pattern\" section in the guide (location TBD)\n\n/**\n * Useful for encapsulating and managing state. Applies an accumulator (or \"reducer function\")\n * to each value from the source after an initial state is established -- either via\n * a `seed` value (second argument), or from the first value from the source.\n *\n * <span class=\"informal\">It's like {@link reduce}, but emits the current\n * accumulation state after each update</span>\n *\n * ![](scan.png)\n *\n * This operator maintains an internal state and emits it after processing each value as follows:\n *\n * 1. First value arrives\n *   - If a `seed` value was supplied (as the second argument to `scan`), let `state = seed` and `value = firstValue`.\n *   - If NO `seed` value was supplied (no second argument), let `state = firstValue` and go to 3.\n * 2. Let `state = accumulator(state, value)`.\n *   - If an error is thrown by `accumulator`, notify the consumer of an error. The process ends.\n * 3. Emit `state`.\n * 4. Next value arrives, let `value = nextValue`, go to 2.\n *\n * ## Examples\n *\n * An average of previous numbers. This example shows how\n * not providing a `seed` can prime the stream with the\n * first value from the source.\n *\n * ```ts\n * import { of, scan, map } from 'rxjs';\n *\n * const numbers$ = of(1, 2, 3);\n *\n * numbers$\n *   .pipe(\n *     // Get the sum of the numbers coming in.\n *     scan((total, n) => total + n),\n *     // Get the average by dividing the sum by the total number\n *     // received so far (which is 1 more than the zero-based index).\n *     map((sum, index) => sum / (index + 1))\n *   )\n *   .subscribe(console.log);\n * ```\n *\n * The Fibonacci sequence. This example shows how you can use\n * a seed to prime accumulation process. Also... you know... Fibonacci.\n * So important to like, computers and stuff that its whiteboarded\n * in job interviews. Now you can show them the Rx version! (Please don't, haha)\n *\n * ```ts\n * import { interval, scan, map, startWith } from 'rxjs';\n *\n * const firstTwoFibs = [0, 1];\n * // An endless stream of Fibonacci numbers.\n * const fibonacci$ = interval(1000).pipe(\n *   // Scan to get the fibonacci numbers (after 0, 1)\n *   scan(([a, b]) => [b, a + b], firstTwoFibs),\n *   // Get the second number in the tuple, it's the one you calculated\n *   map(([, n]) => n),\n *   // Start with our first two digits :)\n *   startWith(...firstTwoFibs)\n * );\n *\n * fibonacci$.subscribe(console.log);\n * ```\n *\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link reduce}\n * @see {@link switchScan}\n *\n * @param accumulator A \"reducer function\". This will be called for each value after an initial state is\n * acquired.\n * @param seed The initial state. If this is not provided, the first value from the source will\n * be used as the initial state, and emitted without going through the accumulator. All subsequent values\n * will be processed by the accumulator function. If this is provided, all values will go through\n * the accumulator function.\n * @return A function that returns an Observable of the accumulated values.\n */\nexport function scan<V, A, S>(accumulator: (acc: V | A | S, value: V, index: number) => A, seed?: S): OperatorFunction<V, V | A> {\n  // providing a seed of `undefined` *should* be valid and trigger\n  // hasSeed! so don't use `seed !== undefined` checks!\n  // For this reason, we have to check it here at the original call site\n  // otherwise inside Operator/Subscriber we won't know if `undefined`\n  // means they didn't provide anything or if they literally provided `undefined`\n  return operate(scanInternals(accumulator, seed as S, arguments.length >= 2, true));\n}\n","import { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * A basic scan operation. This is used for `scan` and `reduce`.\n * @param accumulator The accumulator to use\n * @param seed The seed value for the state to accumulate\n * @param hasSeed Whether or not a seed was provided\n * @param emitOnNext Whether or not to emit the state on next\n * @param emitBeforeComplete Whether or not to emit the before completion\n */\n\nexport function scanInternals<V, A, S>(\n  accumulator: (acc: V | A | S, value: V, index: number) => A,\n  seed: S,\n  hasSeed: boolean,\n  emitOnNext: boolean,\n  emitBeforeComplete?: undefined | true\n) {\n  return (source: Observable<V>, subscriber: Subscriber<any>) => {\n    // Whether or not we have state yet. This will only be\n    // false before the first value arrives if we didn't get\n    // a seed value.\n    let hasState = hasSeed;\n    // The state that we're tracking, starting with the seed,\n    // if there is one, and then updated by the return value\n    // from the accumulator on each emission.\n    let state: any = seed;\n    // An index to pass to the accumulator function.\n    let index = 0;\n\n    // Subscribe to our source. All errors and completions are passed through.\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value) => {\n          // Always increment the index.\n          const i = index++;\n          // Set the state\n          state = hasState\n            ? // We already have state, so we can get the new state from the accumulator\n              accumulator(state, value, i)\n            : // We didn't have state yet, a seed value was not provided, so\n\n              // we set the state to the first value, and mark that we have state now\n              ((hasState = true), value);\n\n          // Maybe send it to the consumer.\n          emitOnNext && subscriber.next(state);\n        },\n        // If an onComplete was given, call it, otherwise\n        // just pass through the complete notification to the consumer.\n        emitBeforeComplete &&\n          (() => {\n            hasState && subscriber.next(state);\n            subscriber.complete();\n          })\n      )\n    );\n  };\n}\n","import { concat } from '../observable/concat';\nimport { OperatorFunction, SchedulerLike, ValueFromArray } from '../types';\nimport { popScheduler } from '../util/args';\nimport { operate } from '../util/lift';\n\n// Devs are more likely to pass null or undefined than they are a scheduler\n// without accompanying values. To make things easier for (naughty) devs who\n// use the `strictNullChecks: false` TypeScript compiler option, these\n// overloads with explicit null and undefined values are included.\n\nexport function startWith<T>(value: null): OperatorFunction<T, T | null>;\nexport function startWith<T>(value: undefined): OperatorFunction<T, T | undefined>;\n\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled` and `concatAll`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function startWith<T, A extends readonly unknown[] = T[]>(\n  ...valuesAndScheduler: [...A, SchedulerLike]\n): OperatorFunction<T, T | ValueFromArray<A>>;\nexport function startWith<T, A extends readonly unknown[] = T[]>(...values: A): OperatorFunction<T, T | ValueFromArray<A>>;\n\n/**\n * Returns an observable that, at the moment of subscription, will synchronously emit all\n * values provided to this operator, then subscribe to the source and mirror all of its emissions\n * to subscribers.\n *\n * This is a useful way to know when subscription has occurred on an existing observable.\n *\n * <span class=\"informal\">First emits its arguments in order, and then any\n * emissions from the source.</span>\n *\n * ![](startWith.png)\n *\n * ## Examples\n *\n * Emit a value when a timer starts.\n *\n * ```ts\n * import { timer, map, startWith } from 'rxjs';\n *\n * timer(1000)\n *   .pipe(\n *     map(() => 'timer emit'),\n *     startWith('timer start')\n *   )\n *   .subscribe(x => console.log(x));\n *\n * // results:\n * // 'timer start'\n * // 'timer emit'\n * ```\n *\n * @param values Items you want the modified Observable to emit first.\n * @return A function that returns an Observable that synchronously emits\n * provided values before subscribing to the source Observable.\n *\n * @see {@link endWith}\n * @see {@link finalize}\n * @see {@link concat}\n */\nexport function startWith<T, D>(...values: D[]): OperatorFunction<T, T | D> {\n  const scheduler = popScheduler(values);\n  return operate((source, subscriber) => {\n    // Here we can't pass `undefined` as a scheduler, because if we did, the\n    // code inside of `concat` would be confused by the `undefined`, and treat it\n    // like an invalid observable. So we have to split it two different ways.\n    (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n  });\n}\n","import { Subscriber } from '../Subscriber';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/* tslint:disable:max-line-length */\nexport function switchMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function switchMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: undefined\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function switchMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, emitting values only from the most recently projected Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables.</span>\n *\n * ![](switchMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each time it observes one of these\n * inner Observables, the output Observable begins emitting the items emitted by\n * that inner Observable. When a new inner Observable is emitted, `switchMap`\n * stops emitting items from the earlier-emitted inner Observable and begins\n * emitting items from the new one. It continues to behave like this for\n * subsequent inner Observables.\n *\n * ## Example\n *\n * Generate new Observable according to source Observable values\n *\n * ```ts\n * import { of, switchMap } from 'rxjs';\n *\n * const switched = of(1, 2, 3).pipe(switchMap(x => of(x, x ** 2, x ** 3)));\n * switched.subscribe(x => console.log(x));\n * // outputs\n * // 1\n * // 1\n * // 1\n * // 2\n * // 4\n * // 8\n * // 3\n * // 9\n * // 27\n * ```\n *\n * Restart an interval Observable on every click event\n *\n * ```ts\n * import { fromEvent, switchMap, interval } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(switchMap(() => interval(1000)));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchAll}\n * @see {@link switchMapTo}\n *\n * @param {function(value: T, index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return A function that returns an Observable that emits the result of\n * applying the projection function (and the optional deprecated\n * `resultSelector`) to each item emitted by the source Observable and taking\n * only the values from the most recently projected inner Observable.\n */\nexport function switchMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  return operate((source, subscriber) => {\n    let innerSubscriber: Subscriber<ObservedValueOf<O>> | null = null;\n    let index = 0;\n    // Whether or not the source subscription has completed\n    let isComplete = false;\n\n    // We only complete the result if the source is complete AND we don't have an active inner subscription.\n    // This is called both when the source completes and when the inners complete.\n    const checkComplete = () => isComplete && !innerSubscriber && subscriber.complete();\n\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value) => {\n          // Cancel the previous inner subscription if there was one\n          innerSubscriber?.unsubscribe();\n          let innerIndex = 0;\n          const outerIndex = index++;\n          // Start the next inner subscription\n          innerFrom(project(value, outerIndex)).subscribe(\n            (innerSubscriber = createOperatorSubscriber(\n              subscriber,\n              // When we get a new inner value, next it through. Note that this is\n              // handling the deprecate result selector here. This is because with this architecture\n              // it ends up being smaller than using the map operator.\n              (innerValue) => subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue),\n              () => {\n                // The inner has completed. Null out the inner subscriber to\n                // free up memory and to signal that we have no inner subscription\n                // currently.\n                innerSubscriber = null!;\n                checkComplete();\n              }\n            ))\n          );\n        },\n        () => {\n          isComplete = true;\n          checkComplete();\n        }\n      )\n    );\n  });\n}\n","import { MonoTypeOperatorFunction } from '../types';\nimport { EMPTY } from '../observable/empty';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Emits only the first `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Takes the first `count` values from the source, then\n * completes.</span>\n *\n * ![](take.png)\n *\n * `take` returns an Observable that emits only the first `count` values emitted\n * by the source Observable. If the source emits fewer than `count` values then\n * all of its values are emitted. After that, it completes, regardless if the\n * source completes.\n *\n * ## Example\n *\n * Take the first 5 seconds of an infinite 1-second interval Observable\n *\n * ```ts\n * import { interval, take } from 'rxjs';\n *\n * const intervalCount = interval(1000);\n * const takeFive = intervalCount.pipe(take(5));\n * takeFive.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 0\n * // 1\n * // 2\n * // 3\n * // 4\n * ```\n *\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @param count The maximum number of `next` values to emit.\n * @return A function that returns an Observable that emits only the first\n * `count` values emitted by the source Observable, or all of the values from\n * the source if the source emits fewer than `count` values.\n */\nexport function take<T>(count: number): MonoTypeOperatorFunction<T> {\n  return count <= 0\n    ? // If we are taking no values, that's empty.\n      () => EMPTY\n    : operate((source, subscriber) => {\n        let seen = 0;\n        source.subscribe(\n          createOperatorSubscriber(subscriber, (value) => {\n            // Increment the number of values we have seen,\n            // then check it against the allowed count to see\n            // if we are still letting values through.\n            if (++seen <= count) {\n              subscriber.next(value);\n              // If we have met or passed our allowed count,\n              // we need to complete. We have to do <= here,\n              // because re-entrant code will increment `seen` twice.\n              if (count <= seen) {\n                subscriber.complete();\n              }\n            }\n          })\n        );\n      });\n}\n","import { EMPTY } from '../observable/empty';\nimport { MonoTypeOperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Waits for the source to complete, then emits the last N values from the source,\n * as specified by the `count` argument.\n *\n * ![](takeLast.png)\n *\n * `takeLast` results in an observable that will hold values up to `count` values in memory,\n * until the source completes. It then pushes all values in memory to the consumer, in the\n * order they were received from the source, then notifies the consumer that it is\n * complete.\n *\n * If for some reason the source completes before the `count` supplied to `takeLast` is reached,\n * all values received until that point are emitted, and then completion is notified.\n *\n * **Warning**: Using `takeLast` with an observable that never completes will result\n * in an observable that never emits a value.\n *\n * ## Example\n *\n * Take the last 3 values of an Observable with many values\n *\n * ```ts\n * import { range, takeLast } from 'rxjs';\n *\n * const many = range(1, 100);\n * const lastThree = many.pipe(takeLast(3));\n * lastThree.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @param count The maximum number of values to emit from the end of\n * the sequence of values emitted by the source Observable.\n * @return A function that returns an Observable that emits at most the last\n * `count` values emitted by the source Observable.\n */\nexport function takeLast<T>(count: number): MonoTypeOperatorFunction<T> {\n  return count <= 0\n    ? () => EMPTY\n    : operate((source, subscriber) => {\n        // This buffer will hold the values we are going to emit\n        // when the source completes. Since we only want to take the\n        // last N values, we can't emit until we're sure we're not getting\n        // any more values.\n        let buffer: T[] = [];\n        source.subscribe(\n          createOperatorSubscriber(\n            subscriber,\n            (value) => {\n              // Add the most recent value onto the end of our buffer.\n              buffer.push(value);\n              // If our buffer is now larger than the number of values we\n              // want to take, we remove the oldest value from the buffer.\n              count < buffer.length && buffer.shift();\n            },\n            () => {\n              // The source completed, we now know what are last values\n              // are, emit them in the order they were received.\n              for (const value of buffer) {\n                subscriber.next(value);\n              }\n              subscriber.complete();\n            },\n            // Errors are passed through to the consumer\n            undefined,\n            () => {\n              // During finalization release the values in our buffer.\n              buffer = null!;\n            }\n          )\n        );\n      });\n}\n","import { OperatorFunction, MonoTypeOperatorFunction, TruthyTypesOf } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function takeWhile<T>(predicate: BooleanConstructor, inclusive: true): MonoTypeOperatorFunction<T>;\nexport function takeWhile<T>(predicate: BooleanConstructor, inclusive: false): OperatorFunction<T, TruthyTypesOf<T>>;\nexport function takeWhile<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\nexport function takeWhile<T, S extends T>(predicate: (value: T, index: number) => value is S): OperatorFunction<T, S>;\nexport function takeWhile<T, S extends T>(predicate: (value: T, index: number) => value is S, inclusive: false): OperatorFunction<T, S>;\nexport function takeWhile<T>(predicate: (value: T, index: number) => boolean, inclusive?: boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Emits values emitted by the source Observable so long as each value satisfies\n * the given `predicate`, and then completes as soon as this `predicate` is not\n * satisfied.\n *\n * <span class=\"informal\">Takes values from the source only while they pass the\n * condition given. When the first value does not satisfy, it completes.</span>\n *\n * ![](takeWhile.png)\n *\n * `takeWhile` subscribes and begins mirroring the source Observable. Each value\n * emitted on the source is given to the `predicate` function which returns a\n * boolean, representing a condition to be satisfied by the source values. The\n * output Observable emits the source values until such time as the `predicate`\n * returns false, at which point `takeWhile` stops mirroring the source\n * Observable and completes the output Observable.\n *\n * ## Example\n *\n * Emit click events only while the clientX property is greater than 200\n *\n * ```ts\n * import { fromEvent, takeWhile } from 'rxjs';\n *\n * const clicks = fromEvent<PointerEvent>(document, 'click');\n * const result = clicks.pipe(takeWhile(ev => ev.clientX > 200));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates a value emitted by the source Observable and returns a boolean.\n * Also takes the (zero-based) index as the second argument.\n * @param {boolean} inclusive When set to `true` the value that caused\n * `predicate` to return `false` will also be emitted.\n * @return A function that returns an Observable that emits values from the\n * source Observable so long as each value satisfies the condition defined by\n * the `predicate`, then completes.\n */\nexport function takeWhile<T>(predicate: (value: T, index: number) => boolean, inclusive = false): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let index = 0;\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value) => {\n        const result = predicate(value, index++);\n        (result || inclusive) && subscriber.next(value);\n        !result && subscriber.complete();\n      })\n    );\n  });\n}\n","import { MonoTypeOperatorFunction, Observer } from '../types';\nimport { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\n\nexport interface TapObserver<T> extends Observer<T> {\n  subscribe: () => void;\n  unsubscribe: () => void;\n  finalize: () => void;\n}\nexport function tap<T>(observerOrNext?: Partial<TapObserver<T>> | ((value: T) => void)): MonoTypeOperatorFunction<T>;\n/** @deprecated Instead of passing separate callback arguments, use an observer argument. Signatures taking separate callback arguments will be removed in v8. Details: https://rxjs.dev/deprecations/subscribe-arguments */\nexport function tap<T>(\n  next?: ((value: T) => void) | null,\n  error?: ((error: any) => void) | null,\n  complete?: (() => void) | null\n): MonoTypeOperatorFunction<T>;\n\n/**\n * Used to perform side-effects for notifications from the source observable\n *\n * <span class=\"informal\">Used when you want to affect outside state with a notification without altering the notification</span>\n *\n * ![](tap.png)\n *\n * Tap is designed to allow the developer a designated place to perform side effects. While you _could_ perform side-effects\n * inside of a `map` or a `mergeMap`, that would make their mapping functions impure, which isn't always a big deal, but will\n * make it so you can't do things like memoize those functions. The `tap` operator is designed solely for such side-effects to\n * help you remove side-effects from other operations.\n *\n * For any notification, next, error, or complete, `tap` will call the appropriate callback you have provided to it, via a function\n * reference, or a partial observer, then pass that notification down the stream.\n *\n * The observable returned by `tap` is an exact mirror of the source, with one exception: Any error that occurs -- synchronously -- in a handler\n * provided to `tap` will be emitted as an error from the returned observable.\n *\n * > Be careful! You can mutate objects as they pass through the `tap` operator's handlers.\n *\n * The most common use of `tap` is actually for debugging. You can place a `tap(console.log)` anywhere\n * in your observable `pipe`, log out the notifications as they are emitted by the source returned by the previous\n * operation.\n *\n * ## Examples\n *\n * Check a random number before it is handled. Below is an observable that will use a random number between 0 and 1,\n * and emit `'big'` or `'small'` depending on the size of that number. But we wanted to log what the original number\n * was, so we have added a `tap(console.log)`.\n *\n * ```ts\n * import { of, tap, map } from 'rxjs';\n *\n * of(Math.random()).pipe(\n *   tap(console.log),\n *   map(n => n > 0.5 ? 'big' : 'small')\n * ).subscribe(console.log);\n * ```\n *\n * Using `tap` to analyze a value and force an error. Below is an observable where in our system we only\n * want to emit numbers 3 or less we get from another source. We can force our observable to error\n * using `tap`.\n *\n * ```ts\n * import { of, tap } from 'rxjs';\n *\n * const source = of(1, 2, 3, 4, 5);\n *\n * source.pipe(\n *   tap(n => {\n *     if (n > 3) {\n *       throw new TypeError(`Value ${ n } is greater than 3`);\n *     }\n *   })\n * )\n * .subscribe({ next: console.log, error: err => console.log(err.message) });\n * ```\n *\n * We want to know when an observable completes before moving on to the next observable. The system\n * below will emit a random series of `'X'` characters from 3 different observables in sequence. The\n * only way we know when one observable completes and moves to the next one, in this case, is because\n * we have added a `tap` with the side effect of logging to console.\n *\n * ```ts\n * import { of, concatMap, interval, take, map, tap } from 'rxjs';\n *\n * of(1, 2, 3).pipe(\n *   concatMap(n => interval(1000).pipe(\n *     take(Math.round(Math.random() * 10)),\n *     map(() => 'X'),\n *     tap({ complete: () => console.log(`Done with ${ n }`) })\n *   ))\n * )\n * .subscribe(console.log);\n * ```\n *\n * @see {@link finalize}\n * @see {@link Observable#subscribe}\n *\n * @param observerOrNext A next handler or partial observer\n * @param error An error handler\n * @param complete A completion handler\n * @return A function that returns an Observable identical to the source, but\n * runs the specified Observer or callback(s) for each item.\n */\nexport function tap<T>(\n  observerOrNext?: Partial<TapObserver<T>> | ((value: T) => void) | null,\n  error?: ((e: any) => void) | null,\n  complete?: (() => void) | null\n): MonoTypeOperatorFunction<T> {\n  // We have to check to see not only if next is a function,\n  // but if error or complete were passed. This is because someone\n  // could technically call tap like `tap(null, fn)` or `tap(null, null, fn)`.\n  const tapObserver =\n    isFunction(observerOrNext) || error || complete\n      ? // tslint:disable-next-line: no-object-literal-type-assertion\n        ({ next: observerOrNext as Exclude<typeof observerOrNext, Partial<TapObserver<T>>>, error, complete } as Partial<TapObserver<T>>)\n      : observerOrNext;\n\n  return tapObserver\n    ? operate((source, subscriber) => {\n        tapObserver.subscribe?.();\n        let isUnsub = true;\n        source.subscribe(\n          createOperatorSubscriber(\n            subscriber,\n            (value) => {\n              tapObserver.next?.(value);\n              subscriber.next(value);\n            },\n            () => {\n              isUnsub = false;\n              tapObserver.complete?.();\n              subscriber.complete();\n            },\n            (err) => {\n              isUnsub = false;\n              tapObserver.error?.(err);\n              subscriber.error(err);\n            },\n            () => {\n              if (isUnsub) {\n                tapObserver.unsubscribe?.();\n              }\n              tapObserver.finalize?.();\n            }\n          )\n        );\n      })\n    : // Tap was called with no valid tap observer or handler\n      // (e.g. `tap(null, null, null)` or `tap(null)` or `tap()`)\n      // so we're going to just mirror the source.\n      identity;\n}\n","import { EmptyError } from '../util/EmptyError';\nimport { MonoTypeOperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * If the source observable completes without emitting a value, it will emit\n * an error. The error will be created at that time by the optional\n * `errorFactory` argument, otherwise, the error will be {@link EmptyError}.\n *\n * ![](throwIfEmpty.png)\n *\n * ## Example\n *\n * Throw an error if the document wasn't clicked within 1 second\n *\n * ```ts\n * import { fromEvent, takeUntil, timer, throwIfEmpty } from 'rxjs';\n *\n * const click$ = fromEvent(document, 'click');\n *\n * click$.pipe(\n *   takeUntil(timer(1000)),\n *   throwIfEmpty(() => new Error('The document was not clicked within 1 second'))\n * )\n * .subscribe({\n *   next() {\n *    console.log('The document was clicked');\n *   },\n *   error(err) {\n *     console.error(err.message);\n *   }\n * });\n * ```\n *\n * @param errorFactory A factory function called to produce the\n * error to be thrown when the source observable completes without emitting a\n * value.\n * @return A function that returns an Observable that throws an error if the\n * source Observable completed without emitting.\n */\nexport function throwIfEmpty<T>(errorFactory: () => any = defaultErrorFactory): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let hasValue = false;\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value) => {\n          hasValue = true;\n          subscriber.next(value);\n        },\n        () => (hasValue ? subscriber.complete() : subscriber.error(errorFactory()))\n      )\n    );\n  });\n}\n\nfunction defaultErrorFactory() {\n  return new EmptyError();\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Route, UrlMatchResult} from './models';\nimport {UrlSegment, UrlSegmentGroup} from './url_tree';\n\n\n/**\n * The primary routing outlet.\n *\n * @publicApi\n */\nexport const PRIMARY_OUTLET = 'primary';\n\n/**\n * A private symbol used to store the value of `Route.title` inside the `Route.data` if it is a\n * static string or `Route.resolve` if anything else. This allows us to reuse the existing route\n * data/resolvers to support the title feature without new instrumentation in the `Router` pipeline.\n */\nexport const RouteTitleKey = Symbol('RouteTitle');\n\n/**\n * A collection of matrix and query URL parameters.\n * @see `convertToParamMap()`\n * @see `ParamMap`\n *\n * @publicApi\n */\nexport type Params = {\n  [key: string]: any;\n};\n\n/**\n * A map that provides access to the required and optional parameters\n * specific to a route.\n * The map supports retrieving a single value with `get()`\n * or multiple values with `getAll()`.\n *\n * @see [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)\n *\n * @publicApi\n */\nexport interface ParamMap {\n  /**\n   * Reports whether the map contains a given parameter.\n   * @param name The parameter name.\n   * @returns True if the map contains the given parameter, false otherwise.\n   */\n  has(name: string): boolean;\n  /**\n   * Retrieves a single value for a parameter.\n   * @param name The parameter name.\n   * @return The parameter's single value,\n   * or the first value if the parameter has multiple values,\n   * or `null` when there is no such parameter.\n   */\n  get(name: string): string|null;\n  /**\n   * Retrieves multiple values for a parameter.\n   * @param name The parameter name.\n   * @return An array containing one or more values,\n   * or an empty array if there is no such parameter.\n   *\n   */\n  getAll(name: string): string[];\n\n  /** Names of the parameters in the map. */\n  readonly keys: string[];\n}\n\nclass ParamsAsMap implements ParamMap {\n  private params: Params;\n\n  constructor(params: Params) {\n    this.params = params || {};\n  }\n\n  has(name: string): boolean {\n    return Object.prototype.hasOwnProperty.call(this.params, name);\n  }\n\n  get(name: string): string|null {\n    if (this.has(name)) {\n      const v = this.params[name];\n      return Array.isArray(v) ? v[0] : v;\n    }\n\n    return null;\n  }\n\n  getAll(name: string): string[] {\n    if (this.has(name)) {\n      const v = this.params[name];\n      return Array.isArray(v) ? v : [v];\n    }\n\n    return [];\n  }\n\n  get keys(): string[] {\n    return Object.keys(this.params);\n  }\n}\n\n/**\n * Converts a `Params` instance to a `ParamMap`.\n * @param params The instance to convert.\n * @returns The new map instance.\n *\n * @publicApi\n */\nexport function convertToParamMap(params: Params): ParamMap {\n  return new ParamsAsMap(params);\n}\n\n/**\n * Matches the route configuration (`route`) against the actual URL (`segments`).\n *\n * When no matcher is defined on a `Route`, this is the matcher used by the Router by default.\n *\n * @param segments The remaining unmatched segments in the current navigation\n * @param segmentGroup The current segment group being matched\n * @param route The `Route` to match against.\n *\n * @see UrlMatchResult\n * @see Route\n *\n * @returns The resulting match information or `null` if the `route` should not match.\n * @publicApi\n */\nexport function defaultUrlMatcher(\n    segments: UrlSegment[], segmentGroup: UrlSegmentGroup, route: Route): UrlMatchResult|null {\n  const parts = route.path!.split('/');\n\n  if (parts.length > segments.length) {\n    // The actual URL is shorter than the config, no match\n    return null;\n  }\n\n  if (route.pathMatch === 'full' &&\n      (segmentGroup.hasChildren() || parts.length < segments.length)) {\n    // The config is longer than the actual URL but we are looking for a full match, return null\n    return null;\n  }\n\n  const posParams: {[key: string]: UrlSegment} = {};\n\n  // Check each config part against the actual URL\n  for (let index = 0; index < parts.length; index++) {\n    const part = parts[index];\n    const segment = segments[index];\n    const isParameter = part.startsWith(':');\n    if (isParameter) {\n      posParams[part.substring(1)] = segment;\n    } else if (part !== segment.path) {\n      // The actual URL part does not match the config, no match\n      return null;\n    }\n  }\n\n  return {consumed: segments.slice(0, parts.length), posParams};\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ɵisObservable as isObservable, ɵisPromise as isPromise} from '@angular/core';\nimport {from, Observable, of} from 'rxjs';\n\nimport {Params} from '../shared';\n\nexport function shallowEqualArrays(a: any[], b: any[]): boolean {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; ++i) {\n    if (!shallowEqual(a[i], b[i])) return false;\n  }\n  return true;\n}\n\nexport function shallowEqual(a: Params, b: Params): boolean {\n  // While `undefined` should never be possible, it would sometimes be the case in IE 11\n  // and pre-chromium Edge. The check below accounts for this edge case.\n  const k1 = a ? Object.keys(a) : undefined;\n  const k2 = b ? Object.keys(b) : undefined;\n  if (!k1 || !k2 || k1.length != k2.length) {\n    return false;\n  }\n  let key: string;\n  for (let i = 0; i < k1.length; i++) {\n    key = k1[i];\n    if (!equalArraysOrString(a[key], b[key])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Test equality for arrays of strings or a string.\n */\nexport function equalArraysOrString(a: string|string[], b: string|string[]) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) return false;\n    const aSorted = [...a].sort();\n    const bSorted = [...b].sort();\n    return aSorted.every((val, index) => bSorted[index] === val);\n  } else {\n    return a === b;\n  }\n}\n\n/**\n * Flattens single-level nested arrays.\n */\nexport function flatten<T>(arr: T[][]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\n/**\n * Return the last element of an array.\n */\nexport function last<T>(a: T[]): T|null {\n  return a.length > 0 ? a[a.length - 1] : null;\n}\n\n/**\n * Verifys all booleans in an array are `true`.\n */\nexport function and(bools: boolean[]): boolean {\n  return !bools.some(v => !v);\n}\n\nexport function forEach<K, V>(map: {[key: string]: V}, callback: (v: V, k: string) => void): void {\n  for (const prop in map) {\n    if (map.hasOwnProperty(prop)) {\n      callback(map[prop], prop);\n    }\n  }\n}\n\nexport function wrapIntoObservable<T>(value: T|Promise<T>|Observable<T>): Observable<T> {\n  if (isObservable(value)) {\n    return value;\n  }\n\n  if (isPromise(value)) {\n    // Use `Promise.resolve()` to wrap promise-like instances.\n    // Required ie when a Resolver returns a AngularJS `$q` promise to correctly trigger the\n    // change detection.\n    return from(Promise.resolve(value));\n  }\n\n  return of(value);\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, ɵRuntimeError as RuntimeError} from '@angular/core';\n\nimport {RuntimeErrorCode} from './errors';\nimport {convertToParamMap, ParamMap, Params, PRIMARY_OUTLET} from './shared';\nimport {equalArraysOrString, forEach, shallowEqual} from './utils/collection';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || ngDevMode;\n\n/**\n * A set of options which specify how to determine if a `UrlTree` is active, given the `UrlTree`\n * for the current router state.\n *\n * @publicApi\n * @see Router.isActive\n */\nexport interface IsActiveMatchOptions {\n  /**\n   * Defines the strategy for comparing the matrix parameters of two `UrlTree`s.\n   *\n   * The matrix parameter matching is dependent on the strategy for matching the\n   * segments. That is, if the `paths` option is set to `'subset'`, only\n   * the matrix parameters of the matching segments will be compared.\n   *\n   * - `'exact'`: Requires that matching segments also have exact matrix parameter\n   * matches.\n   * - `'subset'`: The matching segments in the router's active `UrlTree` may contain\n   * extra matrix parameters, but those that exist in the `UrlTree` in question must match.\n   * - `'ignored'`: When comparing `UrlTree`s, matrix params will be ignored.\n   */\n  matrixParams: 'exact'|'subset'|'ignored';\n  /**\n   * Defines the strategy for comparing the query parameters of two `UrlTree`s.\n   *\n   * - `'exact'`: the query parameters must match exactly.\n   * - `'subset'`: the active `UrlTree` may contain extra parameters,\n   * but must match the key and value of any that exist in the `UrlTree` in question.\n   * - `'ignored'`: When comparing `UrlTree`s, query params will be ignored.\n   */\n  queryParams: 'exact'|'subset'|'ignored';\n  /**\n   * Defines the strategy for comparing the `UrlSegment`s of the `UrlTree`s.\n   *\n   * - `'exact'`: all segments in each `UrlTree` must match.\n   * - `'subset'`: a `UrlTree` will be determined to be active if it\n   * is a subtree of the active route. That is, the active route may contain extra\n   * segments, but must at least have all the segments of the `UrlTree` in question.\n   */\n  paths: 'exact'|'subset';\n  /**\n   * - `'exact'`: indicates that the `UrlTree` fragments must be equal.\n   * - `'ignored'`: the fragments will not be compared when determining if a\n   * `UrlTree` is active.\n   */\n  fragment: 'exact'|'ignored';\n}\n\ntype ParamMatchOptions = 'exact'|'subset'|'ignored';\n\ntype PathCompareFn =\n    (container: UrlSegmentGroup, containee: UrlSegmentGroup, matrixParams: ParamMatchOptions) =>\n        boolean;\ntype ParamCompareFn = (container: Params, containee: Params) => boolean;\n\nconst pathCompareMap: Record<IsActiveMatchOptions['paths'], PathCompareFn> = {\n  'exact': equalSegmentGroups,\n  'subset': containsSegmentGroup,\n};\nconst paramCompareMap: Record<ParamMatchOptions, ParamCompareFn> = {\n  'exact': equalParams,\n  'subset': containsParams,\n  'ignored': () => true,\n};\n\nexport function containsTree(\n    container: UrlTree, containee: UrlTree, options: IsActiveMatchOptions): boolean {\n  return pathCompareMap[options.paths](container.root, containee.root, options.matrixParams) &&\n      paramCompareMap[options.queryParams](container.queryParams, containee.queryParams) &&\n      !(options.fragment === 'exact' && container.fragment !== containee.fragment);\n}\n\nfunction equalParams(container: Params, containee: Params): boolean {\n  // TODO: This does not handle array params correctly.\n  return shallowEqual(container, containee);\n}\n\nfunction equalSegmentGroups(\n    container: UrlSegmentGroup, containee: UrlSegmentGroup,\n    matrixParams: ParamMatchOptions): boolean {\n  if (!equalPath(container.segments, containee.segments)) return false;\n  if (!matrixParamsMatch(container.segments, containee.segments, matrixParams)) {\n    return false;\n  }\n  if (container.numberOfChildren !== containee.numberOfChildren) return false;\n  for (const c in containee.children) {\n    if (!container.children[c]) return false;\n    if (!equalSegmentGroups(container.children[c], containee.children[c], matrixParams))\n      return false;\n  }\n  return true;\n}\n\nfunction containsParams(container: Params, containee: Params): boolean {\n  return Object.keys(containee).length <= Object.keys(container).length &&\n      Object.keys(containee).every(key => equalArraysOrString(container[key], containee[key]));\n}\n\nfunction containsSegmentGroup(\n    container: UrlSegmentGroup, containee: UrlSegmentGroup,\n    matrixParams: ParamMatchOptions): boolean {\n  return containsSegmentGroupHelper(container, containee, containee.segments, matrixParams);\n}\n\nfunction containsSegmentGroupHelper(\n    container: UrlSegmentGroup, containee: UrlSegmentGroup, containeePaths: UrlSegment[],\n    matrixParams: ParamMatchOptions): boolean {\n  if (container.segments.length > containeePaths.length) {\n    const current = container.segments.slice(0, containeePaths.length);\n    if (!equalPath(current, containeePaths)) return false;\n    if (containee.hasChildren()) return false;\n    if (!matrixParamsMatch(current, containeePaths, matrixParams)) return false;\n    return true;\n\n  } else if (container.segments.length === containeePaths.length) {\n    if (!equalPath(container.segments, containeePaths)) return false;\n    if (!matrixParamsMatch(container.segments, containeePaths, matrixParams)) return false;\n    for (const c in containee.children) {\n      if (!container.children[c]) return false;\n      if (!containsSegmentGroup(container.children[c], containee.children[c], matrixParams)) {\n        return false;\n      }\n    }\n    return true;\n\n  } else {\n    const current = containeePaths.slice(0, container.segments.length);\n    const next = containeePaths.slice(container.segments.length);\n    if (!equalPath(container.segments, current)) return false;\n    if (!matrixParamsMatch(container.segments, current, matrixParams)) return false;\n    if (!container.children[PRIMARY_OUTLET]) return false;\n    return containsSegmentGroupHelper(\n        container.children[PRIMARY_OUTLET], containee, next, matrixParams);\n  }\n}\n\nfunction matrixParamsMatch(\n    containerPaths: UrlSegment[], containeePaths: UrlSegment[], options: ParamMatchOptions) {\n  return containeePaths.every((containeeSegment, i) => {\n    return paramCompareMap[options](containerPaths[i].parameters, containeeSegment.parameters);\n  });\n}\n\n/**\n * @description\n *\n * Represents the parsed URL.\n *\n * Since a router state is a tree, and the URL is nothing but a serialized state, the URL is a\n * serialized tree.\n * UrlTree is a data structure that provides a lot of affordances in dealing with URLs\n *\n * @usageNotes\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const tree: UrlTree =\n *       router.parseUrl('/team/33/(user/victor//support:help)?debug=true#fragment');\n *     const f = tree.fragment; // return 'fragment'\n *     const q = tree.queryParams; // returns {debug: 'true'}\n *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n *     const s: UrlSegment[] = g.segments; // returns 2 segments 'team' and '33'\n *     g.children[PRIMARY_OUTLET].segments; // returns 2 segments 'user' and 'victor'\n *     g.children['support'].segments; // return 1 segment 'help'\n *   }\n * }\n * ```\n *\n * @publicApi\n */\nexport class UrlTree {\n  /** @internal */\n  _queryParamMap?: ParamMap;\n\n  constructor(\n      /** The root segment group of the URL tree */\n      public root: UrlSegmentGroup = new UrlSegmentGroup([], {}),\n      /** The query params of the URL */\n      public queryParams: Params = {},\n      /** The fragment of the URL */\n      public fragment: string|null = null) {\n    if (NG_DEV_MODE) {\n      if (root.segments.length > 0) {\n        throw new RuntimeError(\n            RuntimeErrorCode.INVALID_ROOT_URL_SEGMENT,\n            'The root `UrlSegmentGroup` should not contain `segments`. ' +\n                'Instead, these segments belong in the `children` so they can be associated with a named outlet.');\n      }\n    }\n  }\n\n  get queryParamMap(): ParamMap {\n    if (!this._queryParamMap) {\n      this._queryParamMap = convertToParamMap(this.queryParams);\n    }\n    return this._queryParamMap;\n  }\n\n  /** @docsNotRequired */\n  toString(): string {\n    return DEFAULT_SERIALIZER.serialize(this);\n  }\n}\n\n/**\n * @description\n *\n * Represents the parsed URL segment group.\n *\n * See `UrlTree` for more information.\n *\n * @publicApi\n */\nexport class UrlSegmentGroup {\n  /** @internal */\n  _sourceSegment?: UrlSegmentGroup;\n  /** @internal */\n  _segmentIndexShift?: number;\n  /**\n   * @internal\n   *\n   * Used only in dev mode to detect if application relies on `relativeLinkResolution: 'legacy'`\n   * Should be removed in when `relativeLinkResolution` is removed.\n   */\n  _segmentIndexShiftCorrected?: number;\n  /** The parent node in the url tree */\n  parent: UrlSegmentGroup|null = null;\n\n  constructor(\n      /** The URL segments of this group. See `UrlSegment` for more information */\n      public segments: UrlSegment[],\n      /** The list of children of this group */\n      public children: {[key: string]: UrlSegmentGroup}) {\n    forEach(children, (v: any, k: any) => v.parent = this);\n  }\n\n  /** Whether the segment has child segments */\n  hasChildren(): boolean {\n    return this.numberOfChildren > 0;\n  }\n\n  /** Number of child segments */\n  get numberOfChildren(): number {\n    return Object.keys(this.children).length;\n  }\n\n  /** @docsNotRequired */\n  toString(): string {\n    return serializePaths(this);\n  }\n}\n\n\n/**\n * @description\n *\n * Represents a single URL segment.\n *\n * A UrlSegment is a part of a URL between the two slashes. It contains a path and the matrix\n * parameters associated with the segment.\n *\n * @usageNotes\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const tree: UrlTree = router.parseUrl('/team;id=33');\n *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n *     const s: UrlSegment[] = g.segments;\n *     s[0].path; // returns 'team'\n *     s[0].parameters; // returns {id: 33}\n *   }\n * }\n * ```\n *\n * @publicApi\n */\nexport class UrlSegment {\n  /** @internal */\n  _parameterMap?: ParamMap;\n\n  constructor(\n      /** The path part of a URL segment */\n      public path: string,\n\n      /** The matrix parameters associated with a segment */\n      public parameters: {[name: string]: string}) {}\n\n  get parameterMap(): ParamMap {\n    if (!this._parameterMap) {\n      this._parameterMap = convertToParamMap(this.parameters);\n    }\n    return this._parameterMap;\n  }\n\n  /** @docsNotRequired */\n  toString(): string {\n    return serializePath(this);\n  }\n}\n\nexport function equalSegments(as: UrlSegment[], bs: UrlSegment[]): boolean {\n  return equalPath(as, bs) && as.every((a, i) => shallowEqual(a.parameters, bs[i].parameters));\n}\n\nexport function equalPath(as: UrlSegment[], bs: UrlSegment[]): boolean {\n  if (as.length !== bs.length) return false;\n  return as.every((a, i) => a.path === bs[i].path);\n}\n\nexport function mapChildrenIntoArray<T>(\n    segment: UrlSegmentGroup, fn: (v: UrlSegmentGroup, k: string) => T[]): T[] {\n  let res: T[] = [];\n  forEach(segment.children, (child: UrlSegmentGroup, childOutlet: string) => {\n    if (childOutlet === PRIMARY_OUTLET) {\n      res = res.concat(fn(child, childOutlet));\n    }\n  });\n  forEach(segment.children, (child: UrlSegmentGroup, childOutlet: string) => {\n    if (childOutlet !== PRIMARY_OUTLET) {\n      res = res.concat(fn(child, childOutlet));\n    }\n  });\n  return res;\n}\n\n\n/**\n * @description\n *\n * Serializes and deserializes a URL string into a URL tree.\n *\n * The url serialization strategy is customizable. You can\n * make all URLs case insensitive by providing a custom UrlSerializer.\n *\n * See `DefaultUrlSerializer` for an example of a URL serializer.\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root', useFactory: () => new DefaultUrlSerializer()})\nexport abstract class UrlSerializer {\n  /** Parse a url into a `UrlTree` */\n  abstract parse(url: string): UrlTree;\n\n  /** Converts a `UrlTree` into a url */\n  abstract serialize(tree: UrlTree): string;\n}\n\n/**\n * @description\n *\n * A default implementation of the `UrlSerializer`.\n *\n * Example URLs:\n *\n * ```\n * /inbox/33(popup:compose)\n * /inbox/33;open=true/messages/44\n * ```\n *\n * DefaultUrlSerializer uses parentheses to serialize secondary segments (e.g., popup:compose), the\n * colon syntax to specify the outlet, and the ';parameter=value' syntax (e.g., open=true) to\n * specify route specific parameters.\n *\n * @publicApi\n */\nexport class DefaultUrlSerializer implements UrlSerializer {\n  /** Parses a url into a `UrlTree` */\n  parse(url: string): UrlTree {\n    const p = new UrlParser(url);\n    return new UrlTree(p.parseRootSegment(), p.parseQueryParams(), p.parseFragment());\n  }\n\n  /** Converts a `UrlTree` into a url */\n  serialize(tree: UrlTree): string {\n    const segment = `/${serializeSegment(tree.root, true)}`;\n    const query = serializeQueryParams(tree.queryParams);\n    const fragment =\n        typeof tree.fragment === `string` ? `#${encodeUriFragment(tree.fragment)}` : '';\n\n    return `${segment}${query}${fragment}`;\n  }\n}\n\nconst DEFAULT_SERIALIZER = new DefaultUrlSerializer();\n\nexport function serializePaths(segment: UrlSegmentGroup): string {\n  return segment.segments.map(p => serializePath(p)).join('/');\n}\n\nfunction serializeSegment(segment: UrlSegmentGroup, root: boolean): string {\n  if (!segment.hasChildren()) {\n    return serializePaths(segment);\n  }\n\n  if (root) {\n    const primary = segment.children[PRIMARY_OUTLET] ?\n        serializeSegment(segment.children[PRIMARY_OUTLET], false) :\n        '';\n    const children: string[] = [];\n\n    forEach(segment.children, (v: UrlSegmentGroup, k: string) => {\n      if (k !== PRIMARY_OUTLET) {\n        children.push(`${k}:${serializeSegment(v, false)}`);\n      }\n    });\n\n    return children.length > 0 ? `${primary}(${children.join('//')})` : primary;\n\n  } else {\n    const children = mapChildrenIntoArray(segment, (v: UrlSegmentGroup, k: string) => {\n      if (k === PRIMARY_OUTLET) {\n        return [serializeSegment(segment.children[PRIMARY_OUTLET], false)];\n      }\n\n      return [`${k}:${serializeSegment(v, false)}`];\n    });\n\n    // use no parenthesis if the only child is a primary outlet route\n    if (Object.keys(segment.children).length === 1 && segment.children[PRIMARY_OUTLET] != null) {\n      return `${serializePaths(segment)}/${children[0]}`;\n    }\n\n    return `${serializePaths(segment)}/(${children.join('//')})`;\n  }\n}\n\n/**\n * Encodes a URI string with the default encoding. This function will only ever be called from\n * `encodeUriQuery` or `encodeUriSegment` as it's the base set of encodings to be used. We need\n * a custom encoding because encodeURIComponent is too aggressive and encodes stuff that doesn't\n * have to be encoded per https://url.spec.whatwg.org.\n */\nfunction encodeUriString(s: string): string {\n  return encodeURIComponent(s)\n      .replace(/%40/g, '@')\n      .replace(/%3A/gi, ':')\n      .replace(/%24/g, '$')\n      .replace(/%2C/gi, ',');\n}\n\n/**\n * This function should be used to encode both keys and values in a query string key/value. In\n * the following URL, you need to call encodeUriQuery on \"k\" and \"v\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nexport function encodeUriQuery(s: string): string {\n  return encodeUriString(s).replace(/%3B/gi, ';');\n}\n\n/**\n * This function should be used to encode a URL fragment. In the following URL, you need to call\n * encodeUriFragment on \"f\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nexport function encodeUriFragment(s: string): string {\n  return encodeURI(s);\n}\n\n/**\n * This function should be run on any URI segment as well as the key and value in a key/value\n * pair for matrix params. In the following URL, you need to call encodeUriSegment on \"html\",\n * \"mk\", and \"mv\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nexport function encodeUriSegment(s: string): string {\n  return encodeUriString(s).replace(/\\(/g, '%28').replace(/\\)/g, '%29').replace(/%26/gi, '&');\n}\n\nexport function decode(s: string): string {\n  return decodeURIComponent(s);\n}\n\n// Query keys/values should have the \"+\" replaced first, as \"+\" in a query string is \" \".\n// decodeURIComponent function will not decode \"+\" as a space.\nexport function decodeQuery(s: string): string {\n  return decode(s.replace(/\\+/g, '%20'));\n}\n\nexport function serializePath(path: UrlSegment): string {\n  return `${encodeUriSegment(path.path)}${serializeMatrixParams(path.parameters)}`;\n}\n\nfunction serializeMatrixParams(params: {[key: string]: string}): string {\n  return Object.keys(params)\n      .map(key => `;${encodeUriSegment(key)}=${encodeUriSegment(params[key])}`)\n      .join('');\n}\n\nfunction serializeQueryParams(params: {[key: string]: any}): string {\n  const strParams: string[] =\n      Object.keys(params)\n          .map((name) => {\n            const value = params[name];\n            return Array.isArray(value) ?\n                value.map(v => `${encodeUriQuery(name)}=${encodeUriQuery(v)}`).join('&') :\n                `${encodeUriQuery(name)}=${encodeUriQuery(value)}`;\n          })\n          .filter(s => !!s);\n\n  return strParams.length ? `?${strParams.join('&')}` : '';\n}\n\nconst SEGMENT_RE = /^[^\\/()?;=#]+/;\nfunction matchSegments(str: string): string {\n  const match = str.match(SEGMENT_RE);\n  return match ? match[0] : '';\n}\n\nconst QUERY_PARAM_RE = /^[^=?&#]+/;\n// Return the name of the query param at the start of the string or an empty string\nfunction matchQueryParams(str: string): string {\n  const match = str.match(QUERY_PARAM_RE);\n  return match ? match[0] : '';\n}\n\nconst QUERY_PARAM_VALUE_RE = /^[^&#]+/;\n// Return the value of the query param at the start of the string or an empty string\nfunction matchUrlQueryParamValue(str: string): string {\n  const match = str.match(QUERY_PARAM_VALUE_RE);\n  return match ? match[0] : '';\n}\n\nclass UrlParser {\n  private remaining: string;\n\n  constructor(private url: string) {\n    this.remaining = url;\n  }\n\n  parseRootSegment(): UrlSegmentGroup {\n    this.consumeOptional('/');\n\n    if (this.remaining === '' || this.peekStartsWith('?') || this.peekStartsWith('#')) {\n      return new UrlSegmentGroup([], {});\n    }\n\n    // The root segment group never has segments\n    return new UrlSegmentGroup([], this.parseChildren());\n  }\n\n  parseQueryParams(): Params {\n    const params: Params = {};\n    if (this.consumeOptional('?')) {\n      do {\n        this.parseQueryParam(params);\n      } while (this.consumeOptional('&'));\n    }\n    return params;\n  }\n\n  parseFragment(): string|null {\n    return this.consumeOptional('#') ? decodeURIComponent(this.remaining) : null;\n  }\n\n  private parseChildren(): {[outlet: string]: UrlSegmentGroup} {\n    if (this.remaining === '') {\n      return {};\n    }\n\n    this.consumeOptional('/');\n\n    const segments: UrlSegment[] = [];\n    if (!this.peekStartsWith('(')) {\n      segments.push(this.parseSegment());\n    }\n\n    while (this.peekStartsWith('/') && !this.peekStartsWith('//') && !this.peekStartsWith('/(')) {\n      this.capture('/');\n      segments.push(this.parseSegment());\n    }\n\n    let children: {[outlet: string]: UrlSegmentGroup} = {};\n    if (this.peekStartsWith('/(')) {\n      this.capture('/');\n      children = this.parseParens(true);\n    }\n\n    let res: {[outlet: string]: UrlSegmentGroup} = {};\n    if (this.peekStartsWith('(')) {\n      res = this.parseParens(false);\n    }\n\n    if (segments.length > 0 || Object.keys(children).length > 0) {\n      res[PRIMARY_OUTLET] = new UrlSegmentGroup(segments, children);\n    }\n\n    return res;\n  }\n\n  // parse a segment with its matrix parameters\n  // ie `name;k1=v1;k2`\n  private parseSegment(): UrlSegment {\n    const path = matchSegments(this.remaining);\n    if (path === '' && this.peekStartsWith(';')) {\n      throw new RuntimeError(\n          RuntimeErrorCode.EMPTY_PATH_WITH_PARAMS,\n          NG_DEV_MODE && `Empty path url segment cannot have parameters: '${this.remaining}'.`);\n    }\n\n    this.capture(path);\n    return new UrlSegment(decode(path), this.parseMatrixParams());\n  }\n\n  private parseMatrixParams(): {[key: string]: string} {\n    const params: {[key: string]: string} = {};\n    while (this.consumeOptional(';')) {\n      this.parseParam(params);\n    }\n    return params;\n  }\n\n  private parseParam(params: {[key: string]: string}): void {\n    const key = matchSegments(this.remaining);\n    if (!key) {\n      return;\n    }\n    this.capture(key);\n    let value: any = '';\n    if (this.consumeOptional('=')) {\n      const valueMatch = matchSegments(this.remaining);\n      if (valueMatch) {\n        value = valueMatch;\n        this.capture(value);\n      }\n    }\n\n    params[decode(key)] = decode(value);\n  }\n\n  // Parse a single query parameter `name[=value]`\n  private parseQueryParam(params: Params): void {\n    const key = matchQueryParams(this.remaining);\n    if (!key) {\n      return;\n    }\n    this.capture(key);\n    let value: any = '';\n    if (this.consumeOptional('=')) {\n      const valueMatch = matchUrlQueryParamValue(this.remaining);\n      if (valueMatch) {\n        value = valueMatch;\n        this.capture(value);\n      }\n    }\n\n    const decodedKey = decodeQuery(key);\n    const decodedVal = decodeQuery(value);\n\n    if (params.hasOwnProperty(decodedKey)) {\n      // Append to existing values\n      let currentVal = params[decodedKey];\n      if (!Array.isArray(currentVal)) {\n        currentVal = [currentVal];\n        params[decodedKey] = currentVal;\n      }\n      currentVal.push(decodedVal);\n    } else {\n      // Create a new value\n      params[decodedKey] = decodedVal;\n    }\n  }\n\n  // parse `(a/b//outlet_name:c/d)`\n  private parseParens(allowPrimary: boolean): {[outlet: string]: UrlSegmentGroup} {\n    const segments: {[key: string]: UrlSegmentGroup} = {};\n    this.capture('(');\n\n    while (!this.consumeOptional(')') && this.remaining.length > 0) {\n      const path = matchSegments(this.remaining);\n\n      const next = this.remaining[path.length];\n\n      // if is is not one of these characters, then the segment was unescaped\n      // or the group was not closed\n      if (next !== '/' && next !== ')' && next !== ';') {\n        throw new RuntimeError(\n            RuntimeErrorCode.UNPARSABLE_URL, NG_DEV_MODE && `Cannot parse url '${this.url}'`);\n      }\n\n      let outletName: string = undefined!;\n      if (path.indexOf(':') > -1) {\n        outletName = path.slice(0, path.indexOf(':'));\n        this.capture(outletName);\n        this.capture(':');\n      } else if (allowPrimary) {\n        outletName = PRIMARY_OUTLET;\n      }\n\n      const children = this.parseChildren();\n      segments[outletName] = Object.keys(children).length === 1 ? children[PRIMARY_OUTLET] :\n                                                                  new UrlSegmentGroup([], children);\n      this.consumeOptional('//');\n    }\n\n    return segments;\n  }\n\n  private peekStartsWith(str: string): boolean {\n    return this.remaining.startsWith(str);\n  }\n\n  // Consumes the prefix when it is present and returns whether it has been consumed\n  private consumeOptional(str: string): boolean {\n    if (this.peekStartsWith(str)) {\n      this.remaining = this.remaining.substring(str.length);\n      return true;\n    }\n    return false;\n  }\n\n  private capture(str: string): void {\n    if (!this.consumeOptional(str)) {\n      throw new RuntimeError(\n          RuntimeErrorCode.UNEXPECTED_VALUE_IN_URL, NG_DEV_MODE && `Expected \"${str}\".`);\n    }\n  }\n}\n\nexport function createRoot(rootCandidate: UrlSegmentGroup) {\n  return rootCandidate.segments.length > 0 ?\n      new UrlSegmentGroup([], {[PRIMARY_OUTLET]: rootCandidate}) :\n      rootCandidate;\n}\n\n/**\n * Recursively merges primary segment children into their parents and also drops empty children\n * (those which have no segments and no children themselves). The latter prevents serializing a\n * group into something like `/a(aux:)`, where `aux` is an empty child segment.\n */\nexport function squashSegmentGroup(segmentGroup: UrlSegmentGroup): UrlSegmentGroup {\n  const newChildren: Record<string, UrlSegmentGroup> = {};\n  for (const childOutlet of Object.keys(segmentGroup.children)) {\n    const child = segmentGroup.children[childOutlet];\n    const childCandidate = squashSegmentGroup(child);\n    // don't add empty children\n    if (childCandidate.segments.length > 0 || childCandidate.hasChildren()) {\n      newChildren[childOutlet] = childCandidate;\n    }\n  }\n  const s = new UrlSegmentGroup(segmentGroup.segments, newChildren);\n  return mergeTrivialChildren(s);\n}\n\n/**\n * When possible, merges the primary outlet child into the parent `UrlSegmentGroup`.\n *\n * When a segment group has only one child which is a primary outlet, merges that child into the\n * parent. That is, the child segment group's segments are merged into the `s` and the child's\n * children become the children of `s`. Think of this like a 'squash', merging the child segment\n * group into the parent.\n */\nfunction mergeTrivialChildren(s: UrlSegmentGroup): UrlSegmentGroup {\n  if (s.numberOfChildren === 1 && s.children[PRIMARY_OUTLET]) {\n    const c = s.children[PRIMARY_OUTLET];\n    return new UrlSegmentGroup(s.segments.concat(c.segments), c.children);\n  }\n\n  return s;\n}\n\nexport function isUrlTree(v: any): v is UrlTree {\n  return v instanceof UrlTree;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ɵRuntimeError as RuntimeError} from '@angular/core';\n\nimport {RuntimeErrorCode} from './errors';\nimport {ActivatedRoute, ActivatedRouteSnapshot} from './router_state';\nimport {Params, PRIMARY_OUTLET} from './shared';\nimport {createRoot, squashSegmentGroup, UrlSegment, UrlSegmentGroup, UrlTree} from './url_tree';\nimport {forEach, last, shallowEqual} from './utils/collection';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || ngDevMode;\n\n/**\n * Creates a `UrlTree` relative to an `ActivatedRouteSnapshot`.\n *\n * @publicApi\n *\n *\n * @param relativeTo The `ActivatedRouteSnapshot` to apply the commands to\n * @param commands An array of URL fragments with which to construct the new URL tree.\n * If the path is static, can be the literal URL string. For a dynamic path, pass an array of path\n * segments, followed by the parameters for each segment.\n * The fragments are applied to the one provided in the `relativeTo` parameter.\n * @param queryParams The query parameters for the `UrlTree`. `null` if the `UrlTree` does not have\n *     any query parameters.\n * @param fragment The fragment for the `UrlTree`. `null` if the `UrlTree` does not have a fragment.\n *\n * @usageNotes\n *\n * ```\n * // create /team/33/user/11\n * createUrlTreeFromSnapshot(snapshot, ['/team', 33, 'user', 11]);\n *\n * // create /team/33;expand=true/user/11\n * createUrlTreeFromSnapshot(snapshot, ['/team', 33, {expand: true}, 'user', 11]);\n *\n * // you can collapse static segments like this (this works only with the first passed-in value):\n * createUrlTreeFromSnapshot(snapshot, ['/team/33/user', userId]);\n *\n * // If the first segment can contain slashes, and you do not want the router to split it,\n * // you can do the following:\n * createUrlTreeFromSnapshot(snapshot, [{segmentPath: '/one/two'}]);\n *\n * // create /team/33/(user/11//right:chat)\n * createUrlTreeFromSnapshot(snapshot, ['/team', 33, {outlets: {primary: 'user/11', right:\n * 'chat'}}], null, null);\n *\n * // remove the right secondary node\n * createUrlTreeFromSnapshot(snapshot, ['/team', 33, {outlets: {primary: 'user/11', right: null}}]);\n *\n * // For the examples below, assume the current URL is for the `/team/33/user/11` and the\n * `ActivatedRouteSnapshot` points to `user/11`:\n *\n * // navigate to /team/33/user/11/details\n * createUrlTreeFromSnapshot(snapshot, ['details']);\n *\n * // navigate to /team/33/user/22\n * createUrlTreeFromSnapshot(snapshot, ['../22']);\n *\n * // navigate to /team/44/user/22\n * createUrlTreeFromSnapshot(snapshot, ['../../team/44/user/22']);\n * ```\n */\nexport function createUrlTreeFromSnapshot(\n    relativeTo: ActivatedRouteSnapshot, commands: any[], queryParams: Params|null = null,\n    fragment: string|null = null): UrlTree {\n  const relativeToUrlSegmentGroup = createSegmentGroupFromRoute(relativeTo);\n  return createUrlTreeFromSegmentGroup(relativeToUrlSegmentGroup, commands, queryParams, fragment);\n}\n\nexport function createSegmentGroupFromRoute(route: ActivatedRouteSnapshot): UrlSegmentGroup {\n  let targetGroup: UrlSegmentGroup|undefined;\n\n  function createSegmentGroupFromRouteRecursive(currentRoute: ActivatedRouteSnapshot):\n      UrlSegmentGroup {\n    const childOutlets: {[outlet: string]: UrlSegmentGroup} = {};\n    for (const childSnapshot of currentRoute.children) {\n      const root = createSegmentGroupFromRouteRecursive(childSnapshot);\n      childOutlets[childSnapshot.outlet] = root;\n    }\n    const segmentGroup = new UrlSegmentGroup(currentRoute.url, childOutlets);\n    if (currentRoute === route) {\n      targetGroup = segmentGroup;\n    }\n    return segmentGroup;\n  }\n  const rootCandidate = createSegmentGroupFromRouteRecursive(route.root);\n  const rootSegmentGroup = createRoot(rootCandidate);\n\n  return targetGroup ?? rootSegmentGroup;\n}\n\nexport function createUrlTreeFromSegmentGroup(\n    relativeTo: UrlSegmentGroup, commands: any[], queryParams: Params|null,\n    fragment: string|null): UrlTree {\n  let root = relativeTo;\n  while (root.parent) {\n    root = root.parent;\n  }\n  // There are no commands so the `UrlTree` goes to the same path as the one created from the\n  // `UrlSegmentGroup`. All we need to do is update the `queryParams` and `fragment` without\n  // applying any other logic.\n  if (commands.length === 0) {\n    return tree(root, root, root, queryParams, fragment);\n  }\n\n  const nav = computeNavigation(commands);\n\n  if (nav.toRoot()) {\n    return tree(root, root, new UrlSegmentGroup([], {}), queryParams, fragment);\n  }\n\n  const position = findStartingPositionForTargetGroup(nav, root, relativeTo);\n  const newSegmentGroup = position.processChildren ?\n      updateSegmentGroupChildren(position.segmentGroup, position.index, nav.commands) :\n      updateSegmentGroup(position.segmentGroup, position.index, nav.commands);\n  return tree(root, position.segmentGroup, newSegmentGroup, queryParams, fragment);\n}\n\nexport function createUrlTree(\n    route: ActivatedRoute, urlTree: UrlTree, commands: any[], queryParams: Params|null,\n    fragment: string|null): UrlTree {\n  if (commands.length === 0) {\n    return tree(urlTree.root, urlTree.root, urlTree.root, queryParams, fragment);\n  }\n\n  const nav = computeNavigation(commands);\n\n  if (nav.toRoot()) {\n    return tree(urlTree.root, urlTree.root, new UrlSegmentGroup([], {}), queryParams, fragment);\n  }\n\n  function createTreeUsingPathIndex(lastPathIndex: number) {\n    const startingPosition =\n        findStartingPosition(nav, urlTree, route.snapshot?._urlSegment, lastPathIndex);\n\n    const segmentGroup = startingPosition.processChildren ?\n        updateSegmentGroupChildren(\n            startingPosition.segmentGroup, startingPosition.index, nav.commands) :\n        updateSegmentGroup(startingPosition.segmentGroup, startingPosition.index, nav.commands);\n    return tree(urlTree.root, startingPosition.segmentGroup, segmentGroup, queryParams, fragment);\n  }\n  // Note: The types should disallow `snapshot` from being `undefined` but due to test mocks, this\n  // may be the case. Since we try to access it at an earlier point before the refactor to add the\n  // warning for `relativeLinkResolution: 'legacy'`, this may cause failures in tests where it\n  // didn't before.\n  const result = createTreeUsingPathIndex(route.snapshot?._lastPathIndex);\n\n  return result;\n}\n\nfunction isMatrixParams(command: any): boolean {\n  return typeof command === 'object' && command != null && !command.outlets && !command.segmentPath;\n}\n\n/**\n * Determines if a given command has an `outlets` map. When we encounter a command\n * with an outlets k/v map, we need to apply each outlet individually to the existing segment.\n */\nfunction isCommandWithOutlets(command: any): command is {outlets: {[key: string]: any}} {\n  return typeof command === 'object' && command != null && command.outlets;\n}\n\nfunction tree(\n    oldRoot: UrlSegmentGroup, oldSegmentGroup: UrlSegmentGroup, newSegmentGroup: UrlSegmentGroup,\n    queryParams: Params|null, fragment: string|null): UrlTree {\n  let qp: any = {};\n  if (queryParams) {\n    forEach(queryParams, (value: any, name: any) => {\n      qp[name] = Array.isArray(value) ? value.map((v: any) => `${v}`) : `${value}`;\n    });\n  }\n\n  let rootCandidate: UrlSegmentGroup;\n  if (oldRoot === oldSegmentGroup) {\n    rootCandidate = newSegmentGroup;\n  } else {\n    rootCandidate = replaceSegment(oldRoot, oldSegmentGroup, newSegmentGroup);\n  }\n\n  const newRoot = createRoot(squashSegmentGroup(rootCandidate));\n  return new UrlTree(newRoot, qp, fragment);\n}\n\n/**\n * Replaces the `oldSegment` which is located in some child of the `current` with the `newSegment`.\n * This also has the effect of creating new `UrlSegmentGroup` copies to update references. This\n * shouldn't be necessary but the fallback logic for an invalid ActivatedRoute in the creation uses\n * the Router's current url tree. If we don't create new segment groups, we end up modifying that\n * value.\n */\nfunction replaceSegment(\n    current: UrlSegmentGroup, oldSegment: UrlSegmentGroup,\n    newSegment: UrlSegmentGroup): UrlSegmentGroup {\n  const children: {[key: string]: UrlSegmentGroup} = {};\n  forEach(current.children, (c: UrlSegmentGroup, outletName: string) => {\n    if (c === oldSegment) {\n      children[outletName] = newSegment;\n    } else {\n      children[outletName] = replaceSegment(c, oldSegment, newSegment);\n    }\n  });\n  return new UrlSegmentGroup(current.segments, children);\n}\n\nclass Navigation {\n  constructor(\n      public isAbsolute: boolean, public numberOfDoubleDots: number, public commands: any[]) {\n    if (isAbsolute && commands.length > 0 && isMatrixParams(commands[0])) {\n      throw new RuntimeError(\n          RuntimeErrorCode.ROOT_SEGMENT_MATRIX_PARAMS,\n          NG_DEV_MODE && 'Root segment cannot have matrix parameters');\n    }\n\n    const cmdWithOutlet = commands.find(isCommandWithOutlets);\n    if (cmdWithOutlet && cmdWithOutlet !== last(commands)) {\n      throw new RuntimeError(\n          RuntimeErrorCode.MISPLACED_OUTLETS_COMMAND,\n          NG_DEV_MODE && '{outlets:{}} has to be the last command');\n    }\n  }\n\n  public toRoot(): boolean {\n    return this.isAbsolute && this.commands.length === 1 && this.commands[0] == '/';\n  }\n}\n\n/** Transforms commands to a normalized `Navigation` */\nfunction computeNavigation(commands: any[]): Navigation {\n  if ((typeof commands[0] === 'string') && commands.length === 1 && commands[0] === '/') {\n    return new Navigation(true, 0, commands);\n  }\n\n  let numberOfDoubleDots = 0;\n  let isAbsolute = false;\n\n  const res: any[] = commands.reduce((res, cmd, cmdIdx) => {\n    if (typeof cmd === 'object' && cmd != null) {\n      if (cmd.outlets) {\n        const outlets: {[k: string]: any} = {};\n        forEach(cmd.outlets, (commands: any, name: string) => {\n          outlets[name] = typeof commands === 'string' ? commands.split('/') : commands;\n        });\n        return [...res, {outlets}];\n      }\n\n      if (cmd.segmentPath) {\n        return [...res, cmd.segmentPath];\n      }\n    }\n\n    if (!(typeof cmd === 'string')) {\n      return [...res, cmd];\n    }\n\n    if (cmdIdx === 0) {\n      cmd.split('/').forEach((urlPart, partIndex) => {\n        if (partIndex == 0 && urlPart === '.') {\n          // skip './a'\n        } else if (partIndex == 0 && urlPart === '') {  //  '/a'\n          isAbsolute = true;\n        } else if (urlPart === '..') {  //  '../a'\n          numberOfDoubleDots++;\n        } else if (urlPart != '') {\n          res.push(urlPart);\n        }\n      });\n\n      return res;\n    }\n\n    return [...res, cmd];\n  }, []);\n\n  return new Navigation(isAbsolute, numberOfDoubleDots, res);\n}\n\nclass Position {\n  constructor(\n      public segmentGroup: UrlSegmentGroup, public processChildren: boolean, public index: number) {\n  }\n}\n\nfunction findStartingPositionForTargetGroup(\n    nav: Navigation, root: UrlSegmentGroup, target: UrlSegmentGroup): Position {\n  if (nav.isAbsolute) {\n    return new Position(root, true, 0);\n  }\n\n  if (!target) {\n    // `NaN` is used only to maintain backwards compatibility with incorrectly mocked\n    // `ActivatedRouteSnapshot` in tests. In prior versions of this code, the position here was\n    // determined based on an internal property that was rarely mocked, resulting in `NaN`. In\n    // reality, this code path should _never_ be touched since `target` is not allowed to be falsey.\n    return new Position(root, false, NaN);\n  }\n  if (target.parent === null) {\n    return new Position(target, true, 0);\n  }\n\n  const modifier = isMatrixParams(nav.commands[0]) ? 0 : 1;\n  const index = target.segments.length - 1 + modifier;\n  return createPositionApplyingDoubleDots(target, index, nav.numberOfDoubleDots);\n}\n\nfunction findStartingPosition(\n    nav: Navigation, tree: UrlTree, segmentGroup: UrlSegmentGroup,\n    lastPathIndex: number): Position {\n  if (nav.isAbsolute) {\n    return new Position(tree.root, true, 0);\n  }\n\n  if (lastPathIndex === -1) {\n    // Pathless ActivatedRoute has _lastPathIndex === -1 but should not process children\n    // see issue #26224, #13011, #35687\n    // However, if the ActivatedRoute is the root we should process children like above.\n    const processChildren = segmentGroup === tree.root;\n    return new Position(segmentGroup, processChildren, 0);\n  }\n\n  const modifier = isMatrixParams(nav.commands[0]) ? 0 : 1;\n  const index = lastPathIndex + modifier;\n  return createPositionApplyingDoubleDots(segmentGroup, index, nav.numberOfDoubleDots);\n}\n\nfunction createPositionApplyingDoubleDots(\n    group: UrlSegmentGroup, index: number, numberOfDoubleDots: number): Position {\n  let g = group;\n  let ci = index;\n  let dd = numberOfDoubleDots;\n  while (dd > ci) {\n    dd -= ci;\n    g = g.parent!;\n    if (!g) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_DOUBLE_DOTS, NG_DEV_MODE && 'Invalid number of \\'../\\'');\n    }\n    ci = g.segments.length;\n  }\n  return new Position(g, false, ci - dd);\n}\n\nfunction getOutlets(commands: unknown[]): {[k: string]: unknown[]|string} {\n  if (isCommandWithOutlets(commands[0])) {\n    return commands[0].outlets;\n  }\n\n  return {[PRIMARY_OUTLET]: commands};\n}\n\nfunction updateSegmentGroup(\n    segmentGroup: UrlSegmentGroup, startIndex: number, commands: any[]): UrlSegmentGroup {\n  if (!segmentGroup) {\n    segmentGroup = new UrlSegmentGroup([], {});\n  }\n  if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n    return updateSegmentGroupChildren(segmentGroup, startIndex, commands);\n  }\n\n  const m = prefixedWith(segmentGroup, startIndex, commands);\n  const slicedCommands = commands.slice(m.commandIndex);\n  if (m.match && m.pathIndex < segmentGroup.segments.length) {\n    const g = new UrlSegmentGroup(segmentGroup.segments.slice(0, m.pathIndex), {});\n    g.children[PRIMARY_OUTLET] =\n        new UrlSegmentGroup(segmentGroup.segments.slice(m.pathIndex), segmentGroup.children);\n    return updateSegmentGroupChildren(g, 0, slicedCommands);\n  } else if (m.match && slicedCommands.length === 0) {\n    return new UrlSegmentGroup(segmentGroup.segments, {});\n  } else if (m.match && !segmentGroup.hasChildren()) {\n    return createNewSegmentGroup(segmentGroup, startIndex, commands);\n  } else if (m.match) {\n    return updateSegmentGroupChildren(segmentGroup, 0, slicedCommands);\n  } else {\n    return createNewSegmentGroup(segmentGroup, startIndex, commands);\n  }\n}\n\nfunction updateSegmentGroupChildren(\n    segmentGroup: UrlSegmentGroup, startIndex: number, commands: any[]): UrlSegmentGroup {\n  if (commands.length === 0) {\n    return new UrlSegmentGroup(segmentGroup.segments, {});\n  } else {\n    const outlets = getOutlets(commands);\n    const children: {[key: string]: UrlSegmentGroup} = {};\n    // If the set of commands does not apply anything to the primary outlet and the child segment is\n    // an empty path primary segment on its own, we want to skip applying the commands at this\n    // level. Imagine the following config:\n    //\n    // {path: '', children: [{path: '**', outlet: 'popup'}]}.\n    //\n    // Navigation to /(popup:a) will activate the child outlet correctly Given a follow-up\n    // navigation with commands\n    // ['/', {outlets: {'popup': 'b'}}], we _would not_ want to apply the outlet commands to the\n    // root segment because that would result in\n    // //(popup:a)(popup:b) since the outlet command got applied one level above where it appears in\n    // the `ActivatedRoute` rather than updating the existing one.\n    //\n    // Because empty paths do not appear in the URL segments and the fact that the segments used in\n    // the output `UrlTree` are squashed to eliminate these empty paths where possible\n    // https://github.com/angular/angular/blob/13f10de40e25c6900ca55bd83b36bd533dacfa9e/packages/router/src/url_tree.ts#L755\n    // it can be hard to determine what is the right thing to do when applying commands to a\n    // `UrlSegmentGroup` that is created from an \"unsquashed\"/expanded `ActivatedRoute` tree.\n    // This code effectively \"squashes\" empty path primary routes when they have no siblings on\n    // the same level of the tree.\n    if (!outlets[PRIMARY_OUTLET] && segmentGroup.children[PRIMARY_OUTLET] &&\n        segmentGroup.numberOfChildren === 1 &&\n        segmentGroup.children[PRIMARY_OUTLET].segments.length === 0) {\n      return updateSegmentGroupChildren(\n          segmentGroup.children[PRIMARY_OUTLET], startIndex, commands);\n    }\n\n    forEach(outlets, (commands, outlet) => {\n      if (typeof commands === 'string') {\n        commands = [commands];\n      }\n      if (commands !== null) {\n        children[outlet] = updateSegmentGroup(segmentGroup.children[outlet], startIndex, commands);\n      }\n    });\n\n    forEach(segmentGroup.children, (child: UrlSegmentGroup, childOutlet: string) => {\n      if (outlets[childOutlet] === undefined) {\n        children[childOutlet] = child;\n      }\n    });\n    return new UrlSegmentGroup(segmentGroup.segments, children);\n  }\n}\n\nfunction prefixedWith(segmentGroup: UrlSegmentGroup, startIndex: number, commands: any[]) {\n  let currentCommandIndex = 0;\n  let currentPathIndex = startIndex;\n\n  const noMatch = {match: false, pathIndex: 0, commandIndex: 0};\n  while (currentPathIndex < segmentGroup.segments.length) {\n    if (currentCommandIndex >= commands.length) return noMatch;\n    const path = segmentGroup.segments[currentPathIndex];\n    const command = commands[currentCommandIndex];\n    // Do not try to consume command as part of the prefixing if it has outlets because it can\n    // contain outlets other than the one being processed. Consuming the outlets command would\n    // result in other outlets being ignored.\n    if (isCommandWithOutlets(command)) {\n      break;\n    }\n    const curr = `${command}`;\n    const next =\n        currentCommandIndex < commands.length - 1 ? commands[currentCommandIndex + 1] : null;\n\n    if (currentPathIndex > 0 && curr === undefined) break;\n\n    if (curr && next && (typeof next === 'object') && next.outlets === undefined) {\n      if (!compare(curr, next, path)) return noMatch;\n      currentCommandIndex += 2;\n    } else {\n      if (!compare(curr, {}, path)) return noMatch;\n      currentCommandIndex++;\n    }\n    currentPathIndex++;\n  }\n\n  return {match: true, pathIndex: currentPathIndex, commandIndex: currentCommandIndex};\n}\n\nfunction createNewSegmentGroup(\n    segmentGroup: UrlSegmentGroup, startIndex: number, commands: any[]): UrlSegmentGroup {\n  const paths = segmentGroup.segments.slice(0, startIndex);\n\n  let i = 0;\n  while (i < commands.length) {\n    const command = commands[i];\n    if (isCommandWithOutlets(command)) {\n      const children = createNewSegmentChildren(command.outlets);\n      return new UrlSegmentGroup(paths, children);\n    }\n\n    // if we start with an object literal, we need to reuse the path part from the segment\n    if (i === 0 && isMatrixParams(commands[0])) {\n      const p = segmentGroup.segments[startIndex];\n      paths.push(new UrlSegment(p.path, stringify(commands[0])));\n      i++;\n      continue;\n    }\n\n    const curr = isCommandWithOutlets(command) ? command.outlets[PRIMARY_OUTLET] : `${command}`;\n    const next = (i < commands.length - 1) ? commands[i + 1] : null;\n    if (curr && next && isMatrixParams(next)) {\n      paths.push(new UrlSegment(curr, stringify(next)));\n      i += 2;\n    } else {\n      paths.push(new UrlSegment(curr, {}));\n      i++;\n    }\n  }\n  return new UrlSegmentGroup(paths, {});\n}\n\nfunction createNewSegmentChildren(outlets: {[name: string]: unknown[]|string}):\n    {[outlet: string]: UrlSegmentGroup} {\n  const children: {[outlet: string]: UrlSegmentGroup} = {};\n  forEach(outlets, (commands, outlet) => {\n    if (typeof commands === 'string') {\n      commands = [commands];\n    }\n    if (commands !== null) {\n      children[outlet] = createNewSegmentGroup(new UrlSegmentGroup([], {}), 0, commands);\n    }\n  });\n  return children;\n}\n\nfunction stringify(params: {[key: string]: any}): {[key: string]: string} {\n  const res: {[key: string]: string} = {};\n  forEach(params, (v: any, k: string) => res[k] = `${v}`);\n  return res;\n}\n\nfunction compare(path: string, params: {[key: string]: any}, segment: UrlSegment): boolean {\n  return path == segment.path && shallowEqual(params, segment.parameters);\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Route} from './models';\nimport {ActivatedRouteSnapshot, RouterStateSnapshot} from './router_state';\n\n/**\n * Identifies the call or event that triggered a navigation.\n *\n * * 'imperative': Triggered by `router.navigateByUrl()` or `router.navigate()`.\n * * 'popstate' : Triggered by a `popstate` event.\n * * 'hashchange'-: Triggered by a `hashchange` event.\n *\n * @publicApi\n */\nexport type NavigationTrigger = 'imperative'|'popstate'|'hashchange';\nexport const IMPERATIVE_NAVIGATION = 'imperative';\n\n/**\n * Identifies the type of a router event.\n *\n * @publicApi\n */\nexport const enum EventType {\n  NavigationStart,\n  NavigationEnd,\n  NavigationCancel,\n  NavigationError,\n  RoutesRecognized,\n  ResolveStart,\n  ResolveEnd,\n  GuardsCheckStart,\n  GuardsCheckEnd,\n  RouteConfigLoadStart,\n  RouteConfigLoadEnd,\n  ChildActivationStart,\n  ChildActivationEnd,\n  ActivationStart,\n  ActivationEnd,\n  Scroll,\n  NavigationSkipped,\n}\n\n/**\n * Base for events the router goes through, as opposed to events tied to a specific\n * route. Fired one time for any given navigation.\n *\n * The following code shows how a class subscribes to router events.\n *\n * ```ts\n * import {Event, RouterEvent, Router} from '@angular/router';\n *\n * class MyService {\n *   constructor(public router: Router) {\n *     router.events.pipe(\n *        filter((e: Event): e is RouterEvent => e instanceof RouterEvent)\n *     ).subscribe((e: RouterEvent) => {\n *       // Do something\n *     });\n *   }\n * }\n * ```\n *\n * @see `Event`\n * @see [Router events summary](guide/router-reference#router-events)\n * @publicApi\n */\nexport class RouterEvent {\n  constructor(\n      /** A unique ID that the router assigns to every router navigation. */\n      public id: number,\n      /** The URL that is the destination for this navigation. */\n      public url: string) {}\n}\n\n/**\n * An event triggered when a navigation starts.\n *\n * @publicApi\n */\nexport class NavigationStart extends RouterEvent {\n  readonly type = EventType.NavigationStart;\n\n  /**\n   * Identifies the call or event that triggered the navigation.\n   * An `imperative` trigger is a call to `router.navigateByUrl()` or `router.navigate()`.\n   *\n   * @see `NavigationEnd`\n   * @see `NavigationCancel`\n   * @see `NavigationError`\n   */\n  navigationTrigger?: NavigationTrigger;\n\n  /**\n   * The navigation state that was previously supplied to the `pushState` call,\n   * when the navigation is triggered by a `popstate` event. Otherwise null.\n   *\n   * The state object is defined by `NavigationExtras`, and contains any\n   * developer-defined state value, as well as a unique ID that\n   * the router assigns to every router transition/navigation.\n   *\n   * From the perspective of the router, the router never \"goes back\".\n   * When the user clicks on the back button in the browser,\n   * a new navigation ID is created.\n   *\n   * Use the ID in this previous-state object to differentiate between a newly created\n   * state and one returned to by a `popstate` event, so that you can restore some\n   * remembered state, such as scroll position.\n   *\n   */\n  restoredState?: {[k: string]: any, navigationId: number}|null;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /** @docsNotRequired */\n      navigationTrigger: NavigationTrigger = 'imperative',\n      /** @docsNotRequired */\n      restoredState: {[k: string]: any, navigationId: number}|null = null) {\n    super(id, url);\n    this.navigationTrigger = navigationTrigger;\n    this.restoredState = restoredState;\n  }\n\n  /** @docsNotRequired */\n  override toString(): string {\n    return `NavigationStart(id: ${this.id}, url: '${this.url}')`;\n  }\n}\n\n/**\n * An event triggered when a navigation ends successfully.\n *\n * @see `NavigationStart`\n * @see `NavigationCancel`\n * @see `NavigationError`\n *\n * @publicApi\n */\nexport class NavigationEnd extends RouterEvent {\n  readonly type = EventType.NavigationEnd;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /** @docsNotRequired */\n      public urlAfterRedirects: string) {\n    super(id, url);\n  }\n\n  /** @docsNotRequired */\n  override toString(): string {\n    return `NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${\n        this.urlAfterRedirects}')`;\n  }\n}\n\n/**\n * A code for the `NavigationCancel` event of the `Router` to indicate the\n * reason a navigation failed.\n *\n * @publicApi\n */\nexport const enum NavigationCancellationCode {\n  /**\n   * A navigation failed because a guard returned a `UrlTree` to redirect.\n   */\n  Redirect,\n  /**\n   * A navigation failed because a more recent navigation started.\n   */\n  SupersededByNewNavigation,\n  /**\n   * A navigation failed because one of the resolvers completed without emiting a value.\n   */\n  NoDataFromResolver,\n  /**\n   * A navigation failed because a guard returned `false`.\n   */\n  GuardRejected,\n}\n\n/**\n * A code for the `NavigationSkipped` event of the `Router` to indicate the\n * reason a navigation was skipped.\n *\n * @publicApi\n */\nexport const enum NavigationSkippedCode {\n  /**\n   * A navigation was skipped because the navigation URL was the same as the current Router URL.\n   */\n  IgnoredSameUrlNavigation,\n  /**\n   * A navigation was skipped because the configured `UrlHandlingStrategy` return `false` for both\n   * the current Router URL and the target of the navigation.\n   *\n   * @see UrlHandlingStrategy\n   */\n  IgnoredByUrlHandlingStrategy,\n}\n\n/**\n * An event triggered when a navigation is canceled, directly or indirectly.\n * This can happen for several reasons including when a route guard\n * returns `false` or initiates a redirect by returning a `UrlTree`.\n *\n * @see `NavigationStart`\n * @see `NavigationEnd`\n * @see `NavigationError`\n *\n * @publicApi\n */\nexport class NavigationCancel extends RouterEvent {\n  readonly type = EventType.NavigationCancel;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /**\n       * A description of why the navigation was cancelled. For debug purposes only. Use `code`\n       * instead for a stable cancellation reason that can be used in production.\n       */\n      public reason: string,\n      /**\n       * A code to indicate why the navigation was canceled. This cancellation code is stable for\n       * the reason and can be relied on whereas the `reason` string could change and should not be\n       * used in production.\n       */\n      readonly code?: NavigationCancellationCode) {\n    super(id, url);\n  }\n\n  /** @docsNotRequired */\n  override toString(): string {\n    return `NavigationCancel(id: ${this.id}, url: '${this.url}')`;\n  }\n}\n\n/**\n * An event triggered when a navigation is skipped.\n * This can happen for a couple reasons including onSameUrlHandling\n * is set to `ignore` and the navigation URL is not different than the\n * current state.\n *\n * @publicApi\n */\nexport class NavigationSkipped extends RouterEvent {\n  readonly type = EventType.NavigationSkipped;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /**\n       * A description of why the navigation was skipped. For debug purposes only. Use `code`\n       * instead for a stable skipped reason that can be used in production.\n       */\n      public reason: string,\n      /**\n       * A code to indicate why the navigation was skipped. This code is stable for\n       * the reason and can be relied on whereas the `reason` string could change and should not be\n       * used in production.\n       */\n      readonly code?: NavigationSkippedCode) {\n    super(id, url);\n  }\n}\n\n/**\n * An event triggered when a navigation fails due to an unexpected error.\n *\n * @see `NavigationStart`\n * @see `NavigationEnd`\n * @see `NavigationCancel`\n *\n * @publicApi\n */\nexport class NavigationError extends RouterEvent {\n  readonly type = EventType.NavigationError;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /** @docsNotRequired */\n      public error: any,\n      /**\n       * The target of the navigation when the error occurred.\n       *\n       * Note that this can be `undefined` because an error could have occurred before the\n       * `RouterStateSnapshot` was created for the navigation.\n       */\n      readonly target?: RouterStateSnapshot) {\n    super(id, url);\n  }\n\n  /** @docsNotRequired */\n  override toString(): string {\n    return `NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`;\n  }\n}\n\n/**\n * An event triggered when routes are recognized.\n *\n * @publicApi\n */\nexport class RoutesRecognized extends RouterEvent {\n  readonly type = EventType.RoutesRecognized;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /** @docsNotRequired */\n      public urlAfterRedirects: string,\n      /** @docsNotRequired */\n      public state: RouterStateSnapshot) {\n    super(id, url);\n  }\n\n  /** @docsNotRequired */\n  override toString(): string {\n    return `RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${\n        this.urlAfterRedirects}', state: ${this.state})`;\n  }\n}\n\n/**\n * An event triggered at the start of the Guard phase of routing.\n *\n * @see `GuardsCheckEnd`\n *\n * @publicApi\n */\nexport class GuardsCheckStart extends RouterEvent {\n  readonly type = EventType.GuardsCheckStart;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /** @docsNotRequired */\n      public urlAfterRedirects: string,\n      /** @docsNotRequired */\n      public state: RouterStateSnapshot) {\n    super(id, url);\n  }\n\n  override toString(): string {\n    return `GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${\n        this.urlAfterRedirects}', state: ${this.state})`;\n  }\n}\n\n/**\n * An event triggered at the end of the Guard phase of routing.\n *\n * @see `GuardsCheckStart`\n *\n * @publicApi\n */\nexport class GuardsCheckEnd extends RouterEvent {\n  readonly type = EventType.GuardsCheckEnd;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /** @docsNotRequired */\n      public urlAfterRedirects: string,\n      /** @docsNotRequired */\n      public state: RouterStateSnapshot,\n      /** @docsNotRequired */\n      public shouldActivate: boolean) {\n    super(id, url);\n  }\n\n  override toString(): string {\n    return `GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${\n        this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`;\n  }\n}\n\n/**\n * An event triggered at the start of the Resolve phase of routing.\n *\n * Runs in the \"resolve\" phase whether or not there is anything to resolve.\n * In future, may change to only run when there are things to be resolved.\n *\n * @see `ResolveEnd`\n *\n * @publicApi\n */\nexport class ResolveStart extends RouterEvent {\n  readonly type = EventType.ResolveStart;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /** @docsNotRequired */\n      public urlAfterRedirects: string,\n      /** @docsNotRequired */\n      public state: RouterStateSnapshot) {\n    super(id, url);\n  }\n\n  override toString(): string {\n    return `ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${\n        this.urlAfterRedirects}', state: ${this.state})`;\n  }\n}\n\n/**\n * An event triggered at the end of the Resolve phase of routing.\n * @see `ResolveStart`.\n *\n * @publicApi\n */\nexport class ResolveEnd extends RouterEvent {\n  readonly type = EventType.ResolveEnd;\n\n  constructor(\n      /** @docsNotRequired */\n      id: number,\n      /** @docsNotRequired */\n      url: string,\n      /** @docsNotRequired */\n      public urlAfterRedirects: string,\n      /** @docsNotRequired */\n      public state: RouterStateSnapshot) {\n    super(id, url);\n  }\n\n  override toString(): string {\n    return `ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${\n        this.urlAfterRedirects}', state: ${this.state})`;\n  }\n}\n\n/**\n * An event triggered before lazy loading a route configuration.\n *\n * @see `RouteConfigLoadEnd`\n *\n * @publicApi\n */\nexport class RouteConfigLoadStart {\n  readonly type = EventType.RouteConfigLoadStart;\n\n  constructor(\n      /** @docsNotRequired */\n      public route: Route) {}\n  toString(): string {\n    return `RouteConfigLoadStart(path: ${this.route.path})`;\n  }\n}\n\n/**\n * An event triggered when a route has been lazy loaded.\n *\n * @see `RouteConfigLoadStart`\n *\n * @publicApi\n */\nexport class RouteConfigLoadEnd {\n  readonly type = EventType.RouteConfigLoadEnd;\n\n  constructor(\n      /** @docsNotRequired */\n      public route: Route) {}\n  toString(): string {\n    return `RouteConfigLoadEnd(path: ${this.route.path})`;\n  }\n}\n\n/**\n * An event triggered at the start of the child-activation\n * part of the Resolve phase of routing.\n * @see  `ChildActivationEnd`\n * @see `ResolveStart`\n *\n * @publicApi\n */\nexport class ChildActivationStart {\n  readonly type = EventType.ChildActivationStart;\n\n  constructor(\n      /** @docsNotRequired */\n      public snapshot: ActivatedRouteSnapshot) {}\n  toString(): string {\n    const path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n    return `ChildActivationStart(path: '${path}')`;\n  }\n}\n\n/**\n * An event triggered at the end of the child-activation part\n * of the Resolve phase of routing.\n * @see `ChildActivationStart`\n * @see `ResolveStart`\n * @publicApi\n */\nexport class ChildActivationEnd {\n  readonly type = EventType.ChildActivationEnd;\n\n  constructor(\n      /** @docsNotRequired */\n      public snapshot: ActivatedRouteSnapshot) {}\n  toString(): string {\n    const path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n    return `ChildActivationEnd(path: '${path}')`;\n  }\n}\n\n/**\n * An event triggered at the start of the activation part\n * of the Resolve phase of routing.\n * @see `ActivationEnd`\n * @see `ResolveStart`\n *\n * @publicApi\n */\nexport class ActivationStart {\n  readonly type = EventType.ActivationStart;\n\n  constructor(\n      /** @docsNotRequired */\n      public snapshot: ActivatedRouteSnapshot) {}\n  toString(): string {\n    const path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n    return `ActivationStart(path: '${path}')`;\n  }\n}\n\n/**\n * An event triggered at the end of the activation part\n * of the Resolve phase of routing.\n * @see `ActivationStart`\n * @see `ResolveStart`\n *\n * @publicApi\n */\nexport class ActivationEnd {\n  readonly type = EventType.ActivationEnd;\n\n  constructor(\n      /** @docsNotRequired */\n      public snapshot: ActivatedRouteSnapshot) {}\n  toString(): string {\n    const path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n    return `ActivationEnd(path: '${path}')`;\n  }\n}\n\n/**\n * An event triggered by scrolling.\n *\n * @publicApi\n */\nexport class Scroll {\n  readonly type = EventType.Scroll;\n\n  constructor(\n      /** @docsNotRequired */\n      readonly routerEvent: NavigationEnd,\n\n      /** @docsNotRequired */\n      readonly position: [number, number]|null,\n\n      /** @docsNotRequired */\n      readonly anchor: string|null) {}\n\n  toString(): string {\n    const pos = this.position ? `${this.position[0]}, ${this.position[1]}` : null;\n    return `Scroll(anchor: '${this.anchor}', position: '${pos}')`;\n  }\n}\n\n/**\n * Router events that allow you to track the lifecycle of the router.\n *\n * The events occur in the following sequence:\n *\n * * [NavigationStart](api/router/NavigationStart): Navigation starts.\n * * [RouteConfigLoadStart](api/router/RouteConfigLoadStart): Before\n * the router [lazy loads](/guide/router#lazy-loading) a route configuration.\n * * [RouteConfigLoadEnd](api/router/RouteConfigLoadEnd): After a route has been lazy loaded.\n * * [RoutesRecognized](api/router/RoutesRecognized): When the router parses the URL\n * and the routes are recognized.\n * * [GuardsCheckStart](api/router/GuardsCheckStart): When the router begins the *guards*\n * phase of routing.\n * * [ChildActivationStart](api/router/ChildActivationStart): When the router\n * begins activating a route's children.\n * * [ActivationStart](api/router/ActivationStart): When the router begins activating a route.\n * * [GuardsCheckEnd](api/router/GuardsCheckEnd): When the router finishes the *guards*\n * phase of routing successfully.\n * * [ResolveStart](api/router/ResolveStart): When the router begins the *resolve*\n * phase of routing.\n * * [ResolveEnd](api/router/ResolveEnd): When the router finishes the *resolve*\n * phase of routing successfully.\n * * [ChildActivationEnd](api/router/ChildActivationEnd): When the router finishes\n * activating a route's children.\n * * [ActivationEnd](api/router/ActivationEnd): When the router finishes activating a route.\n * * [NavigationEnd](api/router/NavigationEnd): When navigation ends successfully.\n * * [NavigationCancel](api/router/NavigationCancel): When navigation is canceled.\n * * [NavigationError](api/router/NavigationError): When navigation fails\n * due to an unexpected error.\n * * [Scroll](api/router/Scroll): When the user scrolls.\n *\n * @publicApi\n */\nexport type Event = RouterEvent|NavigationStart|NavigationEnd|NavigationCancel|NavigationError|\n    RoutesRecognized|GuardsCheckStart|GuardsCheckEnd|RouteConfigLoadStart|RouteConfigLoadEnd|\n    ChildActivationStart|ChildActivationEnd|ActivationStart|ActivationEnd|Scroll|ResolveStart|\n    ResolveEnd|NavigationSkipped;\n\n\nexport function stringifyEvent(routerEvent: Event): string {\n  if (!('type' in routerEvent)) {\n    return `Unknown Router Event: ${routerEvent.constructor.name}`;\n  }\n  switch (routerEvent.type) {\n    case EventType.ActivationEnd:\n      return `ActivationEnd(path: '${routerEvent.snapshot.routeConfig?.path || ''}')`;\n    case EventType.ActivationStart:\n      return `ActivationStart(path: '${routerEvent.snapshot.routeConfig?.path || ''}')`;\n    case EventType.ChildActivationEnd:\n      return `ChildActivationEnd(path: '${routerEvent.snapshot.routeConfig?.path || ''}')`;\n    case EventType.ChildActivationStart:\n      return `ChildActivationStart(path: '${routerEvent.snapshot.routeConfig?.path || ''}')`;\n    case EventType.GuardsCheckEnd:\n      return `GuardsCheckEnd(id: ${routerEvent.id}, url: '${\n          routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}', state: ${\n          routerEvent.state}, shouldActivate: ${routerEvent.shouldActivate})`;\n    case EventType.GuardsCheckStart:\n      return `GuardsCheckStart(id: ${routerEvent.id}, url: '${\n          routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}', state: ${\n          routerEvent.state})`;\n    case EventType.NavigationCancel:\n      return `NavigationCancel(id: ${routerEvent.id}, url: '${routerEvent.url}')`;\n    case EventType.NavigationSkipped:\n      return `NavigationSkipped(id: ${routerEvent.id}, url: '${routerEvent.url}')`;\n    case EventType.NavigationEnd:\n      return `NavigationEnd(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${\n          routerEvent.urlAfterRedirects}')`;\n    case EventType.NavigationError:\n      return `NavigationError(id: ${routerEvent.id}, url: '${routerEvent.url}', error: ${\n          routerEvent.error})`;\n    case EventType.NavigationStart:\n      return `NavigationStart(id: ${routerEvent.id}, url: '${routerEvent.url}')`;\n    case EventType.ResolveEnd:\n      return `ResolveEnd(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${\n          routerEvent.urlAfterRedirects}', state: ${routerEvent.state})`;\n    case EventType.ResolveStart:\n      return `ResolveStart(id: ${routerEvent.id}, url: '${routerEvent.url}', urlAfterRedirects: '${\n          routerEvent.urlAfterRedirects}', state: ${routerEvent.state})`;\n    case EventType.RouteConfigLoadEnd:\n      return `RouteConfigLoadEnd(path: ${routerEvent.route.path})`;\n    case EventType.RouteConfigLoadStart:\n      return `RouteConfigLoadStart(path: ${routerEvent.route.path})`;\n    case EventType.RoutesRecognized:\n      return `RoutesRecognized(id: ${routerEvent.id}, url: '${\n          routerEvent.url}', urlAfterRedirects: '${routerEvent.urlAfterRedirects}', state: ${\n          routerEvent.state})`;\n    case EventType.Scroll:\n      const pos =\n          routerEvent.position ? `${routerEvent.position[0]}, ${routerEvent.position[1]}` : null;\n      return `Scroll(anchor: '${routerEvent.anchor}', position: '${pos}')`;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable} from '@angular/core';\n\nimport {createSegmentGroupFromRoute, createUrlTree, createUrlTreeFromSegmentGroup} from './create_url_tree';\nimport {ActivatedRoute, RouterState} from './router_state';\nimport {Params} from './shared';\nimport {UrlSegmentGroup, UrlTree} from './url_tree';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || ngDevMode;\n\n@Injectable()\nexport class LegacyCreateUrlTree implements CreateUrlTreeStrategy {\n  createUrlTree(\n      relativeTo: ActivatedRoute|null|undefined, currentState: RouterState, currentUrlTree: UrlTree,\n      commands: any[], queryParams: Params|null, fragment: string|null): UrlTree {\n    const a = relativeTo || currentState.root;\n    return createUrlTree(a, currentUrlTree, commands, queryParams, fragment);\n  }\n}\n\n@Injectable()\nexport class CreateUrlTreeUsingSnapshot implements CreateUrlTreeStrategy {\n  createUrlTree(\n      relativeTo: ActivatedRoute|null|undefined, currentState: RouterState, currentUrlTree: UrlTree,\n      commands: any[], queryParams: Params|null, fragment: string|null): UrlTree {\n    let relativeToUrlSegmentGroup: UrlSegmentGroup|undefined;\n    try {\n      const relativeToSnapshot = relativeTo ? relativeTo.snapshot : currentState.snapshot.root;\n      relativeToUrlSegmentGroup = createSegmentGroupFromRoute(relativeToSnapshot);\n    } catch (e: unknown) {\n      // This is strictly for backwards compatibility with tests that create\n      // invalid `ActivatedRoute` mocks.\n      // Note: the difference between having this fallback for invalid `ActivatedRoute` setups and\n      // just throwing is ~500 test failures. Fixing all of those tests by hand is not feasible at\n      // the moment.\n      if (NG_DEV_MODE) {\n        console.warn(\n            `The ActivatedRoute has an invalid structure. This is likely due to an incomplete mock in tests.`);\n      }\n      if (typeof commands[0] !== 'string' || !commands[0].startsWith('/')) {\n        // Navigations that were absolute in the old way of creating UrlTrees\n        // would still work because they wouldn't attempt to match the\n        // segments in the `ActivatedRoute` to the `currentUrlTree` but\n        // instead just replace the root segment with the navigation result.\n        // Non-absolute navigations would fail to apply the commands because\n        // the logic could not find the segment to replace (so they'd act like there were no\n        // commands).\n        commands = [];\n      }\n      relativeToUrlSegmentGroup = currentUrlTree.root;\n    }\n    return createUrlTreeFromSegmentGroup(\n        relativeToUrlSegmentGroup, commands, queryParams, fragment);\n  }\n}\n\n@Injectable({providedIn: 'root', useClass: LegacyCreateUrlTree})\nexport abstract class CreateUrlTreeStrategy {\n  abstract createUrlTree(\n      relativeTo: ActivatedRoute|null|undefined, currentState: RouterState, currentUrlTree: UrlTree,\n      commands: any[], queryParams: Params|null, fragment: string|null): UrlTree;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport class Tree<T> {\n  /** @internal */\n  _root: TreeNode<T>;\n\n  constructor(root: TreeNode<T>) {\n    this._root = root;\n  }\n\n  get root(): T {\n    return this._root.value;\n  }\n\n  /**\n   * @internal\n   */\n  parent(t: T): T|null {\n    const p = this.pathFromRoot(t);\n    return p.length > 1 ? p[p.length - 2] : null;\n  }\n\n  /**\n   * @internal\n   */\n  children(t: T): T[] {\n    const n = findNode(t, this._root);\n    return n ? n.children.map(t => t.value) : [];\n  }\n\n  /**\n   * @internal\n   */\n  firstChild(t: T): T|null {\n    const n = findNode(t, this._root);\n    return n && n.children.length > 0 ? n.children[0].value : null;\n  }\n\n  /**\n   * @internal\n   */\n  siblings(t: T): T[] {\n    const p = findPath(t, this._root);\n    if (p.length < 2) return [];\n\n    const c = p[p.length - 2].children.map(c => c.value);\n    return c.filter(cc => cc !== t);\n  }\n\n  /**\n   * @internal\n   */\n  pathFromRoot(t: T): T[] {\n    return findPath(t, this._root).map(s => s.value);\n  }\n}\n\n\n// DFS for the node matching the value\nfunction findNode<T>(value: T, node: TreeNode<T>): TreeNode<T>|null {\n  if (value === node.value) return node;\n\n  for (const child of node.children) {\n    const node = findNode(value, child);\n    if (node) return node;\n  }\n\n  return null;\n}\n\n// Return the path to the node with the given value using DFS\nfunction findPath<T>(value: T, node: TreeNode<T>): TreeNode<T>[] {\n  if (value === node.value) return [node];\n\n  for (const child of node.children) {\n    const path = findPath(value, child);\n    if (path.length) {\n      path.unshift(node);\n      return path;\n    }\n  }\n\n  return [];\n}\n\nexport class TreeNode<T> {\n  constructor(public value: T, public children: TreeNode<T>[]) {}\n\n  toString(): string {\n    return `TreeNode(${this.value})`;\n  }\n}\n\n// Return the list of T indexed by outlet name\nexport function nodeChildrenAsMap<T extends {outlet: string}>(node: TreeNode<T>|null) {\n  const map: {[outlet: string]: TreeNode<T>} = {};\n\n  if (node) {\n    node.children.forEach(child => map[child.value.outlet] = child);\n  }\n\n  return map;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Type} from '@angular/core';\nimport {BehaviorSubject, Observable, of} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nimport {Data, ResolveData, Route} from './models';\nimport {convertToParamMap, ParamMap, Params, PRIMARY_OUTLET, RouteTitleKey} from './shared';\nimport {equalSegments, UrlSegment, UrlSegmentGroup, UrlTree} from './url_tree';\nimport {shallowEqual, shallowEqualArrays} from './utils/collection';\nimport {Tree, TreeNode} from './utils/tree';\n\n/**\n * Represents the state of the router as a tree of activated routes.\n *\n * @usageNotes\n *\n * Every node in the route tree is an `ActivatedRoute` instance\n * that knows about the \"consumed\" URL segments, the extracted parameters,\n * and the resolved data.\n * Use the `ActivatedRoute` properties to traverse the tree from any node.\n *\n * The following fragment shows how a component gets the root node\n * of the current state to establish its own route tree:\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const state: RouterState = router.routerState;\n *     const root: ActivatedRoute = state.root;\n *     const child = root.firstChild;\n *     const id: Observable<string> = child.params.map(p => p.id);\n *     //...\n *   }\n * }\n * ```\n *\n * @see `ActivatedRoute`\n * @see [Getting route information](guide/router#getting-route-information)\n *\n * @publicApi\n */\nexport class RouterState extends Tree<ActivatedRoute> {\n  /** @internal */\n  constructor(\n      root: TreeNode<ActivatedRoute>,\n      /** The current snapshot of the router state */\n      public snapshot: RouterStateSnapshot) {\n    super(root);\n    setRouterState(<RouterState>this, root);\n  }\n\n  override toString(): string {\n    return this.snapshot.toString();\n  }\n}\n\nexport function createEmptyState(urlTree: UrlTree, rootComponent: Type<any>|null): RouterState {\n  const snapshot = createEmptyStateSnapshot(urlTree, rootComponent);\n  const emptyUrl = new BehaviorSubject([new UrlSegment('', {})]);\n  const emptyParams = new BehaviorSubject({});\n  const emptyData = new BehaviorSubject({});\n  const emptyQueryParams = new BehaviorSubject({});\n  const fragment = new BehaviorSubject('');\n  const activated = new ActivatedRoute(\n      emptyUrl, emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent,\n      snapshot.root);\n  activated.snapshot = snapshot.root;\n  return new RouterState(new TreeNode<ActivatedRoute>(activated, []), snapshot);\n}\n\nexport function createEmptyStateSnapshot(\n    urlTree: UrlTree, rootComponent: Type<any>|null): RouterStateSnapshot {\n  const emptyParams = {};\n  const emptyData = {};\n  const emptyQueryParams = {};\n  const fragment = '';\n  const activated = new ActivatedRouteSnapshot(\n      [], emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, null,\n      urlTree.root, -1, {});\n  return new RouterStateSnapshot('', new TreeNode<ActivatedRouteSnapshot>(activated, []));\n}\n\n/**\n * Provides access to information about a route associated with a component\n * that is loaded in an outlet.\n * Use to traverse the `RouterState` tree and extract information from nodes.\n *\n * The following example shows how to construct a component using information from a\n * currently activated route.\n *\n * Note: the observables in this class only emit when the current and previous values differ based\n * on shallow equality. For example, changing deeply nested properties in resolved `data` will not\n * cause the `ActivatedRoute.data` `Observable` to emit a new value.\n *\n * {@example router/activated-route/module.ts region=\"activated-route\"\n *     header=\"activated-route.component.ts\"}\n *\n * @see [Getting route information](guide/router#getting-route-information)\n *\n * @publicApi\n */\nexport class ActivatedRoute {\n  /** The current snapshot of this route */\n  snapshot!: ActivatedRouteSnapshot;\n  /** @internal */\n  _futureSnapshot: ActivatedRouteSnapshot;\n  /** @internal */\n  _routerState!: RouterState;\n  /** @internal */\n  _paramMap?: Observable<ParamMap>;\n  /** @internal */\n  _queryParamMap?: Observable<ParamMap>;\n\n  /** An Observable of the resolved route title */\n  readonly title: Observable<string|undefined> =\n      this.data?.pipe(map((d: Data) => d[RouteTitleKey])) ?? of(undefined);\n\n  /** @internal */\n  constructor(\n      /** An observable of the URL segments matched by this route. */\n      public url: Observable<UrlSegment[]>,\n      /** An observable of the matrix parameters scoped to this route. */\n      public params: Observable<Params>,\n      /** An observable of the query parameters shared by all the routes. */\n      public queryParams: Observable<Params>,\n      /** An observable of the URL fragment shared by all the routes. */\n      public fragment: Observable<string|null>,\n      /** An observable of the static and resolved data of this route. */\n      public data: Observable<Data>,\n      /** The outlet name of the route, a constant. */\n      public outlet: string,\n      /** The component of the route, a constant. */\n      public component: Type<any>|null, futureSnapshot: ActivatedRouteSnapshot) {\n    this._futureSnapshot = futureSnapshot;\n  }\n\n  /** The configuration used to match this route. */\n  get routeConfig(): Route|null {\n    return this._futureSnapshot.routeConfig;\n  }\n\n  /** The root of the router state. */\n  get root(): ActivatedRoute {\n    return this._routerState.root;\n  }\n\n  /** The parent of this route in the router state tree. */\n  get parent(): ActivatedRoute|null {\n    return this._routerState.parent(this);\n  }\n\n  /** The first child of this route in the router state tree. */\n  get firstChild(): ActivatedRoute|null {\n    return this._routerState.firstChild(this);\n  }\n\n  /** The children of this route in the router state tree. */\n  get children(): ActivatedRoute[] {\n    return this._routerState.children(this);\n  }\n\n  /** The path from the root of the router state tree to this route. */\n  get pathFromRoot(): ActivatedRoute[] {\n    return this._routerState.pathFromRoot(this);\n  }\n\n  /**\n   * An Observable that contains a map of the required and optional parameters\n   * specific to the route.\n   * The map supports retrieving single and multiple values from the same parameter.\n   */\n  get paramMap(): Observable<ParamMap> {\n    if (!this._paramMap) {\n      this._paramMap = this.params.pipe(map((p: Params): ParamMap => convertToParamMap(p)));\n    }\n    return this._paramMap;\n  }\n\n  /**\n   * An Observable that contains a map of the query parameters available to all routes.\n   * The map supports retrieving single and multiple values from the query parameter.\n   */\n  get queryParamMap(): Observable<ParamMap> {\n    if (!this._queryParamMap) {\n      this._queryParamMap =\n          this.queryParams.pipe(map((p: Params): ParamMap => convertToParamMap(p)));\n    }\n    return this._queryParamMap;\n  }\n\n  toString(): string {\n    return this.snapshot ? this.snapshot.toString() : `Future(${this._futureSnapshot})`;\n  }\n}\n\nexport type ParamsInheritanceStrategy = 'emptyOnly'|'always';\n\n/** @internal */\nexport type Inherited = {\n  params: Params,\n  data: Data,\n  resolve: Data,\n};\n\n/**\n * Returns the inherited params, data, and resolve for a given route.\n * By default, this only inherits values up to the nearest path-less or component-less route.\n * @internal\n */\nexport function inheritedParamsDataResolve(\n    route: ActivatedRouteSnapshot,\n    paramsInheritanceStrategy: ParamsInheritanceStrategy = 'emptyOnly'): Inherited {\n  const pathFromRoot = route.pathFromRoot;\n\n  let inheritingStartingFrom = 0;\n  if (paramsInheritanceStrategy !== 'always') {\n    inheritingStartingFrom = pathFromRoot.length - 1;\n\n    while (inheritingStartingFrom >= 1) {\n      const current = pathFromRoot[inheritingStartingFrom];\n      const parent = pathFromRoot[inheritingStartingFrom - 1];\n      // current route is an empty path => inherits its parent's params and data\n      if (current.routeConfig && current.routeConfig.path === '') {\n        inheritingStartingFrom--;\n\n        // parent is componentless => current route should inherit its params and data\n      } else if (!parent.component) {\n        inheritingStartingFrom--;\n\n      } else {\n        break;\n      }\n    }\n  }\n\n  return flattenInherited(pathFromRoot.slice(inheritingStartingFrom));\n}\n\n/** @internal */\nfunction flattenInherited(pathFromRoot: ActivatedRouteSnapshot[]): Inherited {\n  return pathFromRoot.reduce((res, curr) => {\n    const params = {...res.params, ...curr.params};\n    const data = {...res.data, ...curr.data};\n    const resolve =\n        {...curr.data, ...res.resolve, ...curr.routeConfig?.data, ...curr._resolvedData};\n    return {params, data, resolve};\n  }, {params: {}, data: {}, resolve: {}});\n}\n\n/**\n * @description\n *\n * Contains the information about a route associated with a component loaded in an\n * outlet at a particular moment in time. ActivatedRouteSnapshot can also be used to\n * traverse the router state tree.\n *\n * The following example initializes a component with route information extracted\n * from the snapshot of the root node at the time of creation.\n *\n * ```\n * @Component({templateUrl:'./my-component.html'})\n * class MyComponent {\n *   constructor(route: ActivatedRoute) {\n *     const id: string = route.snapshot.params.id;\n *     const url: string = route.snapshot.url.join('');\n *     const user = route.snapshot.data.user;\n *   }\n * }\n * ```\n *\n * @publicApi\n */\nexport class ActivatedRouteSnapshot {\n  /** The configuration used to match this route **/\n  public readonly routeConfig: Route|null;\n  /** @internal **/\n  _urlSegment: UrlSegmentGroup;\n  /** @internal */\n  _lastPathIndex: number;\n  /** @internal */\n  _resolve: ResolveData;\n  /** @internal */\n  _resolvedData?: Data;\n  /** @internal */\n  _routerState!: RouterStateSnapshot;\n  /** @internal */\n  _paramMap?: ParamMap;\n  /** @internal */\n  _queryParamMap?: ParamMap;\n\n  /** The resolved route title */\n  get title(): string|undefined {\n    // Note: This _must_ be a getter because the data is mutated in the resolvers. Title will not be\n    // available at the time of class instantiation.\n    return this.data?.[RouteTitleKey];\n  }\n\n  /** @internal */\n  constructor(\n      /** The URL segments matched by this route */\n      public url: UrlSegment[],\n      /**\n       *  The matrix parameters scoped to this route.\n       *\n       *  You can compute all params (or data) in the router state or to get params outside\n       *  of an activated component by traversing the `RouterState` tree as in the following\n       *  example:\n       *  ```\n       *  collectRouteParams(router: Router) {\n       *    let params = {};\n       *    let stack: ActivatedRouteSnapshot[] = [router.routerState.snapshot.root];\n       *    while (stack.length > 0) {\n       *      const route = stack.pop()!;\n       *      params = {...params, ...route.params};\n       *      stack.push(...route.children);\n       *    }\n       *    return params;\n       *  }\n       *  ```\n       */\n      public params: Params,\n      /** The query parameters shared by all the routes */\n      public queryParams: Params,\n      /** The URL fragment shared by all the routes */\n      public fragment: string|null,\n      /** The static and resolved data of this route */\n      public data: Data,\n      /** The outlet name of the route */\n      public outlet: string,\n      /** The component of the route */\n      public component: Type<any>|null, routeConfig: Route|null, urlSegment: UrlSegmentGroup,\n      lastPathIndex: number, resolve: ResolveData) {\n    this.routeConfig = routeConfig;\n    this._urlSegment = urlSegment;\n    this._lastPathIndex = lastPathIndex;\n    this._resolve = resolve;\n  }\n\n  /** The root of the router state */\n  get root(): ActivatedRouteSnapshot {\n    return this._routerState.root;\n  }\n\n  /** The parent of this route in the router state tree */\n  get parent(): ActivatedRouteSnapshot|null {\n    return this._routerState.parent(this);\n  }\n\n  /** The first child of this route in the router state tree */\n  get firstChild(): ActivatedRouteSnapshot|null {\n    return this._routerState.firstChild(this);\n  }\n\n  /** The children of this route in the router state tree */\n  get children(): ActivatedRouteSnapshot[] {\n    return this._routerState.children(this);\n  }\n\n  /** The path from the root of the router state tree to this route */\n  get pathFromRoot(): ActivatedRouteSnapshot[] {\n    return this._routerState.pathFromRoot(this);\n  }\n\n  get paramMap(): ParamMap {\n    if (!this._paramMap) {\n      this._paramMap = convertToParamMap(this.params);\n    }\n    return this._paramMap;\n  }\n\n  get queryParamMap(): ParamMap {\n    if (!this._queryParamMap) {\n      this._queryParamMap = convertToParamMap(this.queryParams);\n    }\n    return this._queryParamMap;\n  }\n\n  toString(): string {\n    const url = this.url.map(segment => segment.toString()).join('/');\n    const matched = this.routeConfig ? this.routeConfig.path : '';\n    return `Route(url:'${url}', path:'${matched}')`;\n  }\n}\n\n/**\n * @description\n *\n * Represents the state of the router at a moment in time.\n *\n * This is a tree of activated route snapshots. Every node in this tree knows about\n * the \"consumed\" URL segments, the extracted parameters, and the resolved data.\n *\n * The following example shows how a component is initialized with information\n * from the snapshot of the root node's state at the time of creation.\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const state: RouterState = router.routerState;\n *     const snapshot: RouterStateSnapshot = state.snapshot;\n *     const root: ActivatedRouteSnapshot = snapshot.root;\n *     const child = root.firstChild;\n *     const id: Observable<string> = child.params.map(p => p.id);\n *     //...\n *   }\n * }\n * ```\n *\n * @publicApi\n */\nexport class RouterStateSnapshot extends Tree<ActivatedRouteSnapshot> {\n  /** @internal */\n  constructor(\n      /** The url from which this snapshot was created */\n      public url: string, root: TreeNode<ActivatedRouteSnapshot>) {\n    super(root);\n    setRouterState(<RouterStateSnapshot>this, root);\n  }\n\n  override toString(): string {\n    return serializeNode(this._root);\n  }\n}\n\nfunction setRouterState<U, T extends {_routerState: U}>(state: U, node: TreeNode<T>): void {\n  node.value._routerState = state;\n  node.children.forEach(c => setRouterState(state, c));\n}\n\nfunction serializeNode(node: TreeNode<ActivatedRouteSnapshot>): string {\n  const c = node.children.length > 0 ? ` { ${node.children.map(serializeNode).join(', ')} } ` : '';\n  return `${node.value}${c}`;\n}\n\n/**\n * The expectation is that the activate route is created with the right set of parameters.\n * So we push new values into the observables only when they are not the initial values.\n * And we detect that by checking if the snapshot field is set.\n */\nexport function advanceActivatedRoute(route: ActivatedRoute): void {\n  if (route.snapshot) {\n    const currentSnapshot = route.snapshot;\n    const nextSnapshot = route._futureSnapshot;\n    route.snapshot = nextSnapshot;\n    if (!shallowEqual(currentSnapshot.queryParams, nextSnapshot.queryParams)) {\n      (<any>route.queryParams).next(nextSnapshot.queryParams);\n    }\n    if (currentSnapshot.fragment !== nextSnapshot.fragment) {\n      (<any>route.fragment).next(nextSnapshot.fragment);\n    }\n    if (!shallowEqual(currentSnapshot.params, nextSnapshot.params)) {\n      (<any>route.params).next(nextSnapshot.params);\n    }\n    if (!shallowEqualArrays(currentSnapshot.url, nextSnapshot.url)) {\n      (<any>route.url).next(nextSnapshot.url);\n    }\n    if (!shallowEqual(currentSnapshot.data, nextSnapshot.data)) {\n      (<any>route.data).next(nextSnapshot.data);\n    }\n  } else {\n    route.snapshot = route._futureSnapshot;\n\n    // this is for resolved data\n    (<any>route.data).next(route._futureSnapshot.data);\n  }\n}\n\n\nexport function equalParamsAndUrlSegments(\n    a: ActivatedRouteSnapshot, b: ActivatedRouteSnapshot): boolean {\n  const equalUrlParams = shallowEqual(a.params, b.params) && equalSegments(a.url, b.url);\n  const parentsMismatch = !a.parent !== !b.parent;\n\n  return equalUrlParams && !parentsMismatch &&\n      (!a.parent || equalParamsAndUrlSegments(a.parent, b.parent!));\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {BehaviorSubject} from 'rxjs';\n\nimport {DetachedRouteHandleInternal, RouteReuseStrategy} from './route_reuse_strategy';\nimport {ActivatedRoute, ActivatedRouteSnapshot, RouterState, RouterStateSnapshot} from './router_state';\nimport {TreeNode} from './utils/tree';\n\nexport function createRouterState(\n    routeReuseStrategy: RouteReuseStrategy, curr: RouterStateSnapshot,\n    prevState: RouterState): RouterState {\n  const root = createNode(routeReuseStrategy, curr._root, prevState ? prevState._root : undefined);\n  return new RouterState(root, curr);\n}\n\nfunction createNode(\n    routeReuseStrategy: RouteReuseStrategy, curr: TreeNode<ActivatedRouteSnapshot>,\n    prevState?: TreeNode<ActivatedRoute>): TreeNode<ActivatedRoute> {\n  // reuse an activated route that is currently displayed on the screen\n  if (prevState && routeReuseStrategy.shouldReuseRoute(curr.value, prevState.value.snapshot)) {\n    const value = prevState.value;\n    value._futureSnapshot = curr.value;\n    const children = createOrReuseChildren(routeReuseStrategy, curr, prevState);\n    return new TreeNode<ActivatedRoute>(value, children);\n  } else {\n    if (routeReuseStrategy.shouldAttach(curr.value)) {\n      // retrieve an activated route that is used to be displayed, but is not currently displayed\n      const detachedRouteHandle = routeReuseStrategy.retrieve(curr.value);\n      if (detachedRouteHandle !== null) {\n        const tree = (detachedRouteHandle as DetachedRouteHandleInternal).route;\n        tree.value._futureSnapshot = curr.value;\n        tree.children = curr.children.map(c => createNode(routeReuseStrategy, c));\n        return tree;\n      }\n    }\n\n    const value = createActivatedRoute(curr.value);\n    const children = curr.children.map(c => createNode(routeReuseStrategy, c));\n    return new TreeNode<ActivatedRoute>(value, children);\n  }\n}\n\nfunction createOrReuseChildren(\n    routeReuseStrategy: RouteReuseStrategy, curr: TreeNode<ActivatedRouteSnapshot>,\n    prevState: TreeNode<ActivatedRoute>) {\n  return curr.children.map(child => {\n    for (const p of prevState.children) {\n      if (routeReuseStrategy.shouldReuseRoute(child.value, p.value.snapshot)) {\n        return createNode(routeReuseStrategy, child, p);\n      }\n    }\n    return createNode(routeReuseStrategy, child);\n  });\n}\n\nfunction createActivatedRoute(c: ActivatedRouteSnapshot) {\n  return new ActivatedRoute(\n      new BehaviorSubject(c.url), new BehaviorSubject(c.params), new BehaviorSubject(c.queryParams),\n      new BehaviorSubject(c.fragment), new BehaviorSubject(c.data), c.outlet, c.component, c);\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {NavigationCancellationCode} from './events';\nimport {NavigationBehaviorOptions} from './models';\nimport {isUrlTree, UrlSerializer, UrlTree} from './url_tree';\n\nexport const NAVIGATION_CANCELING_ERROR = 'ngNavigationCancelingError';\n\nexport type NavigationCancelingError =\n    Error&{[NAVIGATION_CANCELING_ERROR]: true, cancellationCode: NavigationCancellationCode};\nexport type RedirectingNavigationCancelingError = NavigationCancelingError&{\n  url: UrlTree;\n  navigationBehaviorOptions?: NavigationBehaviorOptions;\n  cancellationCode: NavigationCancellationCode.Redirect;\n};\n\nexport function redirectingNavigationError(\n    urlSerializer: UrlSerializer, redirect: UrlTree): RedirectingNavigationCancelingError {\n  const {redirectTo, navigationBehaviorOptions} =\n      isUrlTree(redirect) ? {redirectTo: redirect, navigationBehaviorOptions: undefined} : redirect;\n  const error =\n      navigationCancelingError(\n          ngDevMode && `Redirecting to \"${urlSerializer.serialize(redirectTo)}\"`,\n          NavigationCancellationCode.Redirect, redirect) as RedirectingNavigationCancelingError;\n  error.url = redirectTo;\n  error.navigationBehaviorOptions = navigationBehaviorOptions;\n  return error;\n}\n\nexport function navigationCancelingError(\n    message: string|null|false, code: NavigationCancellationCode, redirectUrl?: UrlTree) {\n  const error =\n      new Error('NavigationCancelingError: ' + (message || '')) as NavigationCancelingError;\n  error[NAVIGATION_CANCELING_ERROR] = true;\n  error.cancellationCode = code;\n  if (redirectUrl) {\n    (error as RedirectingNavigationCancelingError).url = redirectUrl;\n  }\n  return error;\n}\n\nexport function isRedirectingNavigationCancelingError(\n    error: unknown|\n    RedirectingNavigationCancelingError): error is RedirectingNavigationCancelingError {\n  return isNavigationCancelingError(error) && isUrlTree((error as any).url);\n}\nexport function isNavigationCancelingError(error: unknown): error is NavigationCancelingError {\n  return error && (error as any)[NAVIGATION_CANCELING_ERROR];\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ComponentFactoryResolver, ComponentRef, EnvironmentInjector, Injectable} from '@angular/core';\n\nimport {RouterOutletContract} from './directives/router_outlet';\nimport {ActivatedRoute} from './router_state';\n\n\n/**\n * Store contextual information about a `RouterOutlet`\n *\n * @publicApi\n */\nexport class OutletContext {\n  outlet: RouterOutletContract|null = null;\n  route: ActivatedRoute|null = null;\n  /**\n   * @deprecated Passing a resolver to retrieve a component factory is not required and is\n   *     deprecated since v14.\n   */\n  resolver: ComponentFactoryResolver|null = null;\n  injector: EnvironmentInjector|null = null;\n  children = new ChildrenOutletContexts();\n  attachRef: ComponentRef<any>|null = null;\n}\n\n/**\n * Store contextual information about the children (= nested) `RouterOutlet`\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root'})\nexport class ChildrenOutletContexts {\n  // contexts for child outlets, by name.\n  private contexts = new Map<string, OutletContext>();\n\n  /** Called when a `RouterOutlet` directive is instantiated */\n  onChildOutletCreated(childName: string, outlet: RouterOutletContract): void {\n    const context = this.getOrCreateContext(childName);\n    context.outlet = outlet;\n    this.contexts.set(childName, context);\n  }\n\n  /**\n   * Called when a `RouterOutlet` directive is destroyed.\n   * We need to keep the context as the outlet could be destroyed inside a NgIf and might be\n   * re-created later.\n   */\n  onChildOutletDestroyed(childName: string): void {\n    const context = this.getContext(childName);\n    if (context) {\n      context.outlet = null;\n      context.attachRef = null;\n    }\n  }\n\n  /**\n   * Called when the corresponding route is deactivated during navigation.\n   * Because the component get destroyed, all children outlet are destroyed.\n   */\n  onOutletDeactivated(): Map<string, OutletContext> {\n    const contexts = this.contexts;\n    this.contexts = new Map();\n    return contexts;\n  }\n\n  onOutletReAttached(contexts: Map<string, OutletContext>) {\n    this.contexts = contexts;\n  }\n\n  getOrCreateContext(childName: string): OutletContext {\n    let context = this.getContext(childName);\n\n    if (!context) {\n      context = new OutletContext();\n      this.contexts.set(childName, context);\n    }\n\n    return context;\n  }\n\n  getContext(childName: string): OutletContext|null {\n    return this.contexts.get(childName) || null;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ChangeDetectorRef, ComponentFactoryResolver, ComponentRef, Directive, EnvironmentInjector, EventEmitter, inject, Injector, Input, OnDestroy, OnInit, Output, SimpleChanges, ViewContainerRef, ɵRuntimeError as RuntimeError,} from '@angular/core';\n\nimport {RuntimeErrorCode} from '../errors';\nimport {Data} from '../models';\nimport {ChildrenOutletContexts} from '../router_outlet_context';\nimport {ActivatedRoute} from '../router_state';\nimport {PRIMARY_OUTLET} from '../shared';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || ngDevMode;\n\n/**\n * An interface that defines the contract for developing a component outlet for the `Router`.\n *\n * An outlet acts as a placeholder that Angular dynamically fills based on the current router state.\n *\n * A router outlet should register itself with the `Router` via\n * `ChildrenOutletContexts#onChildOutletCreated` and unregister with\n * `ChildrenOutletContexts#onChildOutletDestroyed`. When the `Router` identifies a matched `Route`,\n * it looks for a registered outlet in the `ChildrenOutletContexts` and activates it.\n *\n * @see `ChildrenOutletContexts`\n * @publicApi\n */\nexport interface RouterOutletContract {\n  /**\n   * Whether the given outlet is activated.\n   *\n   * An outlet is considered \"activated\" if it has an active component.\n   */\n  isActivated: boolean;\n\n  /** The instance of the activated component or `null` if the outlet is not activated. */\n  component: Object|null;\n\n  /**\n   * The `Data` of the `ActivatedRoute` snapshot.\n   */\n  activatedRouteData: Data;\n\n  /**\n   * The `ActivatedRoute` for the outlet or `null` if the outlet is not activated.\n   */\n  activatedRoute: ActivatedRoute|null;\n\n  /**\n   * Called by the `Router` when the outlet should activate (create a component).\n   */\n  activateWith(activatedRoute: ActivatedRoute, environmentInjector: EnvironmentInjector|null): void;\n  /**\n   * Called by the `Router` when the outlet should activate (create a component).\n   *\n   * @deprecated Passing a resolver to retrieve a component factory is not required and is\n   *     deprecated since v14.\n   */\n  activateWith(activatedRoute: ActivatedRoute, resolver: ComponentFactoryResolver|null): void;\n\n  /**\n   * A request to destroy the currently activated component.\n   *\n   * When a `RouteReuseStrategy` indicates that an `ActivatedRoute` should be removed but stored for\n   * later re-use rather than destroyed, the `Router` will call `detach` instead.\n   */\n  deactivate(): void;\n\n  /**\n   * Called when the `RouteReuseStrategy` instructs to detach the subtree.\n   *\n   * This is similar to `deactivate`, but the activated component should _not_ be destroyed.\n   * Instead, it is returned so that it can be reattached later via the `attach` method.\n   */\n  detach(): ComponentRef<unknown>;\n\n  /**\n   * Called when the `RouteReuseStrategy` instructs to re-attach a previously detached subtree.\n   */\n  attach(ref: ComponentRef<unknown>, activatedRoute: ActivatedRoute): void;\n\n  /**\n   * Emits an activate event when a new component is instantiated\n   **/\n  activateEvents?: EventEmitter<unknown>;\n\n  /**\n   * Emits a deactivate event when a component is destroyed.\n   */\n  deactivateEvents?: EventEmitter<unknown>;\n\n  /**\n   * Emits an attached component instance when the `RouteReuseStrategy` instructs to re-attach a\n   * previously detached subtree.\n   **/\n  attachEvents?: EventEmitter<unknown>;\n\n  /**\n   * Emits a detached component instance when the `RouteReuseStrategy` instructs to detach the\n   * subtree.\n   */\n  detachEvents?: EventEmitter<unknown>;\n}\n\n/**\n * @description\n *\n * Acts as a placeholder that Angular dynamically fills based on the current router state.\n *\n * Each outlet can have a unique name, determined by the optional `name` attribute.\n * The name cannot be set or changed dynamically. If not set, default value is \"primary\".\n *\n * ```\n * <router-outlet></router-outlet>\n * <router-outlet name='left'></router-outlet>\n * <router-outlet name='right'></router-outlet>\n * ```\n *\n * Named outlets can be the targets of secondary routes.\n * The `Route` object for a secondary route has an `outlet` property to identify the target outlet:\n *\n * `{path: <base-path>, component: <component>, outlet: <target_outlet_name>}`\n *\n * Using named outlets and secondary routes, you can target multiple outlets in\n * the same `RouterLink` directive.\n *\n * The router keeps track of separate branches in a navigation tree for each named outlet and\n * generates a representation of that tree in the URL.\n * The URL for a secondary route uses the following syntax to specify both the primary and secondary\n * routes at the same time:\n *\n * `http://base-path/primary-route-path(outlet-name:route-path)`\n *\n * A router outlet emits an activate event when a new component is instantiated,\n * deactivate event when a component is destroyed.\n * An attached event emits when the `RouteReuseStrategy` instructs the outlet to reattach the\n * subtree, and the detached event emits when the `RouteReuseStrategy` instructs the outlet to\n * detach the subtree.\n *\n * ```\n * <router-outlet\n *   (activate)='onActivate($event)'\n *   (deactivate)='onDeactivate($event)'\n *   (attach)='onAttach($event)'\n *   (detach)='onDetach($event)'></router-outlet>\n * ```\n *\n * @see [Routing tutorial](guide/router-tutorial-toh#named-outlets \"Example of a named\n * outlet and secondary route configuration\").\n * @see `RouterLink`\n * @see `Route`\n * @ngModule RouterModule\n *\n * @publicApi\n */\n@Directive({\n  selector: 'router-outlet',\n  exportAs: 'outlet',\n  standalone: true,\n})\nexport class RouterOutlet implements OnDestroy, OnInit, RouterOutletContract {\n  private activated: ComponentRef<any>|null = null;\n  private _activatedRoute: ActivatedRoute|null = null;\n  /**\n   * The name of the outlet\n   *\n   * @see [named outlets](guide/router-tutorial-toh#displaying-multiple-routes-in-named-outlets)\n   */\n  @Input() name = PRIMARY_OUTLET;\n\n  @Output('activate') activateEvents = new EventEmitter<any>();\n  @Output('deactivate') deactivateEvents = new EventEmitter<any>();\n  /**\n   * Emits an attached component instance when the `RouteReuseStrategy` instructs to re-attach a\n   * previously detached subtree.\n   **/\n  @Output('attach') attachEvents = new EventEmitter<unknown>();\n  /**\n   * Emits a detached component instance when the `RouteReuseStrategy` instructs to detach the\n   * subtree.\n   */\n  @Output('detach') detachEvents = new EventEmitter<unknown>();\n\n  private parentContexts = inject(ChildrenOutletContexts);\n  private location = inject(ViewContainerRef);\n  private changeDetector = inject(ChangeDetectorRef);\n  private environmentInjector = inject(EnvironmentInjector);\n\n  /** @nodoc */\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['name']) {\n      const {firstChange, previousValue} = changes['name'];\n      if (firstChange) {\n        // The first change is handled by ngOnInit. Because ngOnChanges doesn't get called when no\n        // input is set at all, we need to centrally handle the first change there.\n        return;\n      }\n\n      // unregister with the old name\n      if (this.isTrackedInParentContexts(previousValue)) {\n        this.deactivate();\n        this.parentContexts.onChildOutletDestroyed(previousValue);\n      }\n      // register the new name\n      this.initializeOutletWithName();\n    }\n  }\n\n  /** @nodoc */\n  ngOnDestroy(): void {\n    // Ensure that the registered outlet is this one before removing it on the context.\n    if (this.isTrackedInParentContexts(this.name)) {\n      this.parentContexts.onChildOutletDestroyed(this.name);\n    }\n  }\n\n  private isTrackedInParentContexts(outletName: string) {\n    return this.parentContexts.getContext(outletName)?.outlet === this;\n  }\n\n  /** @nodoc */\n  ngOnInit(): void {\n    this.initializeOutletWithName();\n  }\n\n  private initializeOutletWithName() {\n    this.parentContexts.onChildOutletCreated(this.name, this);\n    if (this.activated) {\n      return;\n    }\n\n    // If the outlet was not instantiated at the time the route got activated we need to populate\n    // the outlet when it is initialized (ie inside a NgIf)\n    const context = this.parentContexts.getContext(this.name);\n    if (context?.route) {\n      if (context.attachRef) {\n        // `attachRef` is populated when there is an existing component to mount\n        this.attach(context.attachRef, context.route);\n      } else {\n        // otherwise the component defined in the configuration is created\n        this.activateWith(context.route, context.injector);\n      }\n    }\n  }\n\n  get isActivated(): boolean {\n    return !!this.activated;\n  }\n\n  /**\n   * @returns The currently activated component instance.\n   * @throws An error if the outlet is not activated.\n   */\n  get component(): Object {\n    if (!this.activated)\n      throw new RuntimeError(\n          RuntimeErrorCode.OUTLET_NOT_ACTIVATED, NG_DEV_MODE && 'Outlet is not activated');\n    return this.activated.instance;\n  }\n\n  get activatedRoute(): ActivatedRoute {\n    if (!this.activated)\n      throw new RuntimeError(\n          RuntimeErrorCode.OUTLET_NOT_ACTIVATED, NG_DEV_MODE && 'Outlet is not activated');\n    return this._activatedRoute as ActivatedRoute;\n  }\n\n  get activatedRouteData(): Data {\n    if (this._activatedRoute) {\n      return this._activatedRoute.snapshot.data;\n    }\n    return {};\n  }\n\n  /**\n   * Called when the `RouteReuseStrategy` instructs to detach the subtree\n   */\n  detach(): ComponentRef<any> {\n    if (!this.activated)\n      throw new RuntimeError(\n          RuntimeErrorCode.OUTLET_NOT_ACTIVATED, NG_DEV_MODE && 'Outlet is not activated');\n    this.location.detach();\n    const cmp = this.activated;\n    this.activated = null;\n    this._activatedRoute = null;\n    this.detachEvents.emit(cmp.instance);\n    return cmp;\n  }\n\n  /**\n   * Called when the `RouteReuseStrategy` instructs to re-attach a previously detached subtree\n   */\n  attach(ref: ComponentRef<any>, activatedRoute: ActivatedRoute) {\n    this.activated = ref;\n    this._activatedRoute = activatedRoute;\n    this.location.insert(ref.hostView);\n    this.attachEvents.emit(ref.instance);\n  }\n\n  deactivate(): void {\n    if (this.activated) {\n      const c = this.component;\n      this.activated.destroy();\n      this.activated = null;\n      this._activatedRoute = null;\n      this.deactivateEvents.emit(c);\n    }\n  }\n\n  activateWith(\n      activatedRoute: ActivatedRoute,\n      resolverOrInjector?: ComponentFactoryResolver|EnvironmentInjector|null) {\n    if (this.isActivated) {\n      throw new RuntimeError(\n          RuntimeErrorCode.OUTLET_ALREADY_ACTIVATED,\n          NG_DEV_MODE && 'Cannot activate an already activated outlet');\n    }\n    this._activatedRoute = activatedRoute;\n    const location = this.location;\n    const snapshot = activatedRoute.snapshot;\n    const component = snapshot.component!;\n    const childContexts = this.parentContexts.getOrCreateContext(this.name).children;\n    const injector = new OutletInjector(activatedRoute, childContexts, location.injector);\n\n    if (resolverOrInjector && isComponentFactoryResolver(resolverOrInjector)) {\n      const factory = resolverOrInjector.resolveComponentFactory(component);\n      this.activated = location.createComponent(factory, location.length, injector);\n    } else {\n      const environmentInjector = resolverOrInjector ?? this.environmentInjector;\n      this.activated = location.createComponent(\n          component, {index: location.length, injector, environmentInjector});\n    }\n    // Calling `markForCheck` to make sure we will run the change detection when the\n    // `RouterOutlet` is inside a `ChangeDetectionStrategy.OnPush` component.\n    this.changeDetector.markForCheck();\n    this.activateEvents.emit(this.activated.instance);\n  }\n}\n\nclass OutletInjector implements Injector {\n  constructor(\n      private route: ActivatedRoute, private childContexts: ChildrenOutletContexts,\n      private parent: Injector) {}\n\n  get(token: any, notFoundValue?: any): any {\n    if (token === ActivatedRoute) {\n      return this.route;\n    }\n\n    if (token === ChildrenOutletContexts) {\n      return this.childContexts;\n    }\n\n    return this.parent.get(token, notFoundValue);\n  }\n}\n\nfunction isComponentFactoryResolver(item: any): item is ComponentFactoryResolver {\n  return !!item.resolveComponentFactory;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Component} from '@angular/core';\n\nimport {RouterOutlet} from '../directives/router_outlet';\n\n/**\n * This component is used internally within the router to be a placeholder when an empty\n * router-outlet is needed. For example, with a config such as:\n *\n * `{path: 'parent', outlet: 'nav', children: [...]}`\n *\n * In order to render, there needs to be a component on this config, which will default\n * to this `EmptyOutletComponent`.\n */\n@Component({\n  template: `<router-outlet></router-outlet>`,\n  imports: [RouterOutlet],\n  standalone: true,\n})\nexport class ɵEmptyOutletComponent {\n}\n\nexport {ɵEmptyOutletComponent as EmptyOutletComponent};\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {createEnvironmentInjector, EnvironmentInjector, isStandalone, Type, ɵRuntimeError as RuntimeError} from '@angular/core';\n\nimport {EmptyOutletComponent} from '../components/empty_outlet';\nimport {RuntimeErrorCode} from '../errors';\nimport {Route, Routes} from '../models';\nimport {ActivatedRouteSnapshot} from '../router_state';\nimport {PRIMARY_OUTLET} from '../shared';\n\n/**\n * Creates an `EnvironmentInjector` if the `Route` has providers and one does not already exist\n * and returns the injector. Otherwise, if the `Route` does not have `providers`, returns the\n * `currentInjector`.\n *\n * @param route The route that might have providers\n * @param currentInjector The parent injector of the `Route`\n */\nexport function getOrCreateRouteInjectorIfNeeded(\n    route: Route, currentInjector: EnvironmentInjector) {\n  if (route.providers && !route._injector) {\n    route._injector =\n        createEnvironmentInjector(route.providers, currentInjector, `Route: ${route.path}`);\n  }\n  return route._injector ?? currentInjector;\n}\n\nexport function getLoadedRoutes(route: Route): Route[]|undefined {\n  return route._loadedRoutes;\n}\n\nexport function getLoadedInjector(route: Route): EnvironmentInjector|undefined {\n  return route._loadedInjector;\n}\nexport function getLoadedComponent(route: Route): Type<unknown>|undefined {\n  return route._loadedComponent;\n}\n\nexport function getProvidersInjector(route: Route): EnvironmentInjector|undefined {\n  return route._injector;\n}\n\nexport function validateConfig(\n    config: Routes, parentPath: string = '', requireStandaloneComponents = false): void {\n  // forEach doesn't iterate undefined values\n  for (let i = 0; i < config.length; i++) {\n    const route: Route = config[i];\n    const fullPath: string = getFullPath(parentPath, route);\n    validateNode(route, fullPath, requireStandaloneComponents);\n  }\n}\n\nexport function assertStandalone(fullPath: string, component: Type<unknown>|undefined) {\n  if (component && !isStandalone(component)) {\n    throw new RuntimeError(\n        RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n        `Invalid configuration of route '${fullPath}'. The component must be standalone.`);\n  }\n}\n\nfunction validateNode(route: Route, fullPath: string, requireStandaloneComponents: boolean): void {\n  if (typeof ngDevMode === 'undefined' || ngDevMode) {\n    if (!route) {\n      throw new RuntimeError(RuntimeErrorCode.INVALID_ROUTE_CONFIG, `\n      Invalid configuration of route '${fullPath}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);\n    }\n    if (Array.isArray(route)) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${fullPath}': Array cannot be specified`);\n    }\n    if (!route.redirectTo && !route.component && !route.loadComponent && !route.children &&\n        !route.loadChildren && (route.outlet && route.outlet !== PRIMARY_OUTLET)) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}': a componentless route without children or loadChildren cannot have a named outlet set`);\n    }\n    if (route.redirectTo && route.children) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}': redirectTo and children cannot be used together`);\n    }\n    if (route.redirectTo && route.loadChildren) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}': redirectTo and loadChildren cannot be used together`);\n    }\n    if (route.children && route.loadChildren) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}': children and loadChildren cannot be used together`);\n    }\n    if (route.redirectTo && (route.component || route.loadComponent)) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}': redirectTo and component/loadComponent cannot be used together`);\n    }\n    if (route.component && route.loadComponent) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}': component and loadComponent cannot be used together`);\n    }\n    if (route.redirectTo && route.canActivate) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}': redirectTo and canActivate cannot be used together. Redirects happen before activation ` +\n              `so canActivate will never be executed.`);\n    }\n    if (route.path && route.matcher) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${fullPath}': path and matcher cannot be used together`);\n    }\n    if (route.redirectTo === void 0 && !route.component && !route.loadComponent &&\n        !route.children && !route.loadChildren) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}'. One of the following must be provided: component, loadComponent, redirectTo, children or loadChildren`);\n    }\n    if (route.path === void 0 && route.matcher === void 0) {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${\n              fullPath}': routes must have either a path or a matcher specified`);\n    }\n    if (typeof route.path === 'string' && route.path.charAt(0) === '/') {\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '${fullPath}': path cannot start with a slash`);\n    }\n    if (route.path === '' && route.redirectTo !== void 0 && route.pathMatch === void 0) {\n      const exp =\n          `The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`;\n      throw new RuntimeError(\n          RuntimeErrorCode.INVALID_ROUTE_CONFIG,\n          `Invalid configuration of route '{path: \"${fullPath}\", redirectTo: \"${\n              route.redirectTo}\"}': please provide 'pathMatch'. ${exp}`);\n    }\n    if (requireStandaloneComponents) {\n      assertStandalone(fullPath, route.component);\n    }\n  }\n  if (route.children) {\n    validateConfig(route.children, fullPath, requireStandaloneComponents);\n  }\n}\n\nfunction getFullPath(parentPath: string, currentRoute: Route): string {\n  if (!currentRoute) {\n    return parentPath;\n  }\n  if (!parentPath && !currentRoute.path) {\n    return '';\n  } else if (parentPath && !currentRoute.path) {\n    return `${parentPath}/`;\n  } else if (!parentPath && currentRoute.path) {\n    return currentRoute.path;\n  } else {\n    return `${parentPath}/${currentRoute.path}`;\n  }\n}\n\n/**\n * Makes a copy of the config and adds any default required properties.\n */\nexport function standardizeConfig(r: Route): Route {\n  const children = r.children && r.children.map(standardizeConfig);\n  const c = children ? {...r, children} : {...r};\n  if ((!c.component && !c.loadComponent) && (children || c.loadChildren) &&\n      (c.outlet && c.outlet !== PRIMARY_OUTLET)) {\n    c.component = EmptyOutletComponent;\n  }\n  return c;\n}\n\n/** Returns the `route.outlet` or PRIMARY_OUTLET if none exists. */\nexport function getOutlet(route: Route): string {\n  return route.outlet || PRIMARY_OUTLET;\n}\n\n/**\n * Sorts the `routes` such that the ones with an outlet matching `outletName` come first.\n * The order of the configs is otherwise preserved.\n */\nexport function sortByMatchingOutlets(routes: Routes, outletName: string): Routes {\n  const sortedConfig = routes.filter(r => getOutlet(r) === outletName);\n  sortedConfig.push(...routes.filter(r => getOutlet(r) !== outletName));\n  return sortedConfig;\n}\n\n/**\n * Gets the first injector in the snapshot's parent tree.\n *\n * If the `Route` has a static list of providers, the returned injector will be the one created from\n * those. If it does not exist, the returned injector may come from the parents, which may be from a\n * loaded config or their static providers.\n *\n * Returns `null` if there is neither this nor any parents have a stored injector.\n *\n * Generally used for retrieving the injector to use for getting tokens for guards/resolvers and\n * also used for getting the correct injector to use for creating components.\n */\nexport function getClosestRouteInjector(snapshot: ActivatedRouteSnapshot): EnvironmentInjector|\n    null {\n  if (!snapshot) return null;\n\n  // If the current route has its own injector, which is created from the static providers on the\n  // route itself, we should use that. Otherwise, we start at the parent since we do not want to\n  // include the lazy loaded injector from this route.\n  if (snapshot.routeConfig?._injector) {\n    return snapshot.routeConfig._injector;\n  }\n\n  for (let s = snapshot.parent; s; s = s.parent) {\n    const route = s.routeConfig;\n    // Note that the order here is important. `_loadedInjector` stored on the route with\n    // `loadChildren: () => NgModule` so it applies to child routes with priority. The `_injector`\n    // is created from the static providers on that parent route, so it applies to the children as\n    // well, but only if there is no lazy loaded NgModuleRef injector.\n    if (route?._loadedInjector) return route._loadedInjector;\n    if (route?._injector) return route._injector;\n  }\n\n  return null;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ComponentFactoryResolver, EnvironmentInjector, NgModuleRef} from '@angular/core';\nimport {MonoTypeOperatorFunction} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nimport {ActivationEnd, ChildActivationEnd, Event} from '../events';\nimport {NavigationTransition} from '../navigation_transition';\nimport {DetachedRouteHandleInternal, RouteReuseStrategy} from '../route_reuse_strategy';\nimport {ChildrenOutletContexts} from '../router_outlet_context';\nimport {ActivatedRoute, advanceActivatedRoute, RouterState} from '../router_state';\nimport {forEach} from '../utils/collection';\nimport {getClosestRouteInjector} from '../utils/config';\nimport {nodeChildrenAsMap, TreeNode} from '../utils/tree';\n\nexport const activateRoutes =\n    (rootContexts: ChildrenOutletContexts, routeReuseStrategy: RouteReuseStrategy,\n     forwardEvent: (evt: Event) => void): MonoTypeOperatorFunction<NavigationTransition> =>\n        map(t => {\n          new ActivateRoutes(\n              routeReuseStrategy, t.targetRouterState!, t.currentRouterState, forwardEvent)\n              .activate(rootContexts);\n          return t;\n        });\n\nexport class ActivateRoutes {\n  constructor(\n      private routeReuseStrategy: RouteReuseStrategy, private futureState: RouterState,\n      private currState: RouterState, private forwardEvent: (evt: Event) => void) {}\n\n  activate(parentContexts: ChildrenOutletContexts): void {\n    const futureRoot = this.futureState._root;\n    const currRoot = this.currState ? this.currState._root : null;\n\n    this.deactivateChildRoutes(futureRoot, currRoot, parentContexts);\n    advanceActivatedRoute(this.futureState.root);\n    this.activateChildRoutes(futureRoot, currRoot, parentContexts);\n  }\n\n  // De-activate the child route that are not re-used for the future state\n  private deactivateChildRoutes(\n      futureNode: TreeNode<ActivatedRoute>, currNode: TreeNode<ActivatedRoute>|null,\n      contexts: ChildrenOutletContexts): void {\n    const children: {[outletName: string]: TreeNode<ActivatedRoute>} = nodeChildrenAsMap(currNode);\n\n    // Recurse on the routes active in the future state to de-activate deeper children\n    futureNode.children.forEach(futureChild => {\n      const childOutletName = futureChild.value.outlet;\n      this.deactivateRoutes(futureChild, children[childOutletName], contexts);\n      delete children[childOutletName];\n    });\n\n    // De-activate the routes that will not be re-used\n    forEach(children, (v: TreeNode<ActivatedRoute>, childName: string) => {\n      this.deactivateRouteAndItsChildren(v, contexts);\n    });\n  }\n\n  private deactivateRoutes(\n      futureNode: TreeNode<ActivatedRoute>, currNode: TreeNode<ActivatedRoute>,\n      parentContext: ChildrenOutletContexts): void {\n    const future = futureNode.value;\n    const curr = currNode ? currNode.value : null;\n\n    if (future === curr) {\n      // Reusing the node, check to see if the children need to be de-activated\n      if (future.component) {\n        // If we have a normal route, we need to go through an outlet.\n        const context = parentContext.getContext(future.outlet);\n        if (context) {\n          this.deactivateChildRoutes(futureNode, currNode, context.children);\n        }\n      } else {\n        // if we have a componentless route, we recurse but keep the same outlet map.\n        this.deactivateChildRoutes(futureNode, currNode, parentContext);\n      }\n    } else {\n      if (curr) {\n        // Deactivate the current route which will not be re-used\n        this.deactivateRouteAndItsChildren(currNode, parentContext);\n      }\n    }\n  }\n\n  private deactivateRouteAndItsChildren(\n      route: TreeNode<ActivatedRoute>, parentContexts: ChildrenOutletContexts): void {\n    // If there is no component, the Route is never attached to an outlet (because there is no\n    // component to attach).\n    if (route.value.component && this.routeReuseStrategy.shouldDetach(route.value.snapshot)) {\n      this.detachAndStoreRouteSubtree(route, parentContexts);\n    } else {\n      this.deactivateRouteAndOutlet(route, parentContexts);\n    }\n  }\n\n  private detachAndStoreRouteSubtree(\n      route: TreeNode<ActivatedRoute>, parentContexts: ChildrenOutletContexts): void {\n    const context = parentContexts.getContext(route.value.outlet);\n    const contexts = context && route.value.component ? context.children : parentContexts;\n    const children: {[outletName: string]: TreeNode<ActivatedRoute>} = nodeChildrenAsMap(route);\n\n    for (const childOutlet of Object.keys(children)) {\n      this.deactivateRouteAndItsChildren(children[childOutlet], contexts);\n    }\n\n    if (context && context.outlet) {\n      const componentRef = context.outlet.detach();\n      const contexts = context.children.onOutletDeactivated();\n      this.routeReuseStrategy.store(route.value.snapshot, {componentRef, route, contexts});\n    }\n  }\n\n  private deactivateRouteAndOutlet(\n      route: TreeNode<ActivatedRoute>, parentContexts: ChildrenOutletContexts): void {\n    const context = parentContexts.getContext(route.value.outlet);\n    // The context could be `null` if we are on a componentless route but there may still be\n    // children that need deactivating.\n    const contexts = context && route.value.component ? context.children : parentContexts;\n    const children: {[outletName: string]: TreeNode<ActivatedRoute>} = nodeChildrenAsMap(route);\n\n    for (const childOutlet of Object.keys(children)) {\n      this.deactivateRouteAndItsChildren(children[childOutlet], contexts);\n    }\n\n    if (context && context.outlet) {\n      // Destroy the component\n      context.outlet.deactivate();\n      // Destroy the contexts for all the outlets that were in the component\n      context.children.onOutletDeactivated();\n      // Clear the information about the attached component on the context but keep the reference to\n      // the outlet.\n      context.attachRef = null;\n      context.resolver = null;\n      context.route = null;\n    }\n  }\n\n  private activateChildRoutes(\n      futureNode: TreeNode<ActivatedRoute>, currNode: TreeNode<ActivatedRoute>|null,\n      contexts: ChildrenOutletContexts): void {\n    const children: {[outlet: string]: TreeNode<ActivatedRoute>} = nodeChildrenAsMap(currNode);\n    futureNode.children.forEach(c => {\n      this.activateRoutes(c, children[c.value.outlet], contexts);\n      this.forwardEvent(new ActivationEnd(c.value.snapshot));\n    });\n    if (futureNode.children.length) {\n      this.forwardEvent(new ChildActivationEnd(futureNode.value.snapshot));\n    }\n  }\n\n  private activateRoutes(\n      futureNode: TreeNode<ActivatedRoute>, currNode: TreeNode<ActivatedRoute>,\n      parentContexts: ChildrenOutletContexts): void {\n    const future = futureNode.value;\n    const curr = currNode ? currNode.value : null;\n\n    advanceActivatedRoute(future);\n\n    // reusing the node\n    if (future === curr) {\n      if (future.component) {\n        // If we have a normal route, we need to go through an outlet.\n        const context = parentContexts.getOrCreateContext(future.outlet);\n        this.activateChildRoutes(futureNode, currNode, context.children);\n      } else {\n        // if we have a componentless route, we recurse but keep the same outlet map.\n        this.activateChildRoutes(futureNode, currNode, parentContexts);\n      }\n    } else {\n      if (future.component) {\n        // if we have a normal route, we need to place the component into the outlet and recurse.\n        const context = parentContexts.getOrCreateContext(future.outlet);\n\n        if (this.routeReuseStrategy.shouldAttach(future.snapshot)) {\n          const stored =\n              (<DetachedRouteHandleInternal>this.routeReuseStrategy.retrieve(future.snapshot));\n          this.routeReuseStrategy.store(future.snapshot, null);\n          context.children.onOutletReAttached(stored.contexts);\n          context.attachRef = stored.componentRef;\n          context.route = stored.route.value;\n          if (context.outlet) {\n            // Attach right away when the outlet has already been instantiated\n            // Otherwise attach from `RouterOutlet.ngOnInit` when it is instantiated\n            context.outlet.attach(stored.componentRef, stored.route.value);\n          }\n\n          advanceActivatedRoute(stored.route.value);\n          this.activateChildRoutes(futureNode, null, context.children);\n        } else {\n          const injector = getClosestRouteInjector(future.snapshot);\n          const cmpFactoryResolver = injector?.get(ComponentFactoryResolver) ?? null;\n          context.attachRef = null;\n          context.route = future;\n          context.resolver = cmpFactoryResolver;\n          context.injector = injector;\n          if (context.outlet) {\n            // Activate the outlet when it has already been instantiated\n            // Otherwise it will get activated from its `ngOnInit` when instantiated\n            context.outlet.activateWith(future, context.injector);\n          }\n\n          this.activateChildRoutes(futureNode, null, context.children);\n        }\n      } else {\n        // if we have a componentless route, we recurse but keep the same outlet map.\n        this.activateChildRoutes(futureNode, null, parentContexts);\n      }\n    }\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injector, ProviderToken, ɵisInjectable as isInjectable} from '@angular/core';\n\nimport {RunGuardsAndResolvers} from '../models';\nimport {ChildrenOutletContexts, OutletContext} from '../router_outlet_context';\nimport {ActivatedRouteSnapshot, equalParamsAndUrlSegments, RouterStateSnapshot} from '../router_state';\nimport {equalPath} from '../url_tree';\nimport {forEach, shallowEqual} from '../utils/collection';\nimport {nodeChildrenAsMap, TreeNode} from '../utils/tree';\n\nexport class CanActivate {\n  readonly route: ActivatedRouteSnapshot;\n  constructor(public path: ActivatedRouteSnapshot[]) {\n    this.route = this.path[this.path.length - 1];\n  }\n}\n\nexport class CanDeactivate {\n  constructor(public component: Object|null, public route: ActivatedRouteSnapshot) {}\n}\n\nexport declare type Checks = {\n  canDeactivateChecks: CanDeactivate[],\n  canActivateChecks: CanActivate[],\n};\n\nexport function getAllRouteGuards(\n    future: RouterStateSnapshot, curr: RouterStateSnapshot,\n    parentContexts: ChildrenOutletContexts) {\n  const futureRoot = future._root;\n  const currRoot = curr ? curr._root : null;\n\n  return getChildRouteGuards(futureRoot, currRoot, parentContexts, [futureRoot.value]);\n}\n\nexport function getCanActivateChild(p: ActivatedRouteSnapshot):\n    {node: ActivatedRouteSnapshot, guards: any[]}|null {\n  const canActivateChild = p.routeConfig ? p.routeConfig.canActivateChild : null;\n  if (!canActivateChild || canActivateChild.length === 0) return null;\n  return {node: p, guards: canActivateChild};\n}\n\nexport function getTokenOrFunctionIdentity<T>(\n    tokenOrFunction: Function|ProviderToken<T>, injector: Injector): Function|T {\n  const NOT_FOUND = Symbol();\n  const result = injector.get<T|Symbol>(tokenOrFunction, NOT_FOUND);\n  if (result === NOT_FOUND) {\n    if (typeof tokenOrFunction === 'function' && !isInjectable(tokenOrFunction)) {\n      // We think the token is just a function so return it as-is\n      return tokenOrFunction;\n    } else {\n      // This will throw the not found error\n      return injector.get<T>(tokenOrFunction);\n    }\n  }\n  return result as T;\n}\n\nfunction getChildRouteGuards(\n    futureNode: TreeNode<ActivatedRouteSnapshot>, currNode: TreeNode<ActivatedRouteSnapshot>|null,\n    contexts: ChildrenOutletContexts|null, futurePath: ActivatedRouteSnapshot[], checks: Checks = {\n      canDeactivateChecks: [],\n      canActivateChecks: []\n    }): Checks {\n  const prevChildren = nodeChildrenAsMap(currNode);\n\n  // Process the children of the future route\n  futureNode.children.forEach(c => {\n    getRouteGuards(c, prevChildren[c.value.outlet], contexts, futurePath.concat([c.value]), checks);\n    delete prevChildren[c.value.outlet];\n  });\n\n  // Process any children left from the current route (not active for the future route)\n  forEach(\n      prevChildren,\n      (v: TreeNode<ActivatedRouteSnapshot>, k: string) =>\n          deactivateRouteAndItsChildren(v, contexts!.getContext(k), checks));\n\n  return checks;\n}\n\nfunction getRouteGuards(\n    futureNode: TreeNode<ActivatedRouteSnapshot>, currNode: TreeNode<ActivatedRouteSnapshot>,\n    parentContexts: ChildrenOutletContexts|null, futurePath: ActivatedRouteSnapshot[],\n    checks: Checks = {\n      canDeactivateChecks: [],\n      canActivateChecks: []\n    }): Checks {\n  const future = futureNode.value;\n  const curr = currNode ? currNode.value : null;\n  const context = parentContexts ? parentContexts.getContext(futureNode.value.outlet) : null;\n\n  // reusing the node\n  if (curr && future.routeConfig === curr.routeConfig) {\n    const shouldRun =\n        shouldRunGuardsAndResolvers(curr, future, future.routeConfig!.runGuardsAndResolvers);\n    if (shouldRun) {\n      checks.canActivateChecks.push(new CanActivate(futurePath));\n    } else {\n      // we need to set the data\n      future.data = curr.data;\n      future._resolvedData = curr._resolvedData;\n    }\n\n    // If we have a component, we need to go through an outlet.\n    if (future.component) {\n      getChildRouteGuards(\n          futureNode, currNode, context ? context.children : null, futurePath, checks);\n\n      // if we have a componentless route, we recurse but keep the same outlet map.\n    } else {\n      getChildRouteGuards(futureNode, currNode, parentContexts, futurePath, checks);\n    }\n\n    if (shouldRun && context && context.outlet && context.outlet.isActivated) {\n      checks.canDeactivateChecks.push(new CanDeactivate(context.outlet.component, curr));\n    }\n  } else {\n    if (curr) {\n      deactivateRouteAndItsChildren(currNode, context, checks);\n    }\n\n    checks.canActivateChecks.push(new CanActivate(futurePath));\n    // If we have a component, we need to go through an outlet.\n    if (future.component) {\n      getChildRouteGuards(futureNode, null, context ? context.children : null, futurePath, checks);\n\n      // if we have a componentless route, we recurse but keep the same outlet map.\n    } else {\n      getChildRouteGuards(futureNode, null, parentContexts, futurePath, checks);\n    }\n  }\n\n  return checks;\n}\n\nfunction shouldRunGuardsAndResolvers(\n    curr: ActivatedRouteSnapshot, future: ActivatedRouteSnapshot,\n    mode: RunGuardsAndResolvers|undefined): boolean {\n  if (typeof mode === 'function') {\n    return mode(curr, future);\n  }\n  switch (mode) {\n    case 'pathParamsChange':\n      return !equalPath(curr.url, future.url);\n\n    case 'pathParamsOrQueryParamsChange':\n      return !equalPath(curr.url, future.url) ||\n          !shallowEqual(curr.queryParams, future.queryParams);\n\n    case 'always':\n      return true;\n\n    case 'paramsOrQueryParamsChange':\n      return !equalParamsAndUrlSegments(curr, future) ||\n          !shallowEqual(curr.queryParams, future.queryParams);\n\n    case 'paramsChange':\n    default:\n      return !equalParamsAndUrlSegments(curr, future);\n  }\n}\n\nfunction deactivateRouteAndItsChildren(\n    route: TreeNode<ActivatedRouteSnapshot>, context: OutletContext|null, checks: Checks): void {\n  const children = nodeChildrenAsMap(route);\n  const r = route.value;\n\n  forEach(children, (node: TreeNode<ActivatedRouteSnapshot>, childName: string) => {\n    if (!r.component) {\n      deactivateRouteAndItsChildren(node, context, checks);\n    } else if (context) {\n      deactivateRouteAndItsChildren(node, context.children.getContext(childName), checks);\n    } else {\n      deactivateRouteAndItsChildren(node, null, checks);\n    }\n  });\n\n  if (!r.component) {\n    checks.canDeactivateChecks.push(new CanDeactivate(null, r));\n  } else if (context && context.outlet && context.outlet.isActivated) {\n    checks.canDeactivateChecks.push(new CanDeactivate(context.outlet.component, r));\n  } else {\n    checks.canDeactivateChecks.push(new CanDeactivate(null, r));\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EmptyError} from 'rxjs';\n\nimport {CanActivate, CanActivateChild, CanDeactivate, CanLoad, CanMatch} from '../models';\nimport {NAVIGATION_CANCELING_ERROR, NavigationCancelingError, RedirectingNavigationCancelingError} from '../navigation_canceling_error';\nimport {isUrlTree} from '../url_tree';\n\n/**\n * Simple function check, but generic so type inference will flow. Example:\n *\n * function product(a: number, b: number) {\n *   return a * b;\n * }\n *\n * if (isFunction<product>(fn)) {\n *   return fn(1, 2);\n * } else {\n *   throw \"Must provide the `product` function\";\n * }\n */\nexport function isFunction<T>(v: any): v is T {\n  return typeof v === 'function';\n}\n\nexport function isBoolean(v: any): v is boolean {\n  return typeof v === 'boolean';\n}\n\nexport function isCanLoad(guard: any): guard is CanLoad {\n  return guard && isFunction<CanLoad>(guard.canLoad);\n}\n\nexport function isCanActivate(guard: any): guard is CanActivate {\n  return guard && isFunction<CanActivate>(guard.canActivate);\n}\n\nexport function isCanActivateChild(guard: any): guard is CanActivateChild {\n  return guard && isFunction<CanActivateChild>(guard.canActivateChild);\n}\n\nexport function isCanDeactivate<T>(guard: any): guard is CanDeactivate<T> {\n  return guard && isFunction<CanDeactivate<T>>(guard.canDeactivate);\n}\nexport function isCanMatch(guard: any): guard is CanMatch {\n  return guard && isFunction<CanMatch>(guard.canMatch);\n}\n\nexport function isRedirectingNavigationCancelingError(\n    error: unknown|\n    RedirectingNavigationCancelingError): error is RedirectingNavigationCancelingError {\n  return isNavigationCancelingError(error) && isUrlTree((error as any).url);\n}\n\nexport function isNavigationCancelingError(error: unknown): error is NavigationCancelingError {\n  return error && (error as any)[NAVIGATION_CANCELING_ERROR];\n}\n\nexport function isEmptyError(e: Error): e is EmptyError {\n  return e instanceof EmptyError || e?.name === 'EmptyError';\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {combineLatest, Observable, OperatorFunction} from 'rxjs';\nimport {filter, map, scan, startWith, switchMap, take} from 'rxjs/operators';\n\nimport {isUrlTree, UrlTree} from '../url_tree';\n\nconst INITIAL_VALUE = Symbol('INITIAL_VALUE');\ndeclare type INTERIM_VALUES = typeof INITIAL_VALUE | boolean | UrlTree;\n\nexport function prioritizedGuardValue():\n    OperatorFunction<Observable<boolean|UrlTree>[], boolean|UrlTree> {\n  return switchMap(obs => {\n    return combineLatest(obs.map(o => o.pipe(take(1), startWith(INITIAL_VALUE as INTERIM_VALUES))))\n        .pipe(\n            map((results: INTERIM_VALUES[]) => {\n              for (const result of results) {\n                if (result === true) {\n                  // If result is true, check the next one\n                  continue;\n                } else if (result === INITIAL_VALUE) {\n                  // If guard has not finished, we need to stop processing.\n                  return INITIAL_VALUE;\n                } else if (result === false || result instanceof UrlTree) {\n                  // Result finished and was not true. Return the result.\n                  // Note that we only allow false/UrlTree. Other values are considered invalid and\n                  // ignored.\n                  return result;\n                }\n              }\n              // Everything resolved to true. Return true.\n              return true;\n            }),\n            filter((item): item is boolean|UrlTree => item !== INITIAL_VALUE),\n            take(1),\n        );\n  });\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EnvironmentInjector, ProviderToken} from '@angular/core';\nimport {concat, defer, from, MonoTypeOperatorFunction, Observable, of, OperatorFunction, pipe} from 'rxjs';\nimport {concatMap, first, map, mergeMap, tap} from 'rxjs/operators';\n\nimport {ActivationStart, ChildActivationStart, Event} from '../events';\nimport {CanActivateChild, CanActivateChildFn, CanActivateFn, Route} from '../models';\nimport {redirectingNavigationError} from '../navigation_canceling_error';\nimport {NavigationTransition} from '../navigation_transition';\nimport {ActivatedRouteSnapshot, RouterStateSnapshot} from '../router_state';\nimport {isUrlTree, UrlSegment, UrlSerializer, UrlTree} from '../url_tree';\nimport {wrapIntoObservable} from '../utils/collection';\nimport {getClosestRouteInjector} from '../utils/config';\nimport {CanActivate, CanDeactivate, getCanActivateChild, getTokenOrFunctionIdentity} from '../utils/preactivation';\nimport {isBoolean, isCanActivate, isCanActivateChild, isCanDeactivate, isCanLoad, isCanMatch} from '../utils/type_guards';\n\nimport {prioritizedGuardValue} from './prioritized_guard_value';\n\nexport function checkGuards(injector: EnvironmentInjector, forwardEvent?: (evt: Event) => void):\n    MonoTypeOperatorFunction<NavigationTransition> {\n  return mergeMap(t => {\n    const {targetSnapshot, currentSnapshot, guards: {canActivateChecks, canDeactivateChecks}} = t;\n    if (canDeactivateChecks.length === 0 && canActivateChecks.length === 0) {\n      return of({...t, guardsResult: true});\n    }\n\n    return runCanDeactivateChecks(canDeactivateChecks, targetSnapshot!, currentSnapshot, injector)\n        .pipe(\n            mergeMap(canDeactivate => {\n              return canDeactivate && isBoolean(canDeactivate) ?\n                  runCanActivateChecks(targetSnapshot!, canActivateChecks, injector, forwardEvent) :\n                  of(canDeactivate);\n            }),\n            map(guardsResult => ({...t, guardsResult})));\n  });\n}\n\nfunction runCanDeactivateChecks(\n    checks: CanDeactivate[], futureRSS: RouterStateSnapshot, currRSS: RouterStateSnapshot,\n    injector: EnvironmentInjector) {\n  return from(checks).pipe(\n      mergeMap(\n          check => runCanDeactivate(check.component, check.route, currRSS, futureRSS, injector)),\n      first(result => {\n        return result !== true;\n      }, true as boolean | UrlTree));\n}\n\nfunction runCanActivateChecks(\n    futureSnapshot: RouterStateSnapshot, checks: CanActivate[], injector: EnvironmentInjector,\n    forwardEvent?: (evt: Event) => void) {\n  return from(checks).pipe(\n      concatMap((check: CanActivate) => {\n        return concat(\n            fireChildActivationStart(check.route.parent, forwardEvent),\n            fireActivationStart(check.route, forwardEvent),\n            runCanActivateChild(futureSnapshot, check.path, injector),\n            runCanActivate(futureSnapshot, check.route, injector));\n      }),\n      first(result => {\n        return result !== true;\n      }, true as boolean | UrlTree));\n}\n\n/**\n * This should fire off `ActivationStart` events for each route being activated at this\n * level.\n * In other words, if you're activating `a` and `b` below, `path` will contain the\n * `ActivatedRouteSnapshot`s for both and we will fire `ActivationStart` for both. Always\n * return\n * `true` so checks continue to run.\n */\nfunction fireActivationStart(\n    snapshot: ActivatedRouteSnapshot|null,\n    forwardEvent?: (evt: Event) => void): Observable<boolean> {\n  if (snapshot !== null && forwardEvent) {\n    forwardEvent(new ActivationStart(snapshot));\n  }\n  return of(true);\n}\n\n/**\n * This should fire off `ChildActivationStart` events for each route being activated at this\n * level.\n * In other words, if you're activating `a` and `b` below, `path` will contain the\n * `ActivatedRouteSnapshot`s for both and we will fire `ChildActivationStart` for both. Always\n * return\n * `true` so checks continue to run.\n */\nfunction fireChildActivationStart(\n    snapshot: ActivatedRouteSnapshot|null,\n    forwardEvent?: (evt: Event) => void): Observable<boolean> {\n  if (snapshot !== null && forwardEvent) {\n    forwardEvent(new ChildActivationStart(snapshot));\n  }\n  return of(true);\n}\n\nfunction runCanActivate(\n    futureRSS: RouterStateSnapshot, futureARS: ActivatedRouteSnapshot,\n    injector: EnvironmentInjector): Observable<boolean|UrlTree> {\n  const canActivate = futureARS.routeConfig ? futureARS.routeConfig.canActivate : null;\n  if (!canActivate || canActivate.length === 0) return of(true);\n\n  const canActivateObservables =\n      canActivate.map((canActivate: CanActivateFn|ProviderToken<unknown>) => {\n        return defer(() => {\n          const closestInjector = getClosestRouteInjector(futureARS) ?? injector;\n          const guard = getTokenOrFunctionIdentity<CanActivate>(canActivate, closestInjector);\n          const guardVal = isCanActivate(guard) ?\n              guard.canActivate(futureARS, futureRSS) :\n              closestInjector.runInContext(() => (guard as CanActivateFn)(futureARS, futureRSS));\n          return wrapIntoObservable(guardVal).pipe(first());\n        });\n      });\n  return of(canActivateObservables).pipe(prioritizedGuardValue());\n}\n\nfunction runCanActivateChild(\n    futureRSS: RouterStateSnapshot, path: ActivatedRouteSnapshot[],\n    injector: EnvironmentInjector): Observable<boolean|UrlTree> {\n  const futureARS = path[path.length - 1];\n\n  const canActivateChildGuards = path.slice(0, path.length - 1)\n                                     .reverse()\n                                     .map(p => getCanActivateChild(p))\n                                     .filter(_ => _ !== null);\n\n  const canActivateChildGuardsMapped = canActivateChildGuards.map((d: any) => {\n    return defer(() => {\n      const guardsMapped =\n          d.guards.map((canActivateChild: CanActivateChildFn|ProviderToken<unknown>) => {\n            const closestInjector = getClosestRouteInjector(d.node) ?? injector;\n            const guard =\n                getTokenOrFunctionIdentity<CanActivateChild>(canActivateChild, closestInjector);\n            const guardVal = isCanActivateChild(guard) ?\n                guard.canActivateChild(futureARS, futureRSS) :\n                closestInjector.runInContext(() => guard(futureARS, futureRSS));\n            return wrapIntoObservable(guardVal).pipe(first());\n          });\n      return of(guardsMapped).pipe(prioritizedGuardValue());\n    });\n  });\n  return of(canActivateChildGuardsMapped).pipe(prioritizedGuardValue());\n}\n\nfunction runCanDeactivate(\n    component: Object|null, currARS: ActivatedRouteSnapshot, currRSS: RouterStateSnapshot,\n    futureRSS: RouterStateSnapshot, injector: EnvironmentInjector): Observable<boolean|UrlTree> {\n  const canDeactivate = currARS && currARS.routeConfig ? currARS.routeConfig.canDeactivate : null;\n  if (!canDeactivate || canDeactivate.length === 0) return of(true);\n  const canDeactivateObservables = canDeactivate.map((c: any) => {\n    const closestInjector = getClosestRouteInjector(currARS) ?? injector;\n    const guard = getTokenOrFunctionIdentity<any>(c, closestInjector);\n    const guardVal = isCanDeactivate(guard) ?\n        guard.canDeactivate(component, currARS, currRSS, futureRSS) :\n        closestInjector.runInContext<boolean|UrlTree>(\n            () => guard(component, currARS, currRSS, futureRSS));\n    return wrapIntoObservable(guardVal).pipe(first());\n  });\n  return of(canDeactivateObservables).pipe(prioritizedGuardValue());\n}\n\nexport function runCanLoadGuards(\n    injector: EnvironmentInjector, route: Route, segments: UrlSegment[],\n    urlSerializer: UrlSerializer): Observable<boolean> {\n  const canLoad = route.canLoad;\n  if (canLoad === undefined || canLoad.length === 0) {\n    return of(true);\n  }\n\n  const canLoadObservables = canLoad.map((injectionToken: any) => {\n    const guard = getTokenOrFunctionIdentity<any>(injectionToken, injector);\n    const guardVal = isCanLoad(guard) ?\n        guard.canLoad(route, segments) :\n        injector.runInContext<boolean|UrlTree>(() => guard(route, segments));\n    return wrapIntoObservable(guardVal);\n  });\n\n  return of(canLoadObservables)\n      .pipe(\n          prioritizedGuardValue(),\n          redirectIfUrlTree(urlSerializer),\n      );\n}\n\nfunction redirectIfUrlTree(urlSerializer: UrlSerializer):\n    OperatorFunction<UrlTree|boolean, boolean> {\n  return pipe(\n      tap((result: UrlTree|boolean) => {\n        if (!isUrlTree(result)) return;\n\n        throw redirectingNavigationError(urlSerializer, result);\n      }),\n      map(result => result === true),\n  );\n}\n\nexport function runCanMatchGuards(\n    injector: EnvironmentInjector, route: Route, segments: UrlSegment[],\n    urlSerializer: UrlSerializer): Observable<boolean> {\n  const canMatch = route.canMatch;\n  if (!canMatch || canMatch.length === 0) return of(true);\n\n  const canMatchObservables = canMatch.map(injectionToken => {\n    const guard = getTokenOrFunctionIdentity(injectionToken, injector);\n    const guardVal = isCanMatch(guard) ?\n        guard.canMatch(route, segments) :\n        injector.runInContext<boolean|UrlTree>(() => guard(route, segments));\n    return wrapIntoObservable(guardVal);\n  });\n\n  return of(canMatchObservables)\n      .pipe(\n          prioritizedGuardValue(),\n          redirectIfUrlTree(urlSerializer),\n      );\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EnvironmentInjector, Injector} from '@angular/core';\nimport {Observable, of} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nimport {Route} from '../models';\nimport {runCanMatchGuards} from '../operators/check_guards';\nimport {defaultUrlMatcher, PRIMARY_OUTLET} from '../shared';\nimport {UrlSegment, UrlSegmentGroup, UrlSerializer} from '../url_tree';\n\nimport {forEach} from './collection';\nimport {getOrCreateRouteInjectorIfNeeded, getOutlet} from './config';\n\nexport interface MatchResult {\n  matched: boolean;\n  consumedSegments: UrlSegment[];\n  remainingSegments: UrlSegment[];\n  parameters: {[k: string]: string};\n  positionalParamSegments: {[k: string]: UrlSegment};\n}\n\nconst noMatch: MatchResult = {\n  matched: false,\n  consumedSegments: [],\n  remainingSegments: [],\n  parameters: {},\n  positionalParamSegments: {}\n};\n\nexport function matchWithChecks(\n    segmentGroup: UrlSegmentGroup, route: Route, segments: UrlSegment[],\n    injector: EnvironmentInjector, urlSerializer: UrlSerializer): Observable<MatchResult> {\n  const result = match(segmentGroup, route, segments);\n  if (!result.matched) {\n    return of(result);\n  }\n\n  // Only create the Route's `EnvironmentInjector` if it matches the attempted\n  // navigation\n  injector = getOrCreateRouteInjectorIfNeeded(route, injector);\n  return runCanMatchGuards(injector, route, segments, urlSerializer)\n      .pipe(\n          map((v) => v === true ? result : {...noMatch}),\n      );\n}\n\nexport function match(\n    segmentGroup: UrlSegmentGroup, route: Route, segments: UrlSegment[]): MatchResult {\n  if (route.path === '') {\n    if (route.pathMatch === 'full' && (segmentGroup.hasChildren() || segments.length > 0)) {\n      return {...noMatch};\n    }\n\n    return {\n      matched: true,\n      consumedSegments: [],\n      remainingSegments: segments,\n      parameters: {},\n      positionalParamSegments: {}\n    };\n  }\n\n  const matcher = route.matcher || defaultUrlMatcher;\n  const res = matcher(segments, segmentGroup, route);\n  if (!res) return {...noMatch};\n\n  const posParams: {[n: string]: string} = {};\n  forEach(res.posParams!, (v: UrlSegment, k: string) => {\n    posParams[k] = v.path;\n  });\n  const parameters = res.consumed.length > 0 ?\n      {...posParams, ...res.consumed[res.consumed.length - 1].parameters} :\n      posParams;\n\n  return {\n    matched: true,\n    consumedSegments: res.consumed,\n    remainingSegments: segments.slice(res.consumed.length),\n    // TODO(atscott): investigate combining parameters and positionalParamSegments\n    parameters,\n    positionalParamSegments: res.posParams ?? {}\n  };\n}\n\nexport function split(\n    segmentGroup: UrlSegmentGroup, consumedSegments: UrlSegment[], slicedSegments: UrlSegment[],\n    config: Route[]) {\n  if (slicedSegments.length > 0 &&\n      containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, config)) {\n    const s = new UrlSegmentGroup(\n        consumedSegments,\n        createChildrenForEmptyPaths(\n            segmentGroup, consumedSegments, config,\n            new UrlSegmentGroup(slicedSegments, segmentGroup.children)));\n    s._sourceSegment = segmentGroup;\n    s._segmentIndexShift = consumedSegments.length;\n    return {segmentGroup: s, slicedSegments: []};\n  }\n\n  if (slicedSegments.length === 0 &&\n      containsEmptyPathMatches(segmentGroup, slicedSegments, config)) {\n    const s = new UrlSegmentGroup(\n        segmentGroup.segments,\n        addEmptyPathsToChildrenIfNeeded(\n            segmentGroup, consumedSegments, slicedSegments, config, segmentGroup.children));\n    s._sourceSegment = segmentGroup;\n    s._segmentIndexShift = consumedSegments.length;\n    return {segmentGroup: s, slicedSegments};\n  }\n\n  const s = new UrlSegmentGroup(segmentGroup.segments, segmentGroup.children);\n  s._sourceSegment = segmentGroup;\n  s._segmentIndexShift = consumedSegments.length;\n  return {segmentGroup: s, slicedSegments};\n}\n\nfunction addEmptyPathsToChildrenIfNeeded(\n    segmentGroup: UrlSegmentGroup, consumedSegments: UrlSegment[], slicedSegments: UrlSegment[],\n    routes: Route[],\n    children: {[name: string]: UrlSegmentGroup}): {[name: string]: UrlSegmentGroup} {\n  const res: {[name: string]: UrlSegmentGroup} = {};\n  for (const r of routes) {\n    if (emptyPathMatch(segmentGroup, slicedSegments, r) && !children[getOutlet(r)]) {\n      const s = new UrlSegmentGroup([], {});\n      s._sourceSegment = segmentGroup;\n      s._segmentIndexShift = consumedSegments.length;\n      res[getOutlet(r)] = s;\n    }\n  }\n  return {...children, ...res};\n}\n\nfunction createChildrenForEmptyPaths(\n    segmentGroup: UrlSegmentGroup, consumedSegments: UrlSegment[], routes: Route[],\n    primarySegment: UrlSegmentGroup): {[name: string]: UrlSegmentGroup} {\n  const res: {[name: string]: UrlSegmentGroup} = {};\n  res[PRIMARY_OUTLET] = primarySegment;\n  primarySegment._sourceSegment = segmentGroup;\n  primarySegment._segmentIndexShift = consumedSegments.length;\n\n  for (const r of routes) {\n    if (r.path === '' && getOutlet(r) !== PRIMARY_OUTLET) {\n      const s = new UrlSegmentGroup([], {});\n      s._sourceSegment = segmentGroup;\n      s._segmentIndexShift = consumedSegments.length;\n      res[getOutlet(r)] = s;\n    }\n  }\n  return res;\n}\n\nfunction containsEmptyPathMatchesWithNamedOutlets(\n    segmentGroup: UrlSegmentGroup, slicedSegments: UrlSegment[], routes: Route[]): boolean {\n  return routes.some(\n      r => emptyPathMatch(segmentGroup, slicedSegments, r) && getOutlet(r) !== PRIMARY_OUTLET);\n}\n\nfunction containsEmptyPathMatches(\n    segmentGroup: UrlSegmentGroup, slicedSegments: UrlSegment[], routes: Route[]): boolean {\n  return routes.some(r => emptyPathMatch(segmentGroup, slicedSegments, r));\n}\n\nfunction emptyPathMatch(\n    segmentGroup: UrlSegmentGroup, slicedSegments: UrlSegment[], r: Route): boolean {\n  if ((segmentGroup.hasChildren() || slicedSegments.length > 0) && r.pathMatch === 'full') {\n    return false;\n  }\n\n  return r.path === '';\n}\n\n/**\n * Determines if `route` is a path match for the `rawSegment`, `segments`, and `outlet` without\n * verifying that its children are a full match for the remainder of the `rawSegment` children as\n * well.\n */\nexport function isImmediateMatch(\n    route: Route, rawSegment: UrlSegmentGroup, segments: UrlSegment[], outlet: string): boolean {\n  // We allow matches to empty paths when the outlets differ so we can match a url like `/(b:b)` to\n  // a config like\n  // * `{path: '', children: [{path: 'b', outlet: 'b'}]}`\n  // or even\n  // * `{path: '', outlet: 'a', children: [{path: 'b', outlet: 'b'}]`\n  //\n  // The exception here is when the segment outlet is for the primary outlet. This would\n  // result in a match inside the named outlet because all children there are written as primary\n  // outlets. So we need to prevent child named outlet matches in a url like `/b` in a config like\n  // * `{path: '', outlet: 'x' children: [{path: 'b'}]}`\n  // This should only match if the url is `/(x:b)`.\n  if (getOutlet(route) !== outlet &&\n      (outlet === PRIMARY_OUTLET || !emptyPathMatch(rawSegment, segments, route))) {\n    return false;\n  }\n  if (route.path === '**') {\n    return true;\n  }\n  return match(rawSegment, route, segments).matched;\n}\n\nexport function noLeftoversInUrl(\n    segmentGroup: UrlSegmentGroup, segments: UrlSegment[], outlet: string): boolean {\n  return segments.length === 0 && !segmentGroup.children[outlet];\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EnvironmentInjector, ɵRuntimeError as RuntimeError} from '@angular/core';\nimport {from, Observable, of, throwError} from 'rxjs';\nimport {catchError, concatMap, first, last, map, mergeMap, scan, switchMap, tap} from 'rxjs/operators';\n\nimport {RuntimeErrorCode} from './errors';\nimport {NavigationCancellationCode} from './events';\nimport {LoadedRouterConfig, Route, Routes} from './models';\nimport {navigationCancelingError} from './navigation_canceling_error';\nimport {runCanLoadGuards} from './operators/check_guards';\nimport {RouterConfigLoader} from './router_config_loader';\nimport {Params, PRIMARY_OUTLET} from './shared';\nimport {createRoot, squashSegmentGroup, UrlSegment, UrlSegmentGroup, UrlSerializer, UrlTree} from './url_tree';\nimport {forEach} from './utils/collection';\nimport {getOrCreateRouteInjectorIfNeeded, getOutlet, sortByMatchingOutlets} from './utils/config';\nimport {isImmediateMatch, match, matchWithChecks, noLeftoversInUrl, split} from './utils/config_matching';\nimport {isEmptyError} from './utils/type_guards';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || ngDevMode;\n\nclass NoMatch {\n  public segmentGroup: UrlSegmentGroup|null;\n\n  constructor(segmentGroup?: UrlSegmentGroup) {\n    this.segmentGroup = segmentGroup || null;\n  }\n}\n\nclass AbsoluteRedirect {\n  constructor(public urlTree: UrlTree) {}\n}\n\nfunction noMatch(segmentGroup: UrlSegmentGroup): Observable<UrlSegmentGroup> {\n  return throwError(new NoMatch(segmentGroup));\n}\n\nfunction absoluteRedirect(newTree: UrlTree): Observable<any> {\n  return throwError(new AbsoluteRedirect(newTree));\n}\n\nfunction namedOutletsRedirect(redirectTo: string): Observable<any> {\n  return throwError(new RuntimeError(\n      RuntimeErrorCode.NAMED_OUTLET_REDIRECT,\n      NG_DEV_MODE &&\n          `Only absolute redirects can have named outlets. redirectTo: '${redirectTo}'`));\n}\n\nfunction canLoadFails(route: Route): Observable<LoadedRouterConfig> {\n  return throwError(navigationCancelingError(\n      NG_DEV_MODE &&\n          `Cannot load children because the guard of the route \"path: '${\n              route.path}'\" returned false`,\n      NavigationCancellationCode.GuardRejected));\n}\n\n/**\n * Returns the `UrlTree` with the redirection applied.\n *\n * Lazy modules are loaded along the way.\n */\nexport function applyRedirects(\n    injector: EnvironmentInjector, configLoader: RouterConfigLoader, urlSerializer: UrlSerializer,\n    urlTree: UrlTree, config: Routes): Observable<UrlTree> {\n  return new ApplyRedirects(injector, configLoader, urlSerializer, urlTree, config).apply();\n}\n\nclass ApplyRedirects {\n  private allowRedirects: boolean = true;\n\n  constructor(\n      private injector: EnvironmentInjector, private configLoader: RouterConfigLoader,\n      private urlSerializer: UrlSerializer, private urlTree: UrlTree, private config: Routes) {}\n\n  apply(): Observable<UrlTree> {\n    const splitGroup = split(this.urlTree.root, [], [], this.config).segmentGroup;\n    // TODO(atscott): creating a new segment removes the _sourceSegment _segmentIndexShift, which is\n    // only necessary to prevent failures in tests which assert exact object matches. The `split` is\n    // now shared between `applyRedirects` and `recognize` but only the `recognize` step needs these\n    // properties. Before the implementations were merged, the `applyRedirects` would not assign\n    // them. We should be able to remove this logic as a \"breaking change\" but should do some more\n    // investigation into the failures first.\n    const rootSegmentGroup = new UrlSegmentGroup(splitGroup.segments, splitGroup.children);\n\n    const expanded$ =\n        this.expandSegmentGroup(this.injector, this.config, rootSegmentGroup, PRIMARY_OUTLET);\n    const urlTrees$ = expanded$.pipe(map((rootSegmentGroup: UrlSegmentGroup) => {\n      return this.createUrlTree(\n          squashSegmentGroup(rootSegmentGroup), this.urlTree.queryParams, this.urlTree.fragment);\n    }));\n    return urlTrees$.pipe(catchError((e: any) => {\n      if (e instanceof AbsoluteRedirect) {\n        // After an absolute redirect we do not apply any more redirects!\n        // If this implementation changes, update the documentation note in `redirectTo`.\n        this.allowRedirects = false;\n        // we need to run matching, so we can fetch all lazy-loaded modules\n        return this.match(e.urlTree);\n      }\n\n      if (e instanceof NoMatch) {\n        throw this.noMatchError(e);\n      }\n\n      throw e;\n    }));\n  }\n\n  private match(tree: UrlTree): Observable<UrlTree> {\n    const expanded$ =\n        this.expandSegmentGroup(this.injector, this.config, tree.root, PRIMARY_OUTLET);\n    const mapped$ = expanded$.pipe(map((rootSegmentGroup: UrlSegmentGroup) => {\n      return this.createUrlTree(\n          squashSegmentGroup(rootSegmentGroup), tree.queryParams, tree.fragment);\n    }));\n    return mapped$.pipe(catchError((e: any): Observable<UrlTree> => {\n      if (e instanceof NoMatch) {\n        throw this.noMatchError(e);\n      }\n\n      throw e;\n    }));\n  }\n\n  private noMatchError(e: NoMatch): any {\n    return new RuntimeError(\n        RuntimeErrorCode.NO_MATCH,\n        NG_DEV_MODE && `Cannot match any routes. URL Segment: '${e.segmentGroup}'`);\n  }\n\n  private createUrlTree(rootCandidate: UrlSegmentGroup, queryParams: Params, fragment: string|null):\n      UrlTree {\n    const root = createRoot(rootCandidate);\n    return new UrlTree(root, queryParams, fragment);\n  }\n\n  private expandSegmentGroup(\n      injector: EnvironmentInjector, routes: Route[], segmentGroup: UrlSegmentGroup,\n      outlet: string): Observable<UrlSegmentGroup> {\n    if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n      return this.expandChildren(injector, routes, segmentGroup)\n          .pipe(map((children: any) => new UrlSegmentGroup([], children)));\n    }\n\n    return this.expandSegment(injector, segmentGroup, routes, segmentGroup.segments, outlet, true);\n  }\n\n  // Recursively expand segment groups for all the child outlets\n  private expandChildren(\n      injector: EnvironmentInjector, routes: Route[],\n      segmentGroup: UrlSegmentGroup): Observable<{[name: string]: UrlSegmentGroup}> {\n    // Expand outlets one at a time, starting with the primary outlet. We need to do it this way\n    // because an absolute redirect from the primary outlet takes precedence.\n    const childOutlets: string[] = [];\n    for (const child of Object.keys(segmentGroup.children)) {\n      if (child === 'primary') {\n        childOutlets.unshift(child);\n      } else {\n        childOutlets.push(child);\n      }\n    }\n\n    return from(childOutlets)\n        .pipe(\n            concatMap(childOutlet => {\n              const child = segmentGroup.children[childOutlet];\n              // Sort the routes so routes with outlets that match the segment appear\n              // first, followed by routes for other outlets, which might match if they have an\n              // empty path.\n              const sortedRoutes = sortByMatchingOutlets(routes, childOutlet);\n              return this.expandSegmentGroup(injector, sortedRoutes, child, childOutlet)\n                  .pipe(map(s => ({segment: s, outlet: childOutlet})));\n            }),\n            scan(\n                (children, expandedChild) => {\n                  children[expandedChild.outlet] = expandedChild.segment;\n                  return children;\n                },\n                {} as {[outlet: string]: UrlSegmentGroup}),\n            last(),\n        );\n  }\n\n  private expandSegment(\n      injector: EnvironmentInjector, segmentGroup: UrlSegmentGroup, routes: Route[],\n      segments: UrlSegment[], outlet: string,\n      allowRedirects: boolean): Observable<UrlSegmentGroup> {\n    return from(routes).pipe(\n        concatMap(r => {\n          const expanded$ = this.expandSegmentAgainstRoute(\n              injector, segmentGroup, routes, r, segments, outlet, allowRedirects);\n          return expanded$.pipe(catchError((e: any) => {\n            if (e instanceof NoMatch) {\n              return of(null);\n            }\n            throw e;\n          }));\n        }),\n        first((s): s is UrlSegmentGroup => !!s), catchError((e: any, _: any) => {\n          if (isEmptyError(e)) {\n            if (noLeftoversInUrl(segmentGroup, segments, outlet)) {\n              return of(new UrlSegmentGroup([], {}));\n            }\n            return noMatch(segmentGroup);\n          }\n          throw e;\n        }));\n  }\n\n  private expandSegmentAgainstRoute(\n      injector: EnvironmentInjector, segmentGroup: UrlSegmentGroup, routes: Route[], route: Route,\n      paths: UrlSegment[], outlet: string, allowRedirects: boolean): Observable<UrlSegmentGroup> {\n    if (!isImmediateMatch(route, segmentGroup, paths, outlet)) {\n      return noMatch(segmentGroup);\n    }\n\n    if (route.redirectTo === undefined) {\n      return this.matchSegmentAgainstRoute(injector, segmentGroup, route, paths, outlet);\n    }\n\n    if (allowRedirects && this.allowRedirects) {\n      return this.expandSegmentAgainstRouteUsingRedirect(\n          injector, segmentGroup, routes, route, paths, outlet);\n    }\n\n    return noMatch(segmentGroup);\n  }\n\n  private expandSegmentAgainstRouteUsingRedirect(\n      injector: EnvironmentInjector, segmentGroup: UrlSegmentGroup, routes: Route[], route: Route,\n      segments: UrlSegment[], outlet: string): Observable<UrlSegmentGroup> {\n    if (route.path === '**') {\n      return this.expandWildCardWithParamsAgainstRouteUsingRedirect(\n          injector, routes, route, outlet);\n    }\n\n    return this.expandRegularSegmentAgainstRouteUsingRedirect(\n        injector, segmentGroup, routes, route, segments, outlet);\n  }\n\n  private expandWildCardWithParamsAgainstRouteUsingRedirect(\n      injector: EnvironmentInjector, routes: Route[], route: Route,\n      outlet: string): Observable<UrlSegmentGroup> {\n    const newTree = this.applyRedirectCommands([], route.redirectTo!, {});\n    if (route.redirectTo!.startsWith('/')) {\n      return absoluteRedirect(newTree);\n    }\n\n    return this.lineralizeSegments(route, newTree).pipe(mergeMap((newSegments: UrlSegment[]) => {\n      const group = new UrlSegmentGroup(newSegments, {});\n      return this.expandSegment(injector, group, routes, newSegments, outlet, false);\n    }));\n  }\n\n  private expandRegularSegmentAgainstRouteUsingRedirect(\n      injector: EnvironmentInjector, segmentGroup: UrlSegmentGroup, routes: Route[], route: Route,\n      segments: UrlSegment[], outlet: string): Observable<UrlSegmentGroup> {\n    const {matched, consumedSegments, remainingSegments, positionalParamSegments} =\n        match(segmentGroup, route, segments);\n    if (!matched) return noMatch(segmentGroup);\n\n    const newTree =\n        this.applyRedirectCommands(consumedSegments, route.redirectTo!, positionalParamSegments);\n    if (route.redirectTo!.startsWith('/')) {\n      return absoluteRedirect(newTree);\n    }\n\n    return this.lineralizeSegments(route, newTree).pipe(mergeMap((newSegments: UrlSegment[]) => {\n      return this.expandSegment(\n          injector, segmentGroup, routes, newSegments.concat(remainingSegments), outlet, false);\n    }));\n  }\n\n  private matchSegmentAgainstRoute(\n      injector: EnvironmentInjector, rawSegmentGroup: UrlSegmentGroup, route: Route,\n      segments: UrlSegment[], outlet: string): Observable<UrlSegmentGroup> {\n    if (route.path === '**') {\n      // Only create the Route's `EnvironmentInjector` if it matches the attempted navigation\n      injector = getOrCreateRouteInjectorIfNeeded(route, injector);\n      if (route.loadChildren) {\n        const loaded$ = route._loadedRoutes ?\n            of({routes: route._loadedRoutes, injector: route._loadedInjector}) :\n            this.configLoader.loadChildren(injector, route);\n        return loaded$.pipe(map((cfg: LoadedRouterConfig) => {\n          route._loadedRoutes = cfg.routes;\n          route._loadedInjector = cfg.injector;\n          return new UrlSegmentGroup(segments, {});\n        }));\n      }\n\n      return of(new UrlSegmentGroup(segments, {}));\n    }\n\n    return matchWithChecks(rawSegmentGroup, route, segments, injector, this.urlSerializer)\n        .pipe(\n            switchMap(({matched, consumedSegments, remainingSegments}) => {\n              if (!matched) return noMatch(rawSegmentGroup);\n\n              // If the route has an injector created from providers, we should start using that.\n              injector = route._injector ?? injector;\n              const childConfig$ = this.getChildConfig(injector, route, segments);\n\n              return childConfig$.pipe(mergeMap((routerConfig: LoadedRouterConfig) => {\n                const childInjector = routerConfig.injector ?? injector;\n                const childConfig = routerConfig.routes;\n\n                const {segmentGroup: splitSegmentGroup, slicedSegments} =\n                    split(rawSegmentGroup, consumedSegments, remainingSegments, childConfig);\n                // See comment on the other call to `split` about why this is necessary.\n                const segmentGroup =\n                    new UrlSegmentGroup(splitSegmentGroup.segments, splitSegmentGroup.children);\n\n                if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {\n                  const expanded$ = this.expandChildren(childInjector, childConfig, segmentGroup);\n                  return expanded$.pipe(\n                      map((children: any) => new UrlSegmentGroup(consumedSegments, children)));\n                }\n\n                if (childConfig.length === 0 && slicedSegments.length === 0) {\n                  return of(new UrlSegmentGroup(consumedSegments, {}));\n                }\n\n                const matchedOnOutlet = getOutlet(route) === outlet;\n                const expanded$ = this.expandSegment(\n                    childInjector, segmentGroup, childConfig, slicedSegments,\n                    matchedOnOutlet ? PRIMARY_OUTLET : outlet, true);\n                return expanded$.pipe(\n                    map((cs: UrlSegmentGroup) => new UrlSegmentGroup(\n                            consumedSegments.concat(cs.segments), cs.children)));\n              }));\n            }),\n        );\n  }\n\n  private getChildConfig(injector: EnvironmentInjector, route: Route, segments: UrlSegment[]):\n      Observable<LoadedRouterConfig> {\n    if (route.children) {\n      // The children belong to the same module\n      return of({routes: route.children, injector});\n    }\n\n    if (route.loadChildren) {\n      // lazy children belong to the loaded module\n      if (route._loadedRoutes !== undefined) {\n        return of({routes: route._loadedRoutes, injector: route._loadedInjector});\n      }\n\n      return runCanLoadGuards(injector, route, segments, this.urlSerializer)\n          .pipe(mergeMap((shouldLoadResult: boolean) => {\n            if (shouldLoadResult) {\n              return this.configLoader.loadChildren(injector, route)\n                  .pipe(tap((cfg: LoadedRouterConfig) => {\n                    route._loadedRoutes = cfg.routes;\n                    route._loadedInjector = cfg.injector;\n                  }));\n            }\n            return canLoadFails(route);\n          }));\n    }\n\n    return of({routes: [], injector});\n  }\n\n  private lineralizeSegments(route: Route, urlTree: UrlTree): Observable<UrlSegment[]> {\n    let res: UrlSegment[] = [];\n    let c = urlTree.root;\n    while (true) {\n      res = res.concat(c.segments);\n      if (c.numberOfChildren === 0) {\n        return of(res);\n      }\n\n      if (c.numberOfChildren > 1 || !c.children[PRIMARY_OUTLET]) {\n        return namedOutletsRedirect(route.redirectTo!);\n      }\n\n      c = c.children[PRIMARY_OUTLET];\n    }\n  }\n\n  private applyRedirectCommands(\n      segments: UrlSegment[], redirectTo: string, posParams: {[k: string]: UrlSegment}): UrlTree {\n    return this.applyRedirectCreateUrlTree(\n        redirectTo, this.urlSerializer.parse(redirectTo), segments, posParams);\n  }\n\n  private applyRedirectCreateUrlTree(\n      redirectTo: string, urlTree: UrlTree, segments: UrlSegment[],\n      posParams: {[k: string]: UrlSegment}): UrlTree {\n    const newRoot = this.createSegmentGroup(redirectTo, urlTree.root, segments, posParams);\n    return new UrlTree(\n        newRoot, this.createQueryParams(urlTree.queryParams, this.urlTree.queryParams),\n        urlTree.fragment);\n  }\n\n  private createQueryParams(redirectToParams: Params, actualParams: Params): Params {\n    const res: Params = {};\n    forEach(redirectToParams, (v: any, k: string) => {\n      const copySourceValue = typeof v === 'string' && v.startsWith(':');\n      if (copySourceValue) {\n        const sourceName = v.substring(1);\n        res[k] = actualParams[sourceName];\n      } else {\n        res[k] = v;\n      }\n    });\n    return res;\n  }\n\n  private createSegmentGroup(\n      redirectTo: string, group: UrlSegmentGroup, segments: UrlSegment[],\n      posParams: {[k: string]: UrlSegment}): UrlSegmentGroup {\n    const updatedSegments = this.createSegments(redirectTo, group.segments, segments, posParams);\n\n    let children: {[n: string]: UrlSegmentGroup} = {};\n    forEach(group.children, (child: UrlSegmentGroup, name: string) => {\n      children[name] = this.createSegmentGroup(redirectTo, child, segments, posParams);\n    });\n\n    return new UrlSegmentGroup(updatedSegments, children);\n  }\n\n  private createSegments(\n      redirectTo: string, redirectToSegments: UrlSegment[], actualSegments: UrlSegment[],\n      posParams: {[k: string]: UrlSegment}): UrlSegment[] {\n    return redirectToSegments.map(\n        s => s.path.startsWith(':') ? this.findPosParam(redirectTo, s, posParams) :\n                                      this.findOrReturn(s, actualSegments));\n  }\n\n  private findPosParam(\n      redirectTo: string, redirectToUrlSegment: UrlSegment,\n      posParams: {[k: string]: UrlSegment}): UrlSegment {\n    const pos = posParams[redirectToUrlSegment.path.substring(1)];\n    if (!pos)\n      throw new RuntimeError(\n          RuntimeErrorCode.MISSING_REDIRECT,\n          NG_DEV_MODE &&\n              `Cannot redirect to '${redirectTo}'. Cannot find '${redirectToUrlSegment.path}'.`);\n    return pos;\n  }\n\n  private findOrReturn(redirectToUrlSegment: UrlSegment, actualSegments: UrlSegment[]): UrlSegment {\n    let idx = 0;\n    for (const s of actualSegments) {\n      if (s.path === redirectToUrlSegment.path) {\n        actualSegments.splice(idx);\n        return s;\n      }\n      idx++;\n    }\n    return redirectToUrlSegment;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EnvironmentInjector} from '@angular/core';\nimport {MonoTypeOperatorFunction} from 'rxjs';\nimport {map, switchMap} from 'rxjs/operators';\n\nimport {applyRedirects as applyRedirectsFn} from '../apply_redirects';\nimport {Routes} from '../models';\nimport {NavigationTransition} from '../navigation_transition';\nimport {RouterConfigLoader} from '../router_config_loader';\nimport {UrlSerializer} from '../url_tree';\n\nexport function applyRedirects(\n    environmentInjector: EnvironmentInjector, configLoader: RouterConfigLoader,\n    urlSerializer: UrlSerializer, config: Routes): MonoTypeOperatorFunction<NavigationTransition> {\n  return switchMap(\n      t =>\n          applyRedirectsFn(environmentInjector, configLoader, urlSerializer, t.extractedUrl, config)\n              .pipe(map(urlAfterRedirects => ({...t, urlAfterRedirects}))));\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EnvironmentInjector, Type, ɵRuntimeError as RuntimeError} from '@angular/core';\nimport {EmptyError, from, Observable, Observer, of} from 'rxjs';\nimport {catchError, concatMap, defaultIfEmpty, first, last as rxjsLast, map, scan, switchMap, takeWhile} from 'rxjs/operators';\n\nimport {RuntimeErrorCode} from './errors';\nimport {Data, ResolveData, Route, Routes} from './models';\nimport {ActivatedRouteSnapshot, inheritedParamsDataResolve, ParamsInheritanceStrategy, RouterStateSnapshot} from './router_state';\nimport {PRIMARY_OUTLET} from './shared';\nimport {UrlSegment, UrlSegmentGroup, UrlSerializer, UrlTree} from './url_tree';\nimport {last} from './utils/collection';\nimport {getOutlet, sortByMatchingOutlets} from './utils/config';\nimport {isImmediateMatch, matchWithChecks, noLeftoversInUrl, split} from './utils/config_matching';\nimport {TreeNode} from './utils/tree';\nimport {isEmptyError} from './utils/type_guards';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || !!ngDevMode;\n\nclass NoMatch {}\n\nfunction newObservableError(e: unknown): Observable<RouterStateSnapshot> {\n  // TODO(atscott): This pattern is used throughout the router code and can be `throwError` instead.\n  return new Observable<RouterStateSnapshot>((obs: Observer<RouterStateSnapshot>) => obs.error(e));\n}\n\nexport function recognize(\n    injector: EnvironmentInjector, rootComponentType: Type<any>|null, config: Routes,\n    urlTree: UrlTree, url: string, urlSerializer: UrlSerializer,\n    paramsInheritanceStrategy: ParamsInheritanceStrategy =\n        'emptyOnly'): Observable<RouterStateSnapshot> {\n  return new Recognizer(\n             injector, rootComponentType, config, urlTree, url, paramsInheritanceStrategy,\n             urlSerializer)\n      .recognize()\n      .pipe(switchMap(result => {\n        if (result === null) {\n          return newObservableError(new NoMatch());\n        } else {\n          return of(result);\n        }\n      }));\n}\n\nexport class Recognizer {\n  constructor(\n      private injector: EnvironmentInjector, private rootComponentType: Type<any>|null,\n      private config: Routes, private urlTree: UrlTree, private url: string,\n      private paramsInheritanceStrategy: ParamsInheritanceStrategy,\n      private readonly urlSerializer: UrlSerializer) {}\n\n  recognize(): Observable<RouterStateSnapshot|null> {\n    const rootSegmentGroup =\n        split(this.urlTree.root, [], [], this.config.filter(c => c.redirectTo === undefined))\n            .segmentGroup;\n\n    return this.processSegmentGroup(this.injector, this.config, rootSegmentGroup, PRIMARY_OUTLET)\n        .pipe(map(children => {\n          if (children === null) {\n            return null;\n          }\n\n          // Use Object.freeze to prevent readers of the Router state from modifying it outside of a\n          // navigation, resulting in the router being out of sync with the browser.\n          const root = new ActivatedRouteSnapshot(\n              [], Object.freeze({}), Object.freeze({...this.urlTree.queryParams}),\n              this.urlTree.fragment, {}, PRIMARY_OUTLET, this.rootComponentType, null,\n              this.urlTree.root, -1, {});\n\n          const rootNode = new TreeNode<ActivatedRouteSnapshot>(root, children);\n          const routeState = new RouterStateSnapshot(this.url, rootNode);\n          this.inheritParamsAndData(routeState._root);\n          return routeState;\n        }));\n  }\n\n  inheritParamsAndData(routeNode: TreeNode<ActivatedRouteSnapshot>): void {\n    const route = routeNode.value;\n\n    const i = inheritedParamsDataResolve(route, this.paramsInheritanceStrategy);\n    route.params = Object.freeze(i.params);\n    route.data = Object.freeze(i.data);\n\n    routeNode.children.forEach(n => this.inheritParamsAndData(n));\n  }\n\n  processSegmentGroup(\n      injector: EnvironmentInjector, config: Route[], segmentGroup: UrlSegmentGroup,\n      outlet: string): Observable<TreeNode<ActivatedRouteSnapshot>[]|null> {\n    if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n      return this.processChildren(injector, config, segmentGroup);\n    }\n\n    return this.processSegment(injector, config, segmentGroup, segmentGroup.segments, outlet);\n  }\n\n  /**\n   * Matches every child outlet in the `segmentGroup` to a `Route` in the config. Returns `null` if\n   * we cannot find a match for _any_ of the children.\n   *\n   * @param config - The `Routes` to match against\n   * @param segmentGroup - The `UrlSegmentGroup` whose children need to be matched against the\n   *     config.\n   */\n  processChildren(injector: EnvironmentInjector, config: Route[], segmentGroup: UrlSegmentGroup):\n      Observable<TreeNode<ActivatedRouteSnapshot>[]|null> {\n    return from(Object.keys(segmentGroup.children))\n        .pipe(\n            concatMap(childOutlet => {\n              const child = segmentGroup.children[childOutlet];\n              // Sort the config so that routes with outlets that match the one being activated\n              // appear first, followed by routes for other outlets, which might match if they have\n              // an empty path.\n              const sortedConfig = sortByMatchingOutlets(config, childOutlet);\n              return this.processSegmentGroup(injector, sortedConfig, child, childOutlet);\n            }),\n            scan((children, outletChildren) => {\n              if (!children || !outletChildren) return null;\n              children.push(...outletChildren);\n              return children;\n            }),\n            takeWhile(children => children !== null),\n            defaultIfEmpty(null as TreeNode<ActivatedRouteSnapshot>[] | null),\n            rxjsLast(),\n            map(children => {\n              if (children === null) return null;\n              // Because we may have matched two outlets to the same empty path segment, we can have\n              // multiple activated results for the same outlet. We should merge the children of\n              // these results so the final return value is only one `TreeNode` per outlet.\n              const mergedChildren = mergeEmptyPathMatches(children);\n              if (NG_DEV_MODE) {\n                // This should really never happen - we are only taking the first match for each\n                // outlet and merge the empty path matches.\n                checkOutletNameUniqueness(mergedChildren);\n              }\n              sortActivatedRouteSnapshots(mergedChildren);\n              return mergedChildren;\n            }),\n        );\n  }\n\n  processSegment(\n      injector: EnvironmentInjector, routes: Route[], segmentGroup: UrlSegmentGroup,\n      segments: UrlSegment[], outlet: string): Observable<TreeNode<ActivatedRouteSnapshot>[]|null> {\n    return from(routes).pipe(\n        concatMap(r => {\n          return this.processSegmentAgainstRoute(\n              r._injector ?? injector, r, segmentGroup, segments, outlet);\n        }),\n        first((x): x is TreeNode<ActivatedRouteSnapshot>[] => !!x), catchError(e => {\n          if (isEmptyError(e)) {\n            if (noLeftoversInUrl(segmentGroup, segments, outlet)) {\n              return of([]);\n            }\n            return of(null);\n          }\n          throw e;\n        }));\n  }\n\n  processSegmentAgainstRoute(\n      injector: EnvironmentInjector, route: Route, rawSegment: UrlSegmentGroup,\n      segments: UrlSegment[], outlet: string): Observable<TreeNode<ActivatedRouteSnapshot>[]|null> {\n    if (route.redirectTo || !isImmediateMatch(route, rawSegment, segments, outlet)) return of(null);\n\n    let matchResult: Observable<{\n      snapshot: ActivatedRouteSnapshot,\n      consumedSegments: UrlSegment[],\n      remainingSegments: UrlSegment[],\n    }|null>;\n\n    if (route.path === '**') {\n      const params = segments.length > 0 ? last(segments)!.parameters : {};\n      const pathIndexShift = getPathIndexShift(rawSegment) + segments.length;\n      const snapshot = new ActivatedRouteSnapshot(\n          segments, params, Object.freeze({...this.urlTree.queryParams}), this.urlTree.fragment,\n          getData(route), getOutlet(route), route.component ?? route._loadedComponent ?? null,\n          route, getSourceSegmentGroup(rawSegment), pathIndexShift, getResolve(route));\n      matchResult = of({\n        snapshot,\n        consumedSegments: [],\n        remainingSegments: [],\n      });\n    } else {\n      matchResult =\n          matchWithChecks(rawSegment, route, segments, injector, this.urlSerializer)\n              .pipe(map(({matched, consumedSegments, remainingSegments, parameters}) => {\n                if (!matched) {\n                  return null;\n                }\n                const pathIndexShift = getPathIndexShift(rawSegment) + consumedSegments.length;\n\n                const snapshot = new ActivatedRouteSnapshot(\n                    consumedSegments, parameters, Object.freeze({...this.urlTree.queryParams}),\n                    this.urlTree.fragment, getData(route), getOutlet(route),\n                    route.component ?? route._loadedComponent ?? null, route,\n                    getSourceSegmentGroup(rawSegment), pathIndexShift, getResolve(route));\n                return {snapshot, consumedSegments, remainingSegments};\n              }));\n    }\n\n    return matchResult.pipe(switchMap((result) => {\n      if (result === null) {\n        return of(null);\n      }\n      const {snapshot, consumedSegments, remainingSegments} = result;\n      // If the route has an injector created from providers, we should start using that.\n      injector = route._injector ?? injector;\n      const childInjector = route._loadedInjector ?? injector;\n      const childConfig: Route[] = getChildConfig(route);\n\n      const {segmentGroup, slicedSegments} = split(\n          rawSegment, consumedSegments, remainingSegments,\n          // Filter out routes with redirectTo because we are trying to create activated route\n          // snapshots and don't handle redirects here. That should have been done in\n          // `applyRedirects`.\n          childConfig.filter(c => c.redirectTo === undefined));\n\n      if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {\n        return this.processChildren(childInjector, childConfig, segmentGroup).pipe(map(children => {\n          if (children === null) {\n            return null;\n          }\n          return [new TreeNode<ActivatedRouteSnapshot>(snapshot, children)];\n        }));\n      }\n\n      if (childConfig.length === 0 && slicedSegments.length === 0) {\n        return of([new TreeNode<ActivatedRouteSnapshot>(snapshot, [])]);\n      }\n\n      const matchedOnOutlet = getOutlet(route) === outlet;\n      // If we matched a config due to empty path match on a different outlet, we need to\n      // continue passing the current outlet for the segment rather than switch to PRIMARY.\n      // Note that we switch to primary when we have a match because outlet configs look like\n      // this: {path: 'a', outlet: 'a', children: [\n      //  {path: 'b', component: B},\n      //  {path: 'c', component: C},\n      // ]}\n      // Notice that the children of the named outlet are configured with the primary outlet\n      return this\n          .processSegment(\n              childInjector, childConfig, segmentGroup, slicedSegments,\n              matchedOnOutlet ? PRIMARY_OUTLET : outlet)\n          .pipe(map(children => {\n            if (children === null) {\n              return null;\n            }\n            return [new TreeNode<ActivatedRouteSnapshot>(snapshot, children)];\n          }));\n    }));\n  }\n}\n\nfunction sortActivatedRouteSnapshots(nodes: TreeNode<ActivatedRouteSnapshot>[]): void {\n  nodes.sort((a, b) => {\n    if (a.value.outlet === PRIMARY_OUTLET) return -1;\n    if (b.value.outlet === PRIMARY_OUTLET) return 1;\n    return a.value.outlet.localeCompare(b.value.outlet);\n  });\n}\n\nfunction getChildConfig(route: Route): Route[] {\n  if (route.children) {\n    return route.children;\n  }\n\n  if (route.loadChildren) {\n    return route._loadedRoutes!;\n  }\n\n  return [];\n}\n\nfunction hasEmptyPathConfig(node: TreeNode<ActivatedRouteSnapshot>) {\n  const config = node.value.routeConfig;\n  return config && config.path === '' && config.redirectTo === undefined;\n}\n\n/**\n * Finds `TreeNode`s with matching empty path route configs and merges them into `TreeNode` with\n * the children from each duplicate. This is necessary because different outlets can match a\n * single empty path route config and the results need to then be merged.\n */\nfunction mergeEmptyPathMatches(nodes: Array<TreeNode<ActivatedRouteSnapshot>>):\n    Array<TreeNode<ActivatedRouteSnapshot>> {\n  const result: Array<TreeNode<ActivatedRouteSnapshot>> = [];\n  // The set of nodes which contain children that were merged from two duplicate empty path nodes.\n  const mergedNodes: Set<TreeNode<ActivatedRouteSnapshot>> = new Set();\n\n  for (const node of nodes) {\n    if (!hasEmptyPathConfig(node)) {\n      result.push(node);\n      continue;\n    }\n\n    const duplicateEmptyPathNode =\n        result.find(resultNode => node.value.routeConfig === resultNode.value.routeConfig);\n    if (duplicateEmptyPathNode !== undefined) {\n      duplicateEmptyPathNode.children.push(...node.children);\n      mergedNodes.add(duplicateEmptyPathNode);\n    } else {\n      result.push(node);\n    }\n  }\n  // For each node which has children from multiple sources, we need to recompute a new `TreeNode`\n  // by also merging those children. This is necessary when there are multiple empty path configs\n  // in a row. Put another way: whenever we combine children of two nodes, we need to also check\n  // if any of those children can be combined into a single node as well.\n  for (const mergedNode of mergedNodes) {\n    const mergedChildren = mergeEmptyPathMatches(mergedNode.children);\n    result.push(new TreeNode(mergedNode.value, mergedChildren));\n  }\n  return result.filter(n => !mergedNodes.has(n));\n}\n\nfunction checkOutletNameUniqueness(nodes: TreeNode<ActivatedRouteSnapshot>[]): void {\n  const names: {[k: string]: ActivatedRouteSnapshot} = {};\n  nodes.forEach(n => {\n    const routeWithSameOutletName = names[n.value.outlet];\n    if (routeWithSameOutletName) {\n      const p = routeWithSameOutletName.url.map(s => s.toString()).join('/');\n      const c = n.value.url.map(s => s.toString()).join('/');\n      throw new RuntimeError(\n          RuntimeErrorCode.TWO_SEGMENTS_WITH_SAME_OUTLET,\n          NG_DEV_MODE && `Two segments cannot have the same outlet name: '${p}' and '${c}'.`);\n    }\n    names[n.value.outlet] = n.value;\n  });\n}\n\nfunction getSourceSegmentGroup(segmentGroup: UrlSegmentGroup): UrlSegmentGroup {\n  let s = segmentGroup;\n  while (s._sourceSegment) {\n    s = s._sourceSegment;\n  }\n  return s;\n}\n\nfunction getPathIndexShift(segmentGroup: UrlSegmentGroup): number {\n  let s = segmentGroup;\n  let res = s._segmentIndexShift ?? 0;\n  while (s._sourceSegment) {\n    s = s._sourceSegment;\n    res += s._segmentIndexShift ?? 0;\n  }\n  return res - 1;\n}\n\nfunction getCorrectedPathIndexShift(segmentGroup: UrlSegmentGroup): number {\n  let s = segmentGroup;\n  let res = s._segmentIndexShiftCorrected ?? s._segmentIndexShift ?? 0;\n  while (s._sourceSegment) {\n    s = s._sourceSegment;\n    res += s._segmentIndexShiftCorrected ?? s._segmentIndexShift ?? 0;\n  }\n  return res - 1;\n}\n\nfunction getData(route: Route): Data {\n  return route.data || {};\n}\n\nfunction getResolve(route: Route): ResolveData {\n  return route.resolve || {};\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EnvironmentInjector, Type} from '@angular/core';\nimport {MonoTypeOperatorFunction} from 'rxjs';\nimport {map, mergeMap} from 'rxjs/operators';\n\nimport {Route} from '../models';\nimport {NavigationTransition} from '../navigation_transition';\nimport {recognize as recognizeFn} from '../recognize';\nimport {UrlSerializer} from '../url_tree';\n\nexport function recognize(\n    injector: EnvironmentInjector, rootComponentType: Type<any>|null, config: Route[],\n    serializer: UrlSerializer, paramsInheritanceStrategy: 'emptyOnly'|'always'):\n    MonoTypeOperatorFunction<NavigationTransition> {\n  return mergeMap(\n      t => recognizeFn(\n               injector, rootComponentType, config, t.urlAfterRedirects!,\n               serializer.serialize(t.urlAfterRedirects!), serializer, paramsInheritanceStrategy)\n               .pipe(map(targetSnapshot => ({...t, targetSnapshot}))));\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EnvironmentInjector, ProviderToken} from '@angular/core';\nimport {EMPTY, from, MonoTypeOperatorFunction, Observable, of, throwError} from 'rxjs';\nimport {catchError, concatMap, first, map, mapTo, mergeMap, takeLast, tap} from 'rxjs/operators';\n\nimport {ResolveData, Route} from '../models';\nimport {NavigationTransition} from '../navigation_transition';\nimport {ActivatedRouteSnapshot, inheritedParamsDataResolve, RouterStateSnapshot} from '../router_state';\nimport {RouteTitleKey} from '../shared';\nimport {wrapIntoObservable} from '../utils/collection';\nimport {getClosestRouteInjector} from '../utils/config';\nimport {getTokenOrFunctionIdentity} from '../utils/preactivation';\nimport {isEmptyError} from '../utils/type_guards';\n\nexport function resolveData(\n    paramsInheritanceStrategy: 'emptyOnly'|'always',\n    injector: EnvironmentInjector): MonoTypeOperatorFunction<NavigationTransition> {\n  return mergeMap(t => {\n    const {targetSnapshot, guards: {canActivateChecks}} = t;\n\n    if (!canActivateChecks.length) {\n      return of(t);\n    }\n    let canActivateChecksResolved = 0;\n    return from(canActivateChecks)\n        .pipe(\n            concatMap(\n                check =>\n                    runResolve(check.route, targetSnapshot!, paramsInheritanceStrategy, injector)),\n            tap(() => canActivateChecksResolved++),\n            takeLast(1),\n            mergeMap(_ => canActivateChecksResolved === canActivateChecks.length ? of(t) : EMPTY),\n        );\n  });\n}\n\nfunction runResolve(\n    futureARS: ActivatedRouteSnapshot, futureRSS: RouterStateSnapshot,\n    paramsInheritanceStrategy: 'emptyOnly'|'always', injector: EnvironmentInjector) {\n  const config = futureARS.routeConfig;\n  const resolve = futureARS._resolve;\n  if (config?.title !== undefined && !hasStaticTitle(config)) {\n    resolve[RouteTitleKey] = config.title;\n  }\n  return resolveNode(resolve, futureARS, futureRSS, injector).pipe(map((resolvedData: any) => {\n    futureARS._resolvedData = resolvedData;\n    futureARS.data = inheritedParamsDataResolve(futureARS, paramsInheritanceStrategy).resolve;\n    if (config && hasStaticTitle(config)) {\n      futureARS.data[RouteTitleKey] = config.title;\n    }\n    return null;\n  }));\n}\n\nfunction resolveNode(\n    resolve: ResolveData, futureARS: ActivatedRouteSnapshot, futureRSS: RouterStateSnapshot,\n    injector: EnvironmentInjector): Observable<any> {\n  const keys = getDataKeys(resolve);\n  if (keys.length === 0) {\n    return of({});\n  }\n  const data: {[k: string|symbol]: any} = {};\n  return from(keys).pipe(\n      mergeMap(\n          key => getResolver(resolve[key], futureARS, futureRSS, injector)\n                     .pipe(first(), tap((value: any) => {\n                             data[key] = value;\n                           }))),\n      takeLast(1),\n      mapTo(data),\n      catchError((e: unknown) => isEmptyError(e as Error) ? EMPTY : throwError(e)),\n  );\n}\n\nfunction getDataKeys(obj: Object): Array<string|symbol> {\n  return [...Object.keys(obj), ...Object.getOwnPropertySymbols(obj)];\n}\n\nfunction getResolver(\n    injectionToken: ProviderToken<any>|Function, futureARS: ActivatedRouteSnapshot,\n    futureRSS: RouterStateSnapshot, injector: EnvironmentInjector): Observable<any> {\n  const closestInjector = getClosestRouteInjector(futureARS) ?? injector;\n  const resolver = getTokenOrFunctionIdentity(injectionToken, closestInjector);\n  const resolverValue = resolver.resolve ?\n      resolver.resolve(futureARS, futureRSS) :\n      closestInjector.runInContext(() => resolver(futureARS, futureRSS));\n  return wrapIntoObservable(resolverValue);\n}\n\nfunction hasStaticTitle(config: Route) {\n  return typeof config.title === 'string' || config.title === null;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {from, MonoTypeOperatorFunction, ObservableInput, of} from 'rxjs';\nimport {map, switchMap} from 'rxjs/operators';\n\n/**\n * Perform a side effect through a switchMap for every emission on the source Observable,\n * but return an Observable that is identical to the source. It's essentially the same as\n * the `tap` operator, but if the side effectful `next` function returns an ObservableInput,\n * it will wait before continuing with the original value.\n */\nexport function switchTap<T>(next: (x: T) => void|ObservableInput<any>):\n    MonoTypeOperatorFunction<T> {\n  return switchMap(v => {\n    const nextResult = next(v);\n    if (nextResult) {\n      return from(nextResult).pipe(map(() => v));\n    }\n    return of(v);\n  });\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injector, NgModuleFactory} from '@angular/core';\nimport {Observable} from 'rxjs';\n\n// This file exists to support the legacy `loadChildren: string` behavior being patched back into\n// Angular.\n\nexport function deprecatedLoadChildrenString(\n    injector: Injector, loadChildren: unknown): Observable<NgModuleFactory<any>>|null {\n  return null;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Compiler, EnvironmentInjector, Injectable, InjectFlags, InjectionToken, Injector, NgModuleFactory, Type} from '@angular/core';\nimport {ConnectableObservable, from, Observable, of, Subject} from 'rxjs';\nimport {catchError, finalize, map, mergeMap, refCount, tap} from 'rxjs/operators';\n\nimport {deprecatedLoadChildrenString} from './deprecated_load_children';\nimport {DefaultExport, LoadChildren, LoadChildrenCallback, LoadedRouterConfig, Route, Routes} from './models';\nimport {flatten, wrapIntoObservable} from './utils/collection';\nimport {assertStandalone, standardizeConfig, validateConfig} from './utils/config';\n\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || !!ngDevMode;\n\n/**\n * The [DI token](guide/glossary/#di-token) for a router configuration.\n *\n * `ROUTES` is a low level API for router configuration via dependency injection.\n *\n * We recommend that in almost all cases to use higher level APIs such as `RouterModule.forRoot()`,\n * `provideRouter`, or `Router.resetConfig()`.\n *\n * @publicApi\n */\nexport const ROUTES = new InjectionToken<Route[][]>('ROUTES');\n\ntype ComponentLoader = Observable<Type<unknown>>;\n\n@Injectable({providedIn: 'root'})\nexport class RouterConfigLoader {\n  private componentLoaders = new WeakMap<Route, ComponentLoader>();\n  private childrenLoaders = new WeakMap<Route, Observable<LoadedRouterConfig>>();\n  onLoadStartListener?: (r: Route) => void;\n  onLoadEndListener?: (r: Route) => void;\n\n  constructor(\n      private injector: Injector,\n      private compiler: Compiler,\n  ) {}\n\n  loadComponent(route: Route): Observable<Type<unknown>> {\n    if (this.componentLoaders.get(route)) {\n      return this.componentLoaders.get(route)!;\n    } else if (route._loadedComponent) {\n      return of(route._loadedComponent);\n    }\n\n    if (this.onLoadStartListener) {\n      this.onLoadStartListener(route);\n    }\n    const loadRunner = wrapIntoObservable(route.loadComponent!())\n                           .pipe(\n                               map(maybeUnwrapDefaultExport),\n                               tap(component => {\n                                 if (this.onLoadEndListener) {\n                                   this.onLoadEndListener(route);\n                                 }\n                                 NG_DEV_MODE && assertStandalone(route.path ?? '', component);\n                                 route._loadedComponent = component;\n                               }),\n                               finalize(() => {\n                                 this.componentLoaders.delete(route);\n                               }),\n                           );\n    // Use custom ConnectableObservable as share in runners pipe increasing the bundle size too much\n    const loader =\n        new ConnectableObservable(loadRunner, () => new Subject<Type<unknown>>()).pipe(refCount());\n    this.componentLoaders.set(route, loader);\n    return loader;\n  }\n\n  loadChildren(parentInjector: Injector, route: Route): Observable<LoadedRouterConfig> {\n    if (this.childrenLoaders.get(route)) {\n      return this.childrenLoaders.get(route)!;\n    } else if (route._loadedRoutes) {\n      return of({routes: route._loadedRoutes, injector: route._loadedInjector});\n    }\n\n    if (this.onLoadStartListener) {\n      this.onLoadStartListener(route);\n    }\n    const moduleFactoryOrRoutes$ = this.loadModuleFactoryOrRoutes(route.loadChildren!);\n    const loadRunner = moduleFactoryOrRoutes$.pipe(\n        map((factoryOrRoutes: NgModuleFactory<any>|Routes) => {\n          if (this.onLoadEndListener) {\n            this.onLoadEndListener(route);\n          }\n          // This injector comes from the `NgModuleRef` when lazy loading an `NgModule`. There is no\n          // injector associated with lazy loading a `Route` array.\n          let injector: EnvironmentInjector|undefined;\n          let rawRoutes: Route[];\n          let requireStandaloneComponents = false;\n          if (Array.isArray(factoryOrRoutes)) {\n            rawRoutes = factoryOrRoutes;\n            requireStandaloneComponents = true;\n          } else {\n            injector = factoryOrRoutes.create(parentInjector).injector;\n            // When loading a module that doesn't provide `RouterModule.forChild()` preloader\n            // will get stuck in an infinite loop. The child module's Injector will look to\n            // its parent `Injector` when it doesn't find any ROUTES so it will return routes\n            // for it's parent module instead.\n            rawRoutes = flatten(injector.get(ROUTES, [], InjectFlags.Self | InjectFlags.Optional));\n          }\n          const routes = rawRoutes.map(standardizeConfig);\n          NG_DEV_MODE && validateConfig(routes, route.path, requireStandaloneComponents);\n          return {routes, injector};\n        }),\n        finalize(() => {\n          this.childrenLoaders.delete(route);\n        }),\n    );\n    // Use custom ConnectableObservable as share in runners pipe increasing the bundle size too much\n    const loader = new ConnectableObservable(loadRunner, () => new Subject<LoadedRouterConfig>())\n                       .pipe(refCount());\n    this.childrenLoaders.set(route, loader);\n    return loader;\n  }\n\n  private loadModuleFactoryOrRoutes(loadChildren: LoadChildren):\n      Observable<NgModuleFactory<any>|Routes> {\n    const deprecatedResult = deprecatedLoadChildrenString(this.injector, loadChildren);\n    if (deprecatedResult) {\n      return deprecatedResult;\n    }\n    return wrapIntoObservable((loadChildren as LoadChildrenCallback)())\n        .pipe(\n            map(maybeUnwrapDefaultExport),\n            mergeMap((t) => {\n              if (t instanceof NgModuleFactory || Array.isArray(t)) {\n                return of(t);\n              } else {\n                return from(this.compiler.compileModuleAsync(t));\n              }\n            }),\n        );\n  }\n}\n\nfunction isWrappedDefaultExport<T>(value: T|DefaultExport<T>): value is DefaultExport<T> {\n  // We use `in` here with a string key `'default'`, because we expect `DefaultExport` objects to be\n  // dynamically imported ES modules with a spec-mandated `default` key. Thus we don't expect that\n  // `default` will be a renamed property.\n  return value && typeof value === 'object' && 'default' in value;\n}\n\nfunction maybeUnwrapDefaultExport<T>(input: T|DefaultExport<T>): T {\n  // As per `isWrappedDefaultExport`, the `default` key here is generated by the browser and not\n  // subject to property renaming, so we reference it with bracket access.\n  return isWrappedDefaultExport(input) ? input['default'] : input;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {EnvironmentInjector, inject, Injectable, Type} from '@angular/core';\nimport {BehaviorSubject, combineLatest, EMPTY, Observable, of, Subject} from 'rxjs';\nimport {catchError, defaultIfEmpty, filter, finalize, map, switchMap, take, tap} from 'rxjs/operators';\n\nimport {createRouterState} from './create_router_state';\nimport {Event, GuardsCheckEnd, GuardsCheckStart, IMPERATIVE_NAVIGATION, NavigationCancel, NavigationCancellationCode, NavigationEnd, NavigationError, NavigationSkipped, NavigationSkippedCode, NavigationStart, NavigationTrigger, ResolveEnd, ResolveStart, RouteConfigLoadEnd, RouteConfigLoadStart, RoutesRecognized} from './events';\nimport {NavigationBehaviorOptions, QueryParamsHandling, Route, Routes} from './models';\nimport {isNavigationCancelingError, isRedirectingNavigationCancelingError, redirectingNavigationError} from './navigation_canceling_error';\nimport {activateRoutes} from './operators/activate_routes';\nimport {applyRedirects} from './operators/apply_redirects';\nimport {checkGuards} from './operators/check_guards';\nimport {recognize} from './operators/recognize';\nimport {resolveData} from './operators/resolve_data';\nimport {switchTap} from './operators/switch_tap';\nimport {TitleStrategy} from './page_title_strategy';\nimport {RouteReuseStrategy} from './route_reuse_strategy';\nimport {ErrorHandler} from './router_config';\nimport {RouterConfigLoader} from './router_config_loader';\nimport {ChildrenOutletContexts} from './router_outlet_context';\nimport {ActivatedRoute, ActivatedRouteSnapshot, createEmptyState, RouterState, RouterStateSnapshot} from './router_state';\nimport {Params} from './shared';\nimport {UrlHandlingStrategy} from './url_handling_strategy';\nimport {isUrlTree, UrlSerializer, UrlTree} from './url_tree';\nimport {Checks, getAllRouteGuards} from './utils/preactivation';\n\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || !!ngDevMode;\n\n/**\n * @description\n *\n * Options that modify the `Router` URL.\n * Supply an object containing any of these properties to a `Router` navigation function to\n * control how the target URL should be constructed.\n *\n * @see [Router.navigate() method](api/router/Router#navigate)\n * @see [Router.createUrlTree() method](api/router/Router#createurltree)\n * @see [Routing and Navigation guide](guide/router)\n *\n * @publicApi\n */\nexport interface UrlCreationOptions {\n  /**\n   * Specifies a root URI to use for relative navigation.\n   *\n   * For example, consider the following route configuration where the parent route\n   * has two children.\n   *\n   * ```\n   * [{\n   *   path: 'parent',\n   *   component: ParentComponent,\n   *   children: [{\n   *     path: 'list',\n   *     component: ListComponent\n   *   },{\n   *     path: 'child',\n   *     component: ChildComponent\n   *   }]\n   * }]\n   * ```\n   *\n   * The following `go()` function navigates to the `list` route by\n   * interpreting the destination URI as relative to the activated `child`  route\n   *\n   * ```\n   *  @Component({...})\n   *  class ChildComponent {\n   *    constructor(private router: Router, private route: ActivatedRoute) {}\n   *\n   *    go() {\n   *      router.navigate(['../list'], { relativeTo: this.route });\n   *    }\n   *  }\n   * ```\n   *\n   * A value of `null` or `undefined` indicates that the navigation commands should be applied\n   * relative to the root.\n   */\n  relativeTo?: ActivatedRoute|null;\n\n  /**\n   * Sets query parameters to the URL.\n   *\n   * ```\n   * // Navigate to /results?page=1\n   * router.navigate(['/results'], { queryParams: { page: 1 } });\n   * ```\n   */\n  queryParams?: Params|null;\n\n  /**\n   * Sets the hash fragment for the URL.\n   *\n   * ```\n   * // Navigate to /results#top\n   * router.navigate(['/results'], { fragment: 'top' });\n   * ```\n   */\n  fragment?: string;\n\n  /**\n   * How to handle query parameters in the router link for the next navigation.\n   * One of:\n   * * `preserve` : Preserve current parameters.\n   * * `merge` : Merge new with current parameters.\n   *\n   * The \"preserve\" option discards any new query params:\n   * ```\n   * // from /view1?page=1 to/view2?page=1\n   * router.navigate(['/view2'], { queryParams: { page: 2 },  queryParamsHandling: \"preserve\"\n   * });\n   * ```\n   * The \"merge\" option appends new query params to the params from the current URL:\n   * ```\n   * // from /view1?page=1 to/view2?page=1&otherKey=2\n   * router.navigate(['/view2'], { queryParams: { otherKey: 2 },  queryParamsHandling: \"merge\"\n   * });\n   * ```\n   * In case of a key collision between current parameters and those in the `queryParams` object,\n   * the new value is used.\n   *\n   */\n  queryParamsHandling?: QueryParamsHandling|null;\n\n  /**\n   * When true, preserves the URL fragment for the next navigation\n   *\n   * ```\n   * // Preserve fragment from /results#top to /view#top\n   * router.navigate(['/view'], { preserveFragment: true });\n   * ```\n   */\n  preserveFragment?: boolean;\n}\n\n/**\n * @description\n *\n * Options that modify the `Router` navigation strategy.\n * Supply an object containing any of these properties to a `Router` navigation function to\n * control how the target URL should be constructed or interpreted.\n *\n * @see [Router.navigate() method](api/router/Router#navigate)\n * @see [Router.navigateByUrl() method](api/router/Router#navigatebyurl)\n * @see [Router.createUrlTree() method](api/router/Router#createurltree)\n * @see [Routing and Navigation guide](guide/router)\n * @see UrlCreationOptions\n * @see NavigationBehaviorOptions\n *\n * @publicApi\n */\nexport interface NavigationExtras extends UrlCreationOptions, NavigationBehaviorOptions {}\n\nexport type RestoredState = {\n  [k: string]: any,\n  // TODO(#27607): Remove `navigationId` and `ɵrouterPageId` and move to `ng` or `ɵ` namespace.\n  navigationId: number,\n  // The `ɵ` prefix is there to reduce the chance of colliding with any existing user properties on\n  // the history state.\n  ɵrouterPageId?: number,\n};\n\n/**\n * Information about a navigation operation.\n * Retrieve the most recent navigation object with the\n * [Router.getCurrentNavigation() method](api/router/Router#getcurrentnavigation) .\n *\n * * *id* : The unique identifier of the current navigation.\n * * *initialUrl* : The target URL passed into the `Router#navigateByUrl()` call before navigation.\n * This is the value before the router has parsed or applied redirects to it.\n * * *extractedUrl* : The initial target URL after being parsed with `UrlSerializer.extract()`.\n * * *finalUrl* : The extracted URL after redirects have been applied.\n * This URL may not be available immediately, therefore this property can be `undefined`.\n * It is guaranteed to be set after the `RoutesRecognized` event fires.\n * * *trigger* : Identifies how this navigation was triggered.\n * -- 'imperative'--Triggered by `router.navigateByUrl` or `router.navigate`.\n * -- 'popstate'--Triggered by a popstate event.\n * -- 'hashchange'--Triggered by a hashchange event.\n * * *extras* : A `NavigationExtras` options object that controlled the strategy used for this\n * navigation.\n * * *previousNavigation* : The previously successful `Navigation` object. Only one previous\n * navigation is available, therefore this previous `Navigation` object has a `null` value for its\n * own `previousNavigation`.\n *\n * @publicApi\n */\nexport interface Navigation {\n  /**\n   * The unique identifier of the current navigation.\n   */\n  id: number;\n  /**\n   * The target URL passed into the `Router#navigateByUrl()` call before navigation. This is\n   * the value before the router has parsed or applied redirects to it.\n   */\n  initialUrl: UrlTree;\n  /**\n   * The initial target URL after being parsed with `UrlHandlingStrategy.extract()`.\n   */\n  extractedUrl: UrlTree;\n  /**\n   * The extracted URL after redirects have been applied.\n   * This URL may not be available immediately, therefore this property can be `undefined`.\n   * It is guaranteed to be set after the `RoutesRecognized` event fires.\n   */\n  finalUrl?: UrlTree;\n  /**\n   * Identifies how this navigation was triggered.\n   *\n   * * 'imperative'--Triggered by `router.navigateByUrl` or `router.navigate`.\n   * * 'popstate'--Triggered by a popstate event.\n   * * 'hashchange'--Triggered by a hashchange event.\n   */\n  trigger: 'imperative'|'popstate'|'hashchange';\n  /**\n   * Options that controlled the strategy used for this navigation.\n   * See `NavigationExtras`.\n   */\n  extras: NavigationExtras;\n  /**\n   * The previously successful `Navigation` object. Only one previous navigation\n   * is available, therefore this previous `Navigation` object has a `null` value\n   * for its own `previousNavigation`.\n   */\n  previousNavigation: Navigation|null;\n}\n\nexport interface NavigationTransition {\n  id: number;\n  targetPageId: number;\n  currentUrlTree: UrlTree;\n  extractedUrl: UrlTree;\n  currentRawUrl: UrlTree;\n  urlAfterRedirects?: UrlTree;\n  rawUrl: UrlTree;\n  extras: NavigationExtras;\n  resolve: any;\n  reject: any;\n  promise: Promise<boolean>;\n  source: NavigationTrigger;\n  restoredState: RestoredState|null;\n  currentSnapshot: RouterStateSnapshot;\n  targetSnapshot: RouterStateSnapshot|null;\n  currentRouterState: RouterState;\n  targetRouterState: RouterState|null;\n  guards: Checks;\n  guardsResult: boolean|UrlTree|null;\n}\n\n/**\n * The interface from the Router needed by the transitions. Used to avoid a circular dependency on\n * Router. This interface should be whittled down with future refactors. For example, we do not need\n * to get `UrlSerializer` from the Router. We can instead inject it in `NavigationTransitions`\n * directly.\n */\ninterface InternalRouterInterface {\n  browserUrlTree: UrlTree;\n  currentUrlTree: UrlTree;\n  rawUrlTree: UrlTree;\n  readonly routerState: RouterState;\n  errorHandler: ErrorHandler;\n  titleStrategy?: TitleStrategy;\n  navigated: boolean;\n  urlHandlingStrategy: UrlHandlingStrategy;\n  routeReuseStrategy: RouteReuseStrategy;\n  onSameUrlNavigation: 'reload'|'ignore';\n  paramsInheritanceStrategy: 'emptyOnly'|'always';\n  urlUpdateStrategy: 'deferred'|'eager';\n  serializeUrl(url: UrlTree): string;\n  config: Routes;\n  setBrowserUrl(url: UrlTree, t: NavigationTransition): void;\n  restoreHistory(t: NavigationTransition, restoringFromCaughtError?: boolean): void;\n  scheduleNavigation(\n      rawUrl: UrlTree, source: NavigationTrigger, restoredState: RestoredState|null,\n      extras: NavigationExtras,\n      priorPromise?: {resolve: any, reject: any, promise: Promise<boolean>}): Promise<boolean>;\n}\n\n@Injectable({providedIn: 'root'})\nexport class NavigationTransitions {\n  currentNavigation: Navigation|null = null;\n  lastSuccessfulNavigation: Navigation|null = null;\n  readonly events = new Subject<Event>();\n  private readonly configLoader = inject(RouterConfigLoader);\n  private readonly environmentInjector = inject(EnvironmentInjector);\n  private readonly urlSerializer = inject(UrlSerializer);\n  private readonly rootContexts = inject(ChildrenOutletContexts);\n  navigationId = 0;\n  get hasRequestedNavigation() {\n    return this.navigationId !== 0;\n  }\n  private transitions?: BehaviorSubject<NavigationTransition>;\n  /**\n   * Hook that enables you to pause navigation after the preactivation phase.\n   * Used by `RouterModule`.\n   *\n   * @internal\n   */\n  afterPreactivation: () => Observable<void> = () => of(void 0);\n  /** @internal */\n  rootComponentType: Type<any>|null = null;\n\n  constructor() {\n    const onLoadStart = (r: Route) => this.events.next(new RouteConfigLoadStart(r));\n    const onLoadEnd = (r: Route) => this.events.next(new RouteConfigLoadEnd(r));\n    this.configLoader.onLoadEndListener = onLoadEnd;\n    this.configLoader.onLoadStartListener = onLoadStart;\n  }\n\n  complete() {\n    this.transitions?.complete();\n  }\n\n  handleNavigationRequest(\n      request: Pick<\n          NavigationTransition,\n          'targetPageId'|'source'|'restoredState'|'currentUrlTree'|'currentRawUrl'|'rawUrl'|\n          'extras'|'resolve'|'reject'|'promise'|'currentSnapshot'|'currentRouterState'>) {\n    const id = ++this.navigationId;\n    this.transitions?.next({...this.transitions.value, ...request, id});\n  }\n\n  setupNavigations(router: InternalRouterInterface): Observable<NavigationTransition> {\n    this.transitions = new BehaviorSubject<NavigationTransition>({\n      id: 0,\n      targetPageId: 0,\n      currentUrlTree: router.currentUrlTree,\n      currentRawUrl: router.currentUrlTree,\n      extractedUrl: router.urlHandlingStrategy.extract(router.currentUrlTree),\n      urlAfterRedirects: router.urlHandlingStrategy.extract(router.currentUrlTree),\n      rawUrl: router.currentUrlTree,\n      extras: {},\n      resolve: null,\n      reject: null,\n      promise: Promise.resolve(true),\n      source: IMPERATIVE_NAVIGATION,\n      restoredState: null,\n      currentSnapshot: router.routerState.snapshot,\n      targetSnapshot: null,\n      currentRouterState: router.routerState,\n      targetRouterState: null,\n      guards: {canActivateChecks: [], canDeactivateChecks: []},\n      guardsResult: null,\n    });\n    return this.transitions.pipe(\n               filter(t => t.id !== 0),\n\n               // Extract URL\n               map(t =>\n                       ({...t, extractedUrl: router.urlHandlingStrategy.extract(t.rawUrl)} as\n                        NavigationTransition)),\n\n               // Using switchMap so we cancel executing navigations when a new one comes in\n               switchMap(overallTransitionState => {\n                 let completed = false;\n                 let errored = false;\n                 return of(overallTransitionState)\n                     .pipe(\n                         // Store the Navigation object\n                         tap(t => {\n                           this.currentNavigation = {\n                             id: t.id,\n                             initialUrl: t.rawUrl,\n                             extractedUrl: t.extractedUrl,\n                             trigger: t.source,\n                             extras: t.extras,\n                             previousNavigation: !this.lastSuccessfulNavigation ? null : {\n                               ...this.lastSuccessfulNavigation,\n                               previousNavigation: null,\n                             },\n                           };\n                         }),\n                         switchMap(t => {\n                           const browserUrlTree = router.browserUrlTree.toString();\n                           const urlTransition = !router.navigated ||\n                               t.extractedUrl.toString() !== browserUrlTree ||\n                               // Navigations which succeed or ones which fail and are cleaned up\n                               // correctly should result in `browserUrlTree` and `currentUrlTree`\n                               // matching. If this is not the case, assume something went wrong and\n                               // try processing the URL again.\n                               browserUrlTree !== router.currentUrlTree.toString();\n\n\n                           const onSameUrlNavigation =\n                               t.extras.onSameUrlNavigation ?? router.onSameUrlNavigation;\n                           if (!urlTransition && onSameUrlNavigation !== 'reload') {\n                             const reason = NG_DEV_MODE ?\n                                 `Navigation to ${\n                                     t.rawUrl} was ignored because it is the same as the current Router URL.` :\n                                 '';\n                             this.events.next(new NavigationSkipped(\n                                 t.id, router.serializeUrl(overallTransitionState.rawUrl), reason,\n                                 NavigationSkippedCode.IgnoredSameUrlNavigation));\n                             router.rawUrlTree = t.rawUrl;\n                             t.resolve(null);\n                             return EMPTY;\n                           }\n\n                           if (router.urlHandlingStrategy.shouldProcessUrl(t.rawUrl)) {\n                             // If the source of the navigation is from a browser event, the URL is\n                             // already updated. We already need to sync the internal state.\n                             if (isBrowserTriggeredNavigation(t.source)) {\n                               router.browserUrlTree = t.extractedUrl;\n                             }\n                             return of(t).pipe(\n                                 // Fire NavigationStart event\n                                 switchMap(t => {\n                                   const transition = this.transitions?.getValue();\n                                   this.events.next(new NavigationStart(\n                                       t.id, this.urlSerializer.serialize(t.extractedUrl), t.source,\n                                       t.restoredState));\n                                   if (transition !== this.transitions?.getValue()) {\n                                     return EMPTY;\n                                   }\n\n                                   // This delay is required to match old behavior that forced\n                                   // navigation to always be async\n                                   return Promise.resolve(t);\n                                 }),\n\n                                 // ApplyRedirects\n                                 applyRedirects(\n                                     this.environmentInjector, this.configLoader,\n                                     this.urlSerializer, router.config),\n\n                                 // Update the currentNavigation\n                                 // `urlAfterRedirects` is guaranteed to be set after this point\n                                 tap(t => {\n                                   this.currentNavigation = {\n                                     ...this.currentNavigation!,\n                                     finalUrl: t.urlAfterRedirects\n                                   };\n                                   overallTransitionState.urlAfterRedirects = t.urlAfterRedirects;\n                                 }),\n\n                                 // Recognize\n                                 recognize(\n                                     this.environmentInjector, this.rootComponentType,\n                                     router.config, this.urlSerializer,\n                                     router.paramsInheritanceStrategy),\n\n                                 // Update URL if in `eager` update mode\n                                 tap(t => {\n                                   overallTransitionState.targetSnapshot = t.targetSnapshot;\n                                   if (router.urlUpdateStrategy === 'eager') {\n                                     if (!t.extras.skipLocationChange) {\n                                       const rawUrl = router.urlHandlingStrategy.merge(\n                                           t.urlAfterRedirects!, t.rawUrl);\n                                       router.setBrowserUrl(rawUrl, t);\n                                     }\n                                     router.browserUrlTree = t.urlAfterRedirects!;\n                                   }\n\n                                   // Fire RoutesRecognized\n                                   const routesRecognized = new RoutesRecognized(\n                                       t.id, this.urlSerializer.serialize(t.extractedUrl),\n                                       this.urlSerializer.serialize(t.urlAfterRedirects!),\n                                       t.targetSnapshot!);\n                                   this.events.next(routesRecognized);\n                                 }));\n                           } else if (\n                               urlTransition &&\n                               router.urlHandlingStrategy.shouldProcessUrl(router.rawUrlTree)) {\n                             /* When the current URL shouldn't be processed, but the previous one\n                              * was, we handle this \"error condition\" by navigating to the\n                              * previously successful URL, but leaving the URL intact.*/\n                             const {id, extractedUrl, source, restoredState, extras} = t;\n                             const navStart = new NavigationStart(\n                                 id, this.urlSerializer.serialize(extractedUrl), source,\n                                 restoredState);\n                             this.events.next(navStart);\n                             const targetSnapshot =\n                                 createEmptyState(extractedUrl, this.rootComponentType).snapshot;\n\n                             overallTransitionState = {\n                               ...t,\n                               targetSnapshot,\n                               urlAfterRedirects: extractedUrl,\n                               extras: {...extras, skipLocationChange: false, replaceUrl: false},\n                             };\n                             return of(overallTransitionState);\n                           } else {\n                             /* When neither the current or previous URL can be processed, do\n                              * nothing other than update router's internal reference to the\n                              * current \"settled\" URL. This way the next navigation will be coming\n                              * from the current URL in the browser.\n                              */\n                             const reason = NG_DEV_MODE ?\n                                 `Navigation was ignored because the UrlHandlingStrategy` +\n                                     ` indicated neither the current URL ${\n                                         router.rawUrlTree} nor target URL ${\n                                         t.rawUrl} should be processed.` :\n                                 '';\n                             this.events.next(new NavigationSkipped(\n                                 t.id, router.serializeUrl(overallTransitionState.extractedUrl),\n                                 reason, NavigationSkippedCode.IgnoredByUrlHandlingStrategy));\n                             router.rawUrlTree = t.rawUrl;\n                             t.resolve(null);\n                             return EMPTY;\n                           }\n                         }),\n\n                         // --- GUARDS ---\n                         tap(t => {\n                           const guardsStart = new GuardsCheckStart(\n                               t.id, this.urlSerializer.serialize(t.extractedUrl),\n                               this.urlSerializer.serialize(t.urlAfterRedirects!),\n                               t.targetSnapshot!);\n                           this.events.next(guardsStart);\n                         }),\n\n                         map(t => {\n                           overallTransitionState = {\n                             ...t,\n                             guards: getAllRouteGuards(\n                                 t.targetSnapshot!, t.currentSnapshot, this.rootContexts)\n                           };\n                           return overallTransitionState;\n                         }),\n\n                         checkGuards(\n                             this.environmentInjector, (evt: Event) => this.events.next(evt)),\n                         tap(t => {\n                           overallTransitionState.guardsResult = t.guardsResult;\n                           if (isUrlTree(t.guardsResult)) {\n                             throw redirectingNavigationError(this.urlSerializer, t.guardsResult);\n                           }\n\n                           const guardsEnd = new GuardsCheckEnd(\n                               t.id, this.urlSerializer.serialize(t.extractedUrl),\n                               this.urlSerializer.serialize(t.urlAfterRedirects!),\n                               t.targetSnapshot!, !!t.guardsResult);\n                           this.events.next(guardsEnd);\n                         }),\n\n                         filter(t => {\n                           if (!t.guardsResult) {\n                             router.restoreHistory(t);\n                             this.cancelNavigationTransition(\n                                 t, '', NavigationCancellationCode.GuardRejected);\n                             return false;\n                           }\n                           return true;\n                         }),\n\n                         // --- RESOLVE ---\n                         switchTap(t => {\n                           if (t.guards.canActivateChecks.length) {\n                             return of(t).pipe(\n                                 tap(t => {\n                                   const resolveStart = new ResolveStart(\n                                       t.id, this.urlSerializer.serialize(t.extractedUrl),\n                                       this.urlSerializer.serialize(t.urlAfterRedirects!),\n                                       t.targetSnapshot!);\n                                   this.events.next(resolveStart);\n                                 }),\n                                 switchMap(t => {\n                                   let dataResolved = false;\n                                   return of(t).pipe(\n                                       resolveData(\n                                           router.paramsInheritanceStrategy,\n                                           this.environmentInjector),\n                                       tap({\n                                         next: () => dataResolved = true,\n                                         complete: () => {\n                                           if (!dataResolved) {\n                                             router.restoreHistory(t);\n                                             this.cancelNavigationTransition(\n                                                 t,\n                                                 NG_DEV_MODE ?\n                                                     `At least one route resolver didn't emit any value.` :\n                                                     '',\n                                                 NavigationCancellationCode.NoDataFromResolver);\n                                           }\n                                         }\n                                       }),\n                                   );\n                                 }),\n                                 tap(t => {\n                                   const resolveEnd = new ResolveEnd(\n                                       t.id, this.urlSerializer.serialize(t.extractedUrl),\n                                       this.urlSerializer.serialize(t.urlAfterRedirects!),\n                                       t.targetSnapshot!);\n                                   this.events.next(resolveEnd);\n                                 }));\n                           }\n                           return undefined;\n                         }),\n\n                         // --- LOAD COMPONENTS ---\n                         switchTap((t: NavigationTransition) => {\n                           const loadComponents =\n                               (route: ActivatedRouteSnapshot): Array<Observable<void>> => {\n                                 const loaders: Array<Observable<void>> = [];\n                                 if (route.routeConfig?.loadComponent &&\n                                     !route.routeConfig._loadedComponent) {\n                                   loaders.push(this.configLoader.loadComponent(route.routeConfig)\n                                                    .pipe(\n                                                        tap(loadedComponent => {\n                                                          route.component = loadedComponent;\n                                                        }),\n                                                        map(() => void 0),\n                                                        ));\n                                 }\n                                 for (const child of route.children) {\n                                   loaders.push(...loadComponents(child));\n                                 }\n                                 return loaders;\n                               };\n                           return combineLatest(loadComponents(t.targetSnapshot!.root))\n                               .pipe(defaultIfEmpty(), take(1));\n                         }),\n\n                         switchTap(() => this.afterPreactivation()),\n\n                         map((t: NavigationTransition) => {\n                           const targetRouterState = createRouterState(\n                               router.routeReuseStrategy, t.targetSnapshot!, t.currentRouterState);\n                           overallTransitionState = {...t, targetRouterState};\n                           return (overallTransitionState);\n                         }),\n\n                         /* Once here, we are about to activate synchronously. The assumption is\n                            this will succeed, and user code may read from the Router service.\n                            Therefore before activation, we need to update router properties storing\n                            the current URL and the RouterState, as well as updated the browser URL.\n                            All this should happen *before* activating. */\n                         tap((t: NavigationTransition) => {\n                           router.currentUrlTree = t.urlAfterRedirects!;\n                           router.rawUrlTree =\n                               router.urlHandlingStrategy.merge(t.urlAfterRedirects!, t.rawUrl);\n\n                           (router as {routerState: RouterState}).routerState =\n                               t.targetRouterState!;\n\n                           if (router.urlUpdateStrategy === 'deferred') {\n                             if (!t.extras.skipLocationChange) {\n                               router.setBrowserUrl(router.rawUrlTree, t);\n                             }\n                             router.browserUrlTree = t.urlAfterRedirects!;\n                           }\n                         }),\n\n                         activateRoutes(\n                             this.rootContexts, router.routeReuseStrategy,\n                             (evt: Event) => this.events.next(evt)),\n\n                         tap({\n                           next: (t: NavigationTransition) => {\n                             completed = true;\n                             this.lastSuccessfulNavigation = this.currentNavigation;\n                             router.navigated = true;\n                             this.events.next(new NavigationEnd(\n                                 t.id, this.urlSerializer.serialize(t.extractedUrl),\n                                 this.urlSerializer.serialize(router.currentUrlTree)));\n                             router.titleStrategy?.updateTitle(t.targetRouterState!.snapshot);\n                             t.resolve(true);\n                           },\n                           complete: () => {\n                             completed = true;\n                           }\n                         }),\n                         finalize(() => {\n                           /* When the navigation stream finishes either through error or success,\n                            * we set the `completed` or `errored` flag. However, there are some\n                            * situations where we could get here without either of those being set.\n                            * For instance, a redirect during NavigationStart. Therefore, this is a\n                            * catch-all to make sure the NavigationCancel event is fired when a\n                            * navigation gets cancelled but not caught by other means. */\n                           if (!completed && !errored) {\n                             const cancelationReason = NG_DEV_MODE ?\n                                 `Navigation ID ${\n                                     overallTransitionState\n                                         .id} is not equal to the current navigation id ${\n                                     this.navigationId}` :\n                                 '';\n                             this.cancelNavigationTransition(\n                                 overallTransitionState, cancelationReason,\n                                 NavigationCancellationCode.SupersededByNewNavigation);\n                           }\n                           // Only clear current navigation if it is still set to the one that\n                           // finalized.\n                           if (this.currentNavigation?.id === overallTransitionState.id) {\n                             this.currentNavigation = null;\n                           }\n                         }),\n                         catchError((e) => {\n                           errored = true;\n                           /* This error type is issued during Redirect, and is handled as a\n                            * cancellation rather than an error. */\n                           if (isNavigationCancelingError(e)) {\n                             if (!isRedirectingNavigationCancelingError(e)) {\n                               // Set property only if we're not redirecting. If we landed on a page\n                               // and redirect to `/` route, the new navigation is going to see the\n                               // `/` isn't a change from the default currentUrlTree and won't\n                               // navigate. This is only applicable with initial navigation, so\n                               // setting `navigated` only when not redirecting resolves this\n                               // scenario.\n                               router.navigated = true;\n                               router.restoreHistory(overallTransitionState, true);\n                             }\n                             const navCancel = new NavigationCancel(\n                                 overallTransitionState.id,\n                                 this.urlSerializer.serialize(overallTransitionState.extractedUrl),\n                                 e.message, e.cancellationCode);\n                             this.events.next(navCancel);\n\n                             // When redirecting, we need to delay resolving the navigation\n                             // promise and push it to the redirect navigation\n                             if (!isRedirectingNavigationCancelingError(e)) {\n                               overallTransitionState.resolve(false);\n                             } else {\n                               const mergedTree =\n                                   router.urlHandlingStrategy.merge(e.url, router.rawUrlTree);\n                               const extras = {\n                                 skipLocationChange:\n                                     overallTransitionState.extras.skipLocationChange,\n                                 // The URL is already updated at this point if we have 'eager' URL\n                                 // updates or if the navigation was triggered by the browser (back\n                                 // button, URL bar, etc). We want to replace that item in history\n                                 // if the navigation is rejected.\n                                 replaceUrl: router.urlUpdateStrategy === 'eager' ||\n                                     isBrowserTriggeredNavigation(overallTransitionState.source)\n                               };\n\n                               router.scheduleNavigation(\n                                   mergedTree, IMPERATIVE_NAVIGATION, null, extras, {\n                                     resolve: overallTransitionState.resolve,\n                                     reject: overallTransitionState.reject,\n                                     promise: overallTransitionState.promise\n                                   });\n                             }\n\n                             /* All other errors should reset to the router's internal URL reference\n                              * to the pre-error state. */\n                           } else {\n                             router.restoreHistory(overallTransitionState, true);\n                             const navError = new NavigationError(\n                                 overallTransitionState.id,\n                                 this.urlSerializer.serialize(overallTransitionState.extractedUrl),\n                                 e, overallTransitionState.targetSnapshot ?? undefined);\n                             this.events.next(navError);\n                             try {\n                               overallTransitionState.resolve(router.errorHandler(e));\n                             } catch (ee) {\n                               overallTransitionState.reject(ee);\n                             }\n                           }\n                           return EMPTY;\n                         }));\n                 // casting because `pipe` returns observable({}) when called with 8+ arguments\n               })) as Observable<NavigationTransition>;\n  }\n\n  private cancelNavigationTransition(\n      t: NavigationTransition, reason: string, code: NavigationCancellationCode) {\n    const navCancel =\n        new NavigationCancel(t.id, this.urlSerializer.serialize(t.extractedUrl), reason, code);\n    this.events.next(navCancel);\n    t.resolve(false);\n  }\n}\n\nexport function isBrowserTriggeredNavigation(source: NavigationTrigger) {\n  return source !== IMPERATIVE_NAVIGATION;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {inject, Injectable} from '@angular/core';\nimport {Title} from '@angular/platform-browser';\n\nimport {ActivatedRouteSnapshot, RouterStateSnapshot} from './router_state';\nimport {PRIMARY_OUTLET, RouteTitleKey} from './shared';\n\n/**\n * Provides a strategy for setting the page title after a router navigation.\n *\n * The built-in implementation traverses the router state snapshot and finds the deepest primary\n * outlet with `title` property. Given the `Routes` below, navigating to\n * `/base/child(popup:aux)` would result in the document title being set to \"child\".\n * ```\n * [\n *   {path: 'base', title: 'base', children: [\n *     {path: 'child', title: 'child'},\n *   ],\n *   {path: 'aux', outlet: 'popup', title: 'popupTitle'}\n * ]\n * ```\n *\n * This class can be used as a base class for custom title strategies. That is, you can create your\n * own class that extends the `TitleStrategy`. Note that in the above example, the `title`\n * from the named outlet is never used. However, a custom strategy might be implemented to\n * incorporate titles in named outlets.\n *\n * @publicApi\n * @see [Page title guide](guide/router#setting-the-page-title)\n */\n@Injectable({providedIn: 'root', useFactory: () => inject(DefaultTitleStrategy)})\nexport abstract class TitleStrategy {\n  /** Performs the application title update. */\n  abstract updateTitle(snapshot: RouterStateSnapshot): void;\n\n  /**\n   * @returns The `title` of the deepest primary route.\n   */\n  buildTitle(snapshot: RouterStateSnapshot): string|undefined {\n    let pageTitle: string|undefined;\n    let route: ActivatedRouteSnapshot|undefined = snapshot.root;\n    while (route !== undefined) {\n      pageTitle = this.getResolvedTitleForRoute(route) ?? pageTitle;\n      route = route.children.find(child => child.outlet === PRIMARY_OUTLET);\n    }\n    return pageTitle;\n  }\n\n  /**\n   * Given an `ActivatedRouteSnapshot`, returns the final value of the\n   * `Route.title` property, which can either be a static string or a resolved value.\n   */\n  getResolvedTitleForRoute(snapshot: ActivatedRouteSnapshot) {\n    return snapshot.data[RouteTitleKey];\n  }\n}\n\n/**\n * The default `TitleStrategy` used by the router that updates the title using the `Title` service.\n */\n@Injectable({providedIn: 'root'})\nexport class DefaultTitleStrategy extends TitleStrategy {\n  constructor(readonly title: Title) {\n    super();\n  }\n\n  /**\n   * Sets the title of the browser to the given value.\n   *\n   * @param title The `pageTitle` from the deepest primary route.\n   */\n  override updateTitle(snapshot: RouterStateSnapshot): void {\n    const title = this.buildTitle(snapshot);\n    if (title !== undefined) {\n      this.title.setTitle(title);\n    }\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ComponentRef, inject, Injectable} from '@angular/core';\n\nimport {OutletContext} from './router_outlet_context';\nimport {ActivatedRoute, ActivatedRouteSnapshot} from './router_state';\nimport {TreeNode} from './utils/tree';\n\n/**\n * @description\n *\n * Represents the detached route tree.\n *\n * This is an opaque value the router will give to a custom route reuse strategy\n * to store and retrieve later on.\n *\n * @publicApi\n */\nexport type DetachedRouteHandle = {};\n\n/** @internal */\nexport type DetachedRouteHandleInternal = {\n  contexts: Map<string, OutletContext>,\n  componentRef: ComponentRef<any>,\n  route: TreeNode<ActivatedRoute>,\n};\n\n/**\n * @description\n *\n * Provides a way to customize when activated routes get reused.\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root', useFactory: () => inject(DefaultRouteReuseStrategy)})\nexport abstract class RouteReuseStrategy {\n  /** Determines if this route (and its subtree) should be detached to be reused later */\n  abstract shouldDetach(route: ActivatedRouteSnapshot): boolean;\n\n  /**\n   * Stores the detached route.\n   *\n   * Storing a `null` value should erase the previously stored value.\n   */\n  abstract store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle|null): void;\n\n  /** Determines if this route (and its subtree) should be reattached */\n  abstract shouldAttach(route: ActivatedRouteSnapshot): boolean;\n\n  /** Retrieves the previously stored route */\n  abstract retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle|null;\n\n  /** Determines if a route should be reused */\n  abstract shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean;\n}\n\n/**\n * @description\n *\n * This base route reuse strategy only reuses routes when the matched router configs are\n * identical. This prevents components from being destroyed and recreated\n * when just the route parameters, query parameters or fragment change\n * (that is, the existing component is _reused_).\n *\n * This strategy does not store any routes for later reuse.\n *\n * Angular uses this strategy by default.\n *\n *\n * It can be used as a base class for custom route reuse strategies, i.e. you can create your own\n * class that extends the `BaseRouteReuseStrategy` one.\n * @publicApi\n */\nexport abstract class BaseRouteReuseStrategy implements RouteReuseStrategy {\n  /**\n   * Whether the given route should detach for later reuse.\n   * Always returns false for `BaseRouteReuseStrategy`.\n   * */\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\n    return false;\n  }\n\n  /**\n   * A no-op; the route is never stored since this strategy never detaches routes for later re-use.\n   */\n  store(route: ActivatedRouteSnapshot, detachedTree: DetachedRouteHandle): void {}\n\n  /** Returns `false`, meaning the route (and its subtree) is never reattached */\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\n    return false;\n  }\n\n  /** Returns `null` because this strategy does not store routes for later re-use. */\n  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle|null {\n    return null;\n  }\n\n  /**\n   * Determines if a route should be reused.\n   * This strategy returns `true` when the future route config and current route config are\n   * identical.\n   */\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n    return future.routeConfig === curr.routeConfig;\n  }\n}\n\n@Injectable({providedIn: 'root'})\nexport class DefaultRouteReuseStrategy extends BaseRouteReuseStrategy {\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {InjectionToken} from '@angular/core';\n\nimport {OnSameUrlNavigation} from './models';\nimport {UrlSerializer, UrlTree} from './url_tree';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || !!ngDevMode;\n\n/**\n * Error handler that is invoked when a navigation error occurs.\n *\n * If the handler returns a value, the navigation Promise is resolved with this value.\n * If the handler throws an exception, the navigation Promise is rejected with\n * the exception.\n *\n * @publicApi\n */\nexport type ErrorHandler = (error: any) => any;\n\n/**\n * Allowed values in an `ExtraOptions` object that configure\n * when the router performs the initial navigation operation.\n *\n * * 'enabledNonBlocking' - (default) The initial navigation starts after the\n * root component has been created. The bootstrap is not blocked on the completion of the initial\n * navigation.\n * * 'enabledBlocking' - The initial navigation starts before the root component is created.\n * The bootstrap is blocked until the initial navigation is complete. This value is required\n * for [server-side rendering](guide/universal) to work.\n * * 'disabled' - The initial navigation is not performed. The location listener is set up before\n * the root component gets created. Use if there is a reason to have\n * more control over when the router starts its initial navigation due to some complex\n * initialization logic.\n *\n * @see `forRoot()`\n *\n * @publicApi\n */\nexport type InitialNavigation = 'disabled'|'enabledBlocking'|'enabledNonBlocking';\n\n/**\n * Extra configuration options that can be used with the `withRouterConfig` function.\n *\n * @publicApi\n */\nexport interface RouterConfigOptions {\n  /**\n   * Configures how the Router attempts to restore state when a navigation is cancelled.\n   *\n   * 'replace' - Always uses `location.replaceState` to set the browser state to the state of the\n   * router before the navigation started. This means that if the URL of the browser is updated\n   * _before_ the navigation is canceled, the Router will simply replace the item in history rather\n   * than trying to restore to the previous location in the session history. This happens most\n   * frequently with `urlUpdateStrategy: 'eager'` and navigations with the browser back/forward\n   * buttons.\n   *\n   * 'computed' - Will attempt to return to the same index in the session history that corresponds\n   * to the Angular route when the navigation gets cancelled. For example, if the browser back\n   * button is clicked and the navigation is cancelled, the Router will trigger a forward navigation\n   * and vice versa.\n   *\n   * Note: the 'computed' option is incompatible with any `UrlHandlingStrategy` which only\n   * handles a portion of the URL because the history restoration navigates to the previous place in\n   * the browser history rather than simply resetting a portion of the URL.\n   *\n   * The default value is `replace` when not set.\n   */\n  canceledNavigationResolution?: 'replace'|'computed';\n\n  /**\n   * Configures the default for handling a navigation request to the current URL.\n   *\n   * If unset, the `Router` will use `'ignore'`.\n   *\n   * @see `OnSameUrlNavigation`\n   */\n  onSameUrlNavigation?: OnSameUrlNavigation;\n\n  /**\n   * Defines how the router merges parameters, data, and resolved data from parent to child\n   * routes. By default ('emptyOnly'), inherits parent parameters only for\n   * path-less or component-less routes.\n   *\n   * Set to 'always' to enable unconditional inheritance of parent parameters.\n   *\n   * Note that when dealing with matrix parameters, \"parent\" refers to the parent `Route`\n   * config which does not necessarily mean the \"URL segment to the left\". When the `Route` `path`\n   * contains multiple segments, the matrix parameters must appear on the last segment. For example,\n   * matrix parameters for `{path: 'a/b', component: MyComp}` should appear as `a/b;foo=bar` and not\n   * `a;foo=bar/b`.\n   *\n   */\n  paramsInheritanceStrategy?: 'emptyOnly'|'always';\n\n  /**\n   * Defines when the router updates the browser URL. By default ('deferred'),\n   * update after successful navigation.\n   * Set to 'eager' if prefer to update the URL at the beginning of navigation.\n   * Updating the URL early allows you to handle a failure of navigation by\n   * showing an error message with the URL that failed.\n   */\n  urlUpdateStrategy?: 'deferred'|'eager';\n}\n\n/**\n * Configuration options for the scrolling feature which can be used with `withInMemoryScrolling`\n * function.\n *\n * @publicApi\n */\nexport interface InMemoryScrollingOptions {\n  /**\n   * When set to 'enabled', scrolls to the anchor element when the URL has a fragment.\n   * Anchor scrolling is disabled by default.\n   *\n   * Anchor scrolling does not happen on 'popstate'. Instead, we restore the position\n   * that we stored or scroll to the top.\n   */\n  anchorScrolling?: 'disabled'|'enabled';\n\n  /**\n   * Configures if the scroll position needs to be restored when navigating back.\n   *\n   * * 'disabled'- (Default) Does nothing. Scroll position is maintained on navigation.\n   * * 'top'- Sets the scroll position to x = 0, y = 0 on all navigation.\n   * * 'enabled'- Restores the previous scroll position on backward navigation, else sets the\n   * position to the anchor if one is provided, or sets the scroll position to [0, 0] (forward\n   * navigation). This option will be the default in the future.\n   *\n   * You can implement custom scroll restoration behavior by adapting the enabled behavior as\n   * in the following example.\n   *\n   * ```typescript\n   * class AppComponent {\n   *   movieData: any;\n   *\n   *   constructor(private router: Router, private viewportScroller: ViewportScroller,\n   * changeDetectorRef: ChangeDetectorRef) {\n   *   router.events.pipe(filter((event: Event): event is Scroll => event instanceof Scroll)\n   *     ).subscribe(e => {\n   *       fetch('http://example.com/movies.json').then(response => {\n   *         this.movieData = response.json();\n   *         // update the template with the data before restoring scroll\n   *         changeDetectorRef.detectChanges();\n   *\n   *         if (e.position) {\n   *           viewportScroller.scrollToPosition(e.position);\n   *         }\n   *       });\n   *     });\n   *   }\n   * }\n   * ```\n   */\n  scrollPositionRestoration?: 'disabled'|'enabled'|'top';\n}\n\n/**\n * A set of configuration options for a router module, provided in the\n * `forRoot()` method.\n *\n * @see `forRoot()`\n *\n *\n * @publicApi\n */\nexport interface ExtraOptions extends InMemoryScrollingOptions, RouterConfigOptions {\n  /**\n   * When true, log all internal navigation events to the console.\n   * Use for debugging.\n   */\n  enableTracing?: boolean;\n\n  /**\n   * When true, enable the location strategy that uses the URL fragment\n   * instead of the history API.\n   */\n  useHash?: boolean;\n\n  /**\n   * One of `enabled`, `enabledBlocking`, `enabledNonBlocking` or `disabled`.\n   * When set to `enabled` or `enabledBlocking`, the initial navigation starts before the root\n   * component is created. The bootstrap is blocked until the initial navigation is complete. This\n   * value is required for [server-side rendering](guide/universal) to work. When set to\n   * `enabledNonBlocking`, the initial navigation starts after the root component has been created.\n   * The bootstrap is not blocked on the completion of the initial navigation. When set to\n   * `disabled`, the initial navigation is not performed. The location listener is set up before the\n   * root component gets created. Use if there is a reason to have more control over when the router\n   * starts its initial navigation due to some complex initialization logic.\n   */\n  initialNavigation?: InitialNavigation;\n\n  /**\n   * A custom error handler for failed navigations.\n   * If the handler returns a value, the navigation Promise is resolved with this value.\n   * If the handler throws an exception, the navigation Promise is rejected with the exception.\n   *\n   */\n  errorHandler?: ErrorHandler;\n\n  /**\n   * Configures a preloading strategy.\n   * One of `PreloadAllModules` or `NoPreloading` (the default).\n   */\n  preloadingStrategy?: any;\n\n  /**\n   * Configures the scroll offset the router will use when scrolling to an element.\n   *\n   * When given a tuple with x and y position value,\n   * the router uses that offset each time it scrolls.\n   * When given a function, the router invokes the function every time\n   * it restores scroll position.\n   */\n  scrollOffset?: [number, number]|(() => [number, number]);\n\n  /**\n   * A custom handler for malformed URI errors. The handler is invoked when `encodedURI` contains\n   * invalid character sequences.\n   * The default implementation is to redirect to the root URL, dropping\n   * any path or parameter information. The function takes three parameters:\n   *\n   * - `'URIError'` - Error thrown when parsing a bad URL.\n   * - `'UrlSerializer'` - UrlSerializer that’s configured with the router.\n   * - `'url'` -  The malformed URL that caused the URIError\n   * */\n  malformedUriErrorHandler?:\n      (error: URIError, urlSerializer: UrlSerializer, url: string) => UrlTree;\n}\n\n/**\n * A [DI token](guide/glossary/#di-token) for the router service.\n *\n * @publicApi\n */\nexport const ROUTER_CONFIGURATION =\n    new InjectionToken<ExtraOptions>(NG_DEV_MODE ? 'router config' : '', {\n      providedIn: 'root',\n      factory: () => ({}),\n    });\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {inject, Injectable} from '@angular/core';\n\nimport {UrlTree} from './url_tree';\n\n/**\n * @description\n *\n * Provides a way to migrate AngularJS applications to Angular.\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root', useFactory: () => inject(DefaultUrlHandlingStrategy)})\nexport abstract class UrlHandlingStrategy {\n  /**\n   * Tells the router if this URL should be processed.\n   *\n   * When it returns true, the router will execute the regular navigation.\n   * When it returns false, the router will set the router state to an empty state.\n   * As a result, all the active components will be destroyed.\n   *\n   */\n  abstract shouldProcessUrl(url: UrlTree): boolean;\n\n  /**\n   * Extracts the part of the URL that should be handled by the router.\n   * The rest of the URL will remain untouched.\n   */\n  abstract extract(url: UrlTree): UrlTree;\n\n  /**\n   * Merges the URL fragment with the rest of the URL.\n   */\n  abstract merge(newUrlPart: UrlTree, rawUrl: UrlTree): UrlTree;\n}\n\n/**\n * @publicApi\n */\n@Injectable({providedIn: 'root'})\nexport class DefaultUrlHandlingStrategy implements UrlHandlingStrategy {\n  shouldProcessUrl(url: UrlTree): boolean {\n    return true;\n  }\n  extract(url: UrlTree): UrlTree {\n    return url;\n  }\n  merge(newUrlPart: UrlTree, wholeUrl: UrlTree): UrlTree {\n    return newUrlPart;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Location} from '@angular/common';\nimport {Compiler, inject, Injectable, Injector, NgZone, Type, ɵConsole as Console, ɵRuntimeError as RuntimeError} from '@angular/core';\nimport {BehaviorSubject, Observable, of, SubscriptionLike} from 'rxjs';\n\nimport {CreateUrlTreeStrategy} from './create_url_tree_strategy';\nimport {RuntimeErrorCode} from './errors';\nimport {Event, IMPERATIVE_NAVIGATION, NavigationTrigger} from './events';\nimport {NavigationBehaviorOptions, OnSameUrlNavigation, Routes} from './models';\nimport {Navigation, NavigationExtras, NavigationTransition, NavigationTransitions, RestoredState, UrlCreationOptions} from './navigation_transition';\nimport {TitleStrategy} from './page_title_strategy';\nimport {RouteReuseStrategy} from './route_reuse_strategy';\nimport {ErrorHandler, ExtraOptions, ROUTER_CONFIGURATION} from './router_config';\nimport {ROUTES} from './router_config_loader';\nimport {ChildrenOutletContexts} from './router_outlet_context';\nimport {createEmptyState, RouterState} from './router_state';\nimport {Params} from './shared';\nimport {UrlHandlingStrategy} from './url_handling_strategy';\nimport {containsTree, IsActiveMatchOptions, isUrlTree, UrlSerializer, UrlTree} from './url_tree';\nimport {flatten} from './utils/collection';\nimport {standardizeConfig, validateConfig} from './utils/config';\n\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || !!ngDevMode;\n\nfunction defaultErrorHandler(error: any): any {\n  throw error;\n}\n\nfunction defaultMalformedUriErrorHandler(\n    error: URIError, urlSerializer: UrlSerializer, url: string): UrlTree {\n  return urlSerializer.parse('/');\n}\n\n/**\n * The equivalent `IsActiveMatchOptions` options for `Router.isActive` is called with `true`\n * (exact = true).\n */\nexport const exactMatchOptions: IsActiveMatchOptions = {\n  paths: 'exact',\n  fragment: 'ignored',\n  matrixParams: 'ignored',\n  queryParams: 'exact'\n};\n\n/**\n * The equivalent `IsActiveMatchOptions` options for `Router.isActive` is called with `false`\n * (exact = false).\n */\nexport const subsetMatchOptions: IsActiveMatchOptions = {\n  paths: 'subset',\n  fragment: 'ignored',\n  matrixParams: 'ignored',\n  queryParams: 'subset'\n};\n\n/**\n * @description\n *\n * A service that provides navigation among views and URL manipulation capabilities.\n *\n * @see `Route`.\n * @see [Routing and Navigation Guide](guide/router).\n *\n * @ngModule RouterModule\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root'})\nexport class Router {\n  /**\n   * Represents the activated `UrlTree` that the `Router` is configured to handle (through\n   * `UrlHandlingStrategy`). That is, after we find the route config tree that we're going to\n   * activate, run guards, and are just about to activate the route, we set the currentUrlTree.\n   *\n   * This should match the `browserUrlTree` when a navigation succeeds. If the\n   * `UrlHandlingStrategy.shouldProcessUrl` is `false`, only the `browserUrlTree` is updated.\n   * @internal\n   */\n  currentUrlTree: UrlTree;\n  /**\n   * Meant to represent the entire browser url after a successful navigation. In the life of a\n   * navigation transition:\n   * 1. The rawUrl represents the full URL that's being navigated to\n   * 2. We apply redirects, which might only apply to _part_ of the URL (due to\n   * `UrlHandlingStrategy`).\n   * 3. Right before activation (because we assume activation will succeed), we update the\n   * rawUrlTree to be a combination of the urlAfterRedirects (again, this might only apply to part\n   * of the initial url) and the rawUrl of the transition (which was the original navigation url in\n   * its full form).\n   * @internal\n   *\n   * Note that this is _only_ here to support `UrlHandlingStrategy.extract` and\n   * `UrlHandlingStrategy.shouldProcessUrl`. If those didn't exist, we could get by with\n   * `currentUrlTree` alone. If a new Router were to be provided (i.e. one that works with the\n   * browser navigation API), we should think about whether this complexity should be carried over.\n   *\n   * - extract: `rawUrlTree` is needed because `extract` may only return part\n   * of the navigation URL. Thus, `currentUrlTree` may only represent _part_ of the browser URL.\n   * When a navigation gets cancelled and we need to reset the URL or a new navigation occurs, we\n   * need to know the _whole_ browser URL, not just the part handled by UrlHandlingStrategy.\n   * - shouldProcessUrl: When this returns `false`, the router just ignores the navigation but still\n   * updates the `rawUrlTree` with the assumption that the navigation was caused by the location\n   * change listener due to a URL update by the AngularJS router. In this case, we still need to\n   * know what the browser's URL is for future navigations.\n   *\n   */\n  rawUrlTree: UrlTree;\n  /**\n   * Meant to represent the part of the browser url that the `Router` is set up to handle (via the\n   * `UrlHandlingStrategy`). This value is updated immediately after the browser url is updated (or\n   * the browser url update is skipped via `skipLocationChange`). With that, note that\n   * `browserUrlTree` _may not_ reflect the actual browser URL for two reasons:\n   *\n   * 1. `UrlHandlingStrategy` only handles part of the URL\n   * 2. `skipLocationChange` does not update the browser url.\n   *\n   * So to reiterate, `browserUrlTree` only represents the Router's internal understanding of the\n   * current route, either before guards with `urlUpdateStrategy === 'eager'` or right before\n   * activation with `'deferred'`.\n   *\n   * This should match the `currentUrlTree` when the navigation succeeds.\n   * @internal\n   */\n  browserUrlTree: UrlTree;\n  private disposed = false;\n\n  private locationSubscription?: SubscriptionLike;\n  // TODO(b/260747083): This should not exist and navigationId should be private in\n  // `NavigationTransitions`\n  private get navigationId() {\n    return this.navigationTransitions.navigationId;\n  }\n\n  /**\n   * The id of the currently active page in the router.\n   * Updated to the transition's target id on a successful navigation.\n   *\n   * This is used to track what page the router last activated. When an attempted navigation fails,\n   * the router can then use this to compute how to restore the state back to the previously active\n   * page.\n   */\n  private currentPageId: number = 0;\n  /**\n   * The ɵrouterPageId of whatever page is currently active in the browser history. This is\n   * important for computing the target page id for new navigations because we need to ensure each\n   * page id in the browser history is 1 more than the previous entry.\n   */\n  private get browserPageId(): number|undefined {\n    return (this.location.getState() as RestoredState | null)?.ɵrouterPageId;\n  }\n  private console = inject(Console);\n  private isNgZoneEnabled: boolean = false;\n\n  /**\n   * An event stream for routing events.\n   */\n  public get events(): Observable<Event> {\n    // TODO(atscott): This _should_ be events.asObservable(). However, this change requires internal\n    // cleanup: tests are doing `(route.events as Subject<Event>).next(...)`. This isn't\n    // allowed/supported but we still have to fix these or file bugs against the teams before making\n    // the change.\n    return this.navigationTransitions.events;\n  }\n  /**\n   * The current state of routing in this NgModule.\n   */\n  public readonly routerState: RouterState;\n\n  private options = inject(ROUTER_CONFIGURATION, {optional: true}) || {};\n\n  /**\n   * A handler for navigation errors in this NgModule.\n   *\n   * @deprecated Subscribe to the `Router` events and watch for `NavigationError` instead.\n   */\n  errorHandler = this.options.errorHandler || defaultErrorHandler;\n\n  /**\n   * A handler for errors thrown by `Router.parseUrl(url)`\n   * when `url` contains an invalid character.\n   * The most common case is a `%` sign\n   * that's not encoded and is not part of a percent encoded sequence.\n   *\n   * @deprecated Configure this through `RouterModule.forRoot` instead:\n   *   `RouterModule.forRoot(routes, {malformedUriErrorHandler: myHandler})`\n   * @see `RouterModule`\n   */\n  malformedUriErrorHandler =\n      this.options.malformedUriErrorHandler || defaultMalformedUriErrorHandler;\n\n  /**\n   * True if at least one navigation event has occurred,\n   * false otherwise.\n   */\n  navigated: boolean = false;\n  private lastSuccessfulId: number = -1;\n\n  /**\n   * A strategy for extracting and merging URLs.\n   * Used for AngularJS to Angular migrations.\n   *\n   * @deprecated Configure using `providers` instead:\n   *   `{provide: UrlHandlingStrategy, useClass: MyStrategy}`.\n   */\n  urlHandlingStrategy = inject(UrlHandlingStrategy);\n\n  /**\n   * A strategy for re-using routes.\n   *\n   * @deprecated Configure using `providers` instead:\n   *   `{provide: RouteReuseStrategy, useClass: MyStrategy}`.\n   */\n  routeReuseStrategy = inject(RouteReuseStrategy);\n\n  /** Strategy used to create a UrlTree. */\n  private readonly urlCreationStrategy = inject(CreateUrlTreeStrategy);\n\n  /**\n   * A strategy for setting the title based on the `routerState`.\n   *\n   * @deprecated Configure using `providers` instead:\n   *   `{provide: TitleStrategy, useClass: MyStrategy}`.\n   */\n  titleStrategy?: TitleStrategy = inject(TitleStrategy);\n\n  /**\n   * How to handle a navigation request to the current URL.\n   *\n   *\n   * @deprecated Configure this through `provideRouter` or `RouterModule.forRoot` instead.\n   * @see `withRouterConfig`\n   * @see `provideRouter`\n   * @see `RouterModule`\n   */\n  onSameUrlNavigation: OnSameUrlNavigation = this.options.onSameUrlNavigation || 'ignore';\n\n  /**\n   * How to merge parameters, data, resolved data, and title from parent to child\n   * routes. One of:\n   *\n   * - `'emptyOnly'` : Inherit parent parameters, data, and resolved data\n   * for path-less or component-less routes.\n   * - `'always'` : Inherit parent parameters, data, and resolved data\n   * for all child routes.\n   *\n   * @deprecated Configure this through `provideRouter` or `RouterModule.forRoot` instead.\n   * @see `withRouterConfig`\n   * @see `provideRouter`\n   * @see `RouterModule`\n   */\n  paramsInheritanceStrategy: 'emptyOnly'|'always' =\n      this.options.paramsInheritanceStrategy || 'emptyOnly';\n\n  /**\n   * Determines when the router updates the browser URL.\n   * By default (`\"deferred\"`), updates the browser URL after navigation has finished.\n   * Set to `'eager'` to update the browser URL at the beginning of navigation.\n   * You can choose to update early so that, if navigation fails,\n   * you can show an error message with the URL that failed.\n   *\n   * @deprecated Configure this through `provideRouter` or `RouterModule.forRoot` instead.\n   * @see `withRouterConfig`\n   * @see `provideRouter`\n   * @see `RouterModule`\n   */\n  urlUpdateStrategy: 'deferred'|'eager' = this.options.urlUpdateStrategy || 'deferred';\n\n  /**\n   * Configures how the Router attempts to restore state when a navigation is cancelled.\n   *\n   * 'replace' - Always uses `location.replaceState` to set the browser state to the state of the\n   * router before the navigation started. This means that if the URL of the browser is updated\n   * _before_ the navigation is canceled, the Router will simply replace the item in history rather\n   * than trying to restore to the previous location in the session history. This happens most\n   * frequently with `urlUpdateStrategy: 'eager'` and navigations with the browser back/forward\n   * buttons.\n   *\n   * 'computed' - Will attempt to return to the same index in the session history that corresponds\n   * to the Angular route when the navigation gets cancelled. For example, if the browser back\n   * button is clicked and the navigation is cancelled, the Router will trigger a forward navigation\n   * and vice versa.\n   *\n   * Note: the 'computed' option is incompatible with any `UrlHandlingStrategy` which only\n   * handles a portion of the URL because the history restoration navigates to the previous place in\n   * the browser history rather than simply resetting a portion of the URL.\n   *\n   * The default value is `replace`.\n   *\n   * @deprecated Configure this through `provideRouter` or `RouterModule.forRoot` instead.\n   * @see `withRouterConfig`\n   * @see `provideRouter`\n   * @see `RouterModule`\n   */\n  canceledNavigationResolution: 'replace'|'computed' =\n      this.options.canceledNavigationResolution || 'replace';\n\n  config: Routes = flatten(inject(ROUTES, {optional: true}) ?? []);\n\n  private readonly navigationTransitions = inject(NavigationTransitions);\n  private readonly urlSerializer = inject(UrlSerializer);\n  private readonly location = inject(Location);\n\n  constructor() {\n    this.isNgZoneEnabled = inject(NgZone) instanceof NgZone && NgZone.isInAngularZone();\n\n    this.resetConfig(this.config);\n    this.currentUrlTree = new UrlTree();\n    this.rawUrlTree = this.currentUrlTree;\n    this.browserUrlTree = this.currentUrlTree;\n\n    this.routerState = createEmptyState(this.currentUrlTree, null);\n\n    this.navigationTransitions.setupNavigations(this).subscribe(\n        t => {\n          this.lastSuccessfulId = t.id;\n          this.currentPageId = t.targetPageId;\n        },\n        e => {\n          this.console.warn(`Unhandled Navigation Error: ${e}`);\n        });\n  }\n\n  /** @internal */\n  resetRootComponentType(rootComponentType: Type<any>): void {\n    // TODO: vsavkin router 4.0 should make the root component set to null\n    // this will simplify the lifecycle of the router.\n    this.routerState.root.component = rootComponentType;\n    this.navigationTransitions.rootComponentType = rootComponentType;\n  }\n\n  /**\n   * Sets up the location change listener and performs the initial navigation.\n   */\n  initialNavigation(): void {\n    this.setUpLocationChangeListener();\n    if (!this.navigationTransitions.hasRequestedNavigation) {\n      const state = this.location.getState() as RestoredState;\n      this.navigateToSyncWithBrowser(this.location.path(true), IMPERATIVE_NAVIGATION, state);\n    }\n  }\n\n  /**\n   * Sets up the location change listener. This listener detects navigations triggered from outside\n   * the Router (the browser back/forward buttons, for example) and schedules a corresponding Router\n   * navigation so that the correct events, guards, etc. are triggered.\n   */\n  setUpLocationChangeListener(): void {\n    // Don't need to use Zone.wrap any more, because zone.js\n    // already patch onPopState, so location change callback will\n    // run into ngZone\n    if (!this.locationSubscription) {\n      this.locationSubscription = this.location.subscribe(event => {\n        const source = event['type'] === 'popstate' ? 'popstate' : 'hashchange';\n        if (source === 'popstate') {\n          // The `setTimeout` was added in #12160 and is likely to support Angular/AngularJS\n          // hybrid apps.\n          setTimeout(() => {\n            this.navigateToSyncWithBrowser(event['url']!, source, event.state);\n          }, 0);\n        }\n      });\n    }\n  }\n\n  /**\n   * Schedules a router navigation to synchronize Router state with the browser state.\n   *\n   * This is done as a response to a popstate event and the initial navigation. These\n   * two scenarios represent times when the browser URL/state has been updated and\n   * the Router needs to respond to ensure its internal state matches.\n   */\n  private navigateToSyncWithBrowser(\n      url: string, source: NavigationTrigger, state: RestoredState|undefined) {\n    const extras: NavigationExtras = {replaceUrl: true};\n\n    // TODO: restoredState should always include the entire state, regardless\n    // of navigationId. This requires a breaking change to update the type on\n    // NavigationStart’s restoredState, which currently requires navigationId\n    // to always be present. The Router used to only restore history state if\n    // a navigationId was present.\n\n    // The stored navigationId is used by the RouterScroller to retrieve the scroll\n    // position for the page.\n    const restoredState = state?.navigationId ? state : null;\n\n    // Separate to NavigationStart.restoredState, we must also restore the state to\n    // history.state and generate a new navigationId, since it will be overwritten\n    if (state) {\n      const stateCopy = {...state} as Partial<RestoredState>;\n      delete stateCopy.navigationId;\n      delete stateCopy.ɵrouterPageId;\n      if (Object.keys(stateCopy).length !== 0) {\n        extras.state = stateCopy;\n      }\n    }\n\n    const urlTree = this.parseUrl(url);\n    this.scheduleNavigation(urlTree, source, restoredState, extras);\n  }\n\n  /** The current URL. */\n  get url(): string {\n    return this.serializeUrl(this.currentUrlTree);\n  }\n\n  /**\n   * Returns the current `Navigation` object when the router is navigating,\n   * and `null` when idle.\n   */\n  getCurrentNavigation(): Navigation|null {\n    return this.navigationTransitions.currentNavigation;\n  }\n\n  /**\n   * Resets the route configuration used for navigation and generating links.\n   *\n   * @param config The route array for the new configuration.\n   *\n   * @usageNotes\n   *\n   * ```\n   * router.resetConfig([\n   *  { path: 'team/:id', component: TeamCmp, children: [\n   *    { path: 'simple', component: SimpleCmp },\n   *    { path: 'user/:name', component: UserCmp }\n   *  ]}\n   * ]);\n   * ```\n   */\n  resetConfig(config: Routes): void {\n    NG_DEV_MODE && validateConfig(config);\n    this.config = config.map(standardizeConfig);\n    this.navigated = false;\n    this.lastSuccessfulId = -1;\n  }\n\n  /** @nodoc */\n  ngOnDestroy(): void {\n    this.dispose();\n  }\n\n  /** Disposes of the router. */\n  dispose(): void {\n    this.navigationTransitions.complete();\n    if (this.locationSubscription) {\n      this.locationSubscription.unsubscribe();\n      this.locationSubscription = undefined;\n    }\n    this.disposed = true;\n  }\n\n  /**\n   * Appends URL segments to the current URL tree to create a new URL tree.\n   *\n   * @param commands An array of URL fragments with which to construct the new URL tree.\n   * If the path is static, can be the literal URL string. For a dynamic path, pass an array of path\n   * segments, followed by the parameters for each segment.\n   * The fragments are applied to the current URL tree or the one provided  in the `relativeTo`\n   * property of the options object, if supplied.\n   * @param navigationExtras Options that control the navigation strategy.\n   * @returns The new URL tree.\n   *\n   * @usageNotes\n   *\n   * ```\n   * // create /team/33/user/11\n   * router.createUrlTree(['/team', 33, 'user', 11]);\n   *\n   * // create /team/33;expand=true/user/11\n   * router.createUrlTree(['/team', 33, {expand: true}, 'user', 11]);\n   *\n   * // you can collapse static segments like this (this works only with the first passed-in value):\n   * router.createUrlTree(['/team/33/user', userId]);\n   *\n   * // If the first segment can contain slashes, and you do not want the router to split it,\n   * // you can do the following:\n   * router.createUrlTree([{segmentPath: '/one/two'}]);\n   *\n   * // create /team/33/(user/11//right:chat)\n   * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: 'chat'}}]);\n   *\n   * // remove the right secondary node\n   * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: null}}]);\n   *\n   * // assuming the current url is `/team/33/user/11` and the route points to `user/11`\n   *\n   * // navigate to /team/33/user/11/details\n   * router.createUrlTree(['details'], {relativeTo: route});\n   *\n   * // navigate to /team/33/user/22\n   * router.createUrlTree(['../22'], {relativeTo: route});\n   *\n   * // navigate to /team/44/user/22\n   * router.createUrlTree(['../../team/44/user/22'], {relativeTo: route});\n   *\n   * Note that a value of `null` or `undefined` for `relativeTo` indicates that the\n   * tree should be created relative to the root.\n   * ```\n   */\n  createUrlTree(commands: any[], navigationExtras: UrlCreationOptions = {}): UrlTree {\n    const {relativeTo, queryParams, fragment, queryParamsHandling, preserveFragment} =\n        navigationExtras;\n    const f = preserveFragment ? this.currentUrlTree.fragment : fragment;\n    let q: Params|null = null;\n    switch (queryParamsHandling) {\n      case 'merge':\n        q = {...this.currentUrlTree.queryParams, ...queryParams};\n        break;\n      case 'preserve':\n        q = this.currentUrlTree.queryParams;\n        break;\n      default:\n        q = queryParams || null;\n    }\n    if (q !== null) {\n      q = this.removeEmptyProps(q);\n    }\n    return this.urlCreationStrategy.createUrlTree(\n        relativeTo, this.routerState, this.currentUrlTree, commands, q, f ?? null);\n  }\n\n  /**\n   * Navigates to a view using an absolute route path.\n   *\n   * @param url An absolute path for a defined route. The function does not apply any delta to the\n   *     current URL.\n   * @param extras An object containing properties that modify the navigation strategy.\n   *\n   * @returns A Promise that resolves to 'true' when navigation succeeds,\n   * to 'false' when navigation fails, or is rejected on error.\n   *\n   * @usageNotes\n   *\n   * The following calls request navigation to an absolute path.\n   *\n   * ```\n   * router.navigateByUrl(\"/team/33/user/11\");\n   *\n   * // Navigate without updating the URL\n   * router.navigateByUrl(\"/team/33/user/11\", { skipLocationChange: true });\n   * ```\n   *\n   * @see [Routing and Navigation guide](guide/router)\n   *\n   */\n  navigateByUrl(url: string|UrlTree, extras: NavigationBehaviorOptions = {\n    skipLocationChange: false\n  }): Promise<boolean> {\n    if (typeof ngDevMode === 'undefined' ||\n        ngDevMode && this.isNgZoneEnabled && !NgZone.isInAngularZone()) {\n      this.console.warn(\n          `Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?`);\n    }\n\n    const urlTree = isUrlTree(url) ? url : this.parseUrl(url);\n    const mergedTree = this.urlHandlingStrategy.merge(urlTree, this.rawUrlTree);\n\n    return this.scheduleNavigation(mergedTree, IMPERATIVE_NAVIGATION, null, extras);\n  }\n\n  /**\n   * Navigate based on the provided array of commands and a starting point.\n   * If no starting route is provided, the navigation is absolute.\n   *\n   * @param commands An array of URL fragments with which to construct the target URL.\n   * If the path is static, can be the literal URL string. For a dynamic path, pass an array of path\n   * segments, followed by the parameters for each segment.\n   * The fragments are applied to the current URL or the one provided  in the `relativeTo` property\n   * of the options object, if supplied.\n   * @param extras An options object that determines how the URL should be constructed or\n   *     interpreted.\n   *\n   * @returns A Promise that resolves to `true` when navigation succeeds, to `false` when navigation\n   *     fails,\n   * or is rejected on error.\n   *\n   * @usageNotes\n   *\n   * The following calls request navigation to a dynamic route path relative to the current URL.\n   *\n   * ```\n   * router.navigate(['team', 33, 'user', 11], {relativeTo: route});\n   *\n   * // Navigate without updating the URL, overriding the default behavior\n   * router.navigate(['team', 33, 'user', 11], {relativeTo: route, skipLocationChange: true});\n   * ```\n   *\n   * @see [Routing and Navigation guide](guide/router)\n   *\n   */\n  navigate(commands: any[], extras: NavigationExtras = {skipLocationChange: false}):\n      Promise<boolean> {\n    validateCommands(commands);\n    return this.navigateByUrl(this.createUrlTree(commands, extras), extras);\n  }\n\n  /** Serializes a `UrlTree` into a string */\n  serializeUrl(url: UrlTree): string {\n    return this.urlSerializer.serialize(url);\n  }\n\n  /** Parses a string into a `UrlTree` */\n  parseUrl(url: string): UrlTree {\n    let urlTree: UrlTree;\n    try {\n      urlTree = this.urlSerializer.parse(url);\n    } catch (e) {\n      urlTree = this.malformedUriErrorHandler(e as URIError, this.urlSerializer, url);\n    }\n    return urlTree;\n  }\n\n  /**\n   * Returns whether the url is activated.\n   *\n   * @deprecated\n   * Use `IsActiveMatchOptions` instead.\n   *\n   * - The equivalent `IsActiveMatchOptions` for `true` is\n   * `{paths: 'exact', queryParams: 'exact', fragment: 'ignored', matrixParams: 'ignored'}`.\n   * - The equivalent for `false` is\n   * `{paths: 'subset', queryParams: 'subset', fragment: 'ignored', matrixParams: 'ignored'}`.\n   */\n  isActive(url: string|UrlTree, exact: boolean): boolean;\n  /**\n   * Returns whether the url is activated.\n   */\n  isActive(url: string|UrlTree, matchOptions: IsActiveMatchOptions): boolean;\n  /** @internal */\n  isActive(url: string|UrlTree, matchOptions: boolean|IsActiveMatchOptions): boolean;\n  isActive(url: string|UrlTree, matchOptions: boolean|IsActiveMatchOptions): boolean {\n    let options: IsActiveMatchOptions;\n    if (matchOptions === true) {\n      options = {...exactMatchOptions};\n    } else if (matchOptions === false) {\n      options = {...subsetMatchOptions};\n    } else {\n      options = matchOptions;\n    }\n    if (isUrlTree(url)) {\n      return containsTree(this.currentUrlTree, url, options);\n    }\n\n    const urlTree = this.parseUrl(url);\n    return containsTree(this.currentUrlTree, urlTree, options);\n  }\n\n  private removeEmptyProps(params: Params): Params {\n    return Object.keys(params).reduce((result: Params, key: string) => {\n      const value: any = params[key];\n      if (value !== null && value !== undefined) {\n        result[key] = value;\n      }\n      return result;\n    }, {});\n  }\n\n  /** @internal */\n  scheduleNavigation(\n      rawUrl: UrlTree, source: NavigationTrigger, restoredState: RestoredState|null,\n      extras: NavigationExtras,\n      priorPromise?: {resolve: any, reject: any, promise: Promise<boolean>}): Promise<boolean> {\n    if (this.disposed) {\n      return Promise.resolve(false);\n    }\n\n    let resolve: any;\n    let reject: any;\n    let promise: Promise<boolean>;\n    if (priorPromise) {\n      resolve = priorPromise.resolve;\n      reject = priorPromise.reject;\n      promise = priorPromise.promise;\n    } else {\n      promise = new Promise<boolean>((res, rej) => {\n        resolve = res;\n        reject = rej;\n      });\n    }\n\n    let targetPageId: number;\n    if (this.canceledNavigationResolution === 'computed') {\n      // If the `ɵrouterPageId` exist in the state then `targetpageId` should have the value of\n      // `ɵrouterPageId`. This is the case for something like a page refresh where we assign the\n      // target id to the previously set value for that page.\n      if (restoredState && restoredState.ɵrouterPageId) {\n        targetPageId = restoredState.ɵrouterPageId;\n      } else {\n        // If we're replacing the URL or doing a silent navigation, we do not want to increment the\n        // page id because we aren't pushing a new entry to history.\n        if (extras.replaceUrl || extras.skipLocationChange) {\n          targetPageId = this.browserPageId ?? 0;\n        } else {\n          targetPageId = (this.browserPageId ?? 0) + 1;\n        }\n      }\n    } else {\n      // This is unused when `canceledNavigationResolution` is not computed.\n      targetPageId = 0;\n    }\n\n    this.navigationTransitions.handleNavigationRequest({\n      targetPageId,\n      source,\n      restoredState,\n      currentUrlTree: this.currentUrlTree,\n      currentRawUrl: this.currentUrlTree,\n      rawUrl,\n      extras,\n      resolve,\n      reject,\n      promise,\n      currentSnapshot: this.routerState.snapshot,\n      currentRouterState: this.routerState\n    });\n\n    // Make sure that the error is propagated even though `processNavigations` catch\n    // handler does not rethrow\n    return promise.catch((e: any) => {\n      return Promise.reject(e);\n    });\n  }\n\n  /** @internal */\n  setBrowserUrl(url: UrlTree, transition: NavigationTransition) {\n    const path = this.urlSerializer.serialize(url);\n    const state = {\n      ...transition.extras.state,\n      ...this.generateNgRouterState(transition.id, transition.targetPageId)\n    };\n    if (this.location.isCurrentPathEqualTo(path) || !!transition.extras.replaceUrl) {\n      this.location.replaceState(path, '', state);\n    } else {\n      this.location.go(path, '', state);\n    }\n  }\n\n  /**\n   * Performs the necessary rollback action to restore the browser URL to the\n   * state before the transition.\n   * @internal\n   */\n  restoreHistory(transition: NavigationTransition, restoringFromCaughtError = false) {\n    if (this.canceledNavigationResolution === 'computed') {\n      const targetPagePosition = this.currentPageId - transition.targetPageId;\n      // The navigator change the location before triggered the browser event,\n      // so we need to go back to the current url if the navigation is canceled.\n      // Also, when navigation gets cancelled while using url update strategy eager, then we need to\n      // go back. Because, when `urlUpdateStrategy` is `eager`; `setBrowserUrl` method is called\n      // before any verification.\n      const browserUrlUpdateOccurred =\n          (transition.source === 'popstate' || this.urlUpdateStrategy === 'eager' ||\n           this.currentUrlTree === this.getCurrentNavigation()?.finalUrl);\n      if (browserUrlUpdateOccurred && targetPagePosition !== 0) {\n        this.location.historyGo(targetPagePosition);\n      } else if (\n          this.currentUrlTree === this.getCurrentNavigation()?.finalUrl &&\n          targetPagePosition === 0) {\n        // We got to the activation stage (where currentUrlTree is set to the navigation's\n        // finalUrl), but we weren't moving anywhere in history (skipLocationChange or replaceUrl).\n        // We still need to reset the router state back to what it was when the navigation started.\n        this.resetState(transition);\n        // TODO(atscott): resetting the `browserUrlTree` should really be done in `resetState`.\n        // Investigate if this can be done by running TGP.\n        this.browserUrlTree = transition.currentUrlTree;\n        this.resetUrlToCurrentUrlTree();\n      } else {\n        // The browser URL and router state was not updated before the navigation cancelled so\n        // there's no restoration needed.\n      }\n    } else if (this.canceledNavigationResolution === 'replace') {\n      // TODO(atscott): It seems like we should _always_ reset the state here. It would be a no-op\n      // for `deferred` navigations that haven't change the internal state yet because guards\n      // reject. For 'eager' navigations, it seems like we also really should reset the state\n      // because the navigation was cancelled. Investigate if this can be done by running TGP.\n      if (restoringFromCaughtError) {\n        this.resetState(transition);\n      }\n      this.resetUrlToCurrentUrlTree();\n    }\n  }\n\n  private resetState(t: NavigationTransition): void {\n    (this as {routerState: RouterState}).routerState = t.currentRouterState;\n    this.currentUrlTree = t.currentUrlTree;\n    // Note here that we use the urlHandlingStrategy to get the reset `rawUrlTree` because it may be\n    // configured to handle only part of the navigation URL. This means we would only want to reset\n    // the part of the navigation handled by the Angular router rather than the whole URL. In\n    // addition, the URLHandlingStrategy may be configured to specifically preserve parts of the URL\n    // when merging, such as the query params so they are not lost on a refresh.\n    this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, t.rawUrl);\n  }\n\n  private resetUrlToCurrentUrlTree(): void {\n    this.location.replaceState(\n        this.urlSerializer.serialize(this.rawUrlTree), '',\n        this.generateNgRouterState(this.lastSuccessfulId, this.currentPageId));\n  }\n\n  private generateNgRouterState(navigationId: number, routerPageId?: number) {\n    if (this.canceledNavigationResolution === 'computed') {\n      return {navigationId, ɵrouterPageId: routerPageId};\n    }\n    return {navigationId};\n  }\n}\n\nfunction validateCommands(commands: string[]): void {\n  for (let i = 0; i < commands.length; i++) {\n    const cmd = commands[i];\n    if (cmd == null) {\n      throw new RuntimeError(\n          RuntimeErrorCode.NULLISH_COMMAND,\n          NG_DEV_MODE && `The requested path contains ${cmd} segment at index ${i}`);\n    }\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {LocationStrategy} from '@angular/common';\nimport {Attribute, Directive, ElementRef, HostBinding, HostListener, Input, OnChanges, OnDestroy, Renderer2, SimpleChanges, ɵcoerceToBoolean as coerceToBoolean, ɵɵsanitizeUrlOrResourceUrl} from '@angular/core';\nimport {Subject, Subscription} from 'rxjs';\n\nimport {Event, NavigationEnd} from '../events';\nimport {QueryParamsHandling} from '../models';\nimport {Router} from '../router';\nimport {ActivatedRoute} from '../router_state';\nimport {Params} from '../shared';\nimport {UrlTree} from '../url_tree';\n\n\n/**\n * @description\n *\n * When applied to an element in a template, makes that element a link\n * that initiates navigation to a route. Navigation opens one or more routed components\n * in one or more `<router-outlet>` locations on the page.\n *\n * Given a route configuration `[{ path: 'user/:name', component: UserCmp }]`,\n * the following creates a static link to the route:\n * `<a routerLink=\"/user/bob\">link to user component</a>`\n *\n * You can use dynamic values to generate the link.\n * For a dynamic link, pass an array of path segments,\n * followed by the params for each segment.\n * For example, `['/team', teamId, 'user', userName, {details: true}]`\n * generates a link to `/team/11/user/bob;details=true`.\n *\n * Multiple static segments can be merged into one term and combined with dynamic segments.\n * For example, `['/team/11/user', userName, {details: true}]`\n *\n * The input that you provide to the link is treated as a delta to the current URL.\n * For instance, suppose the current URL is `/user/(box//aux:team)`.\n * The link `<a [routerLink]=\"['/user/jim']\">Jim</a>` creates the URL\n * `/user/(jim//aux:team)`.\n * See {@link Router#createUrlTree createUrlTree} for more information.\n *\n * @usageNotes\n *\n * You can use absolute or relative paths in a link, set query parameters,\n * control how parameters are handled, and keep a history of navigation states.\n *\n * ### Relative link paths\n *\n * The first segment name can be prepended with `/`, `./`, or `../`.\n * * If the first segment begins with `/`, the router looks up the route from the root of the\n *   app.\n * * If the first segment begins with `./`, or doesn't begin with a slash, the router\n *   looks in the children of the current activated route.\n * * If the first segment begins with `../`, the router goes up one level in the route tree.\n *\n * ### Setting and handling query params and fragments\n *\n * The following link adds a query parameter and a fragment to the generated URL:\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" [queryParams]=\"{debug: true}\" fragment=\"education\">\n *   link to user component\n * </a>\n * ```\n * By default, the directive constructs the new URL using the given query parameters.\n * The example generates the link: `/user/bob?debug=true#education`.\n *\n * You can instruct the directive to handle query parameters differently\n * by specifying the `queryParamsHandling` option in the link.\n * Allowed values are:\n *\n *  - `'merge'`: Merge the given `queryParams` into the current query params.\n *  - `'preserve'`: Preserve the current query params.\n *\n * For example:\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" [queryParams]=\"{debug: true}\" queryParamsHandling=\"merge\">\n *   link to user component\n * </a>\n * ```\n *\n * See {@link UrlCreationOptions.queryParamsHandling UrlCreationOptions#queryParamsHandling}.\n *\n * ### Preserving navigation history\n *\n * You can provide a `state` value to be persisted to the browser's\n * [`History.state` property](https://developer.mozilla.org/en-US/docs/Web/API/History#Properties).\n * For example:\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" [state]=\"{tracingId: 123}\">\n *   link to user component\n * </a>\n * ```\n *\n * Use {@link Router.getCurrentNavigation() Router#getCurrentNavigation} to retrieve a saved\n * navigation-state value. For example, to capture the `tracingId` during the `NavigationStart`\n * event:\n *\n * ```\n * // Get NavigationStart events\n * router.events.pipe(filter(e => e instanceof NavigationStart)).subscribe(e => {\n *   const navigation = router.getCurrentNavigation();\n *   tracingService.trace({id: navigation.extras.state.tracingId});\n * });\n * ```\n *\n * @ngModule RouterModule\n *\n * @publicApi\n */\n@Directive({\n  selector: '[routerLink]',\n  standalone: true,\n})\nexport class RouterLink implements OnChanges, OnDestroy {\n  private _preserveFragment = false;\n  private _skipLocationChange = false;\n  private _replaceUrl = false;\n\n  /**\n   * Represents an `href` attribute value applied to a host element,\n   * when a host element is `<a>`. For other tags, the value is `null`.\n   */\n  href: string|null = null;\n\n  /**\n   * Represents the `target` attribute on a host element.\n   * This is only used when the host element is an `<a>` tag.\n   */\n  @HostBinding('attr.target') @Input() target?: string;\n\n  /**\n   * Passed to {@link Router#createUrlTree Router#createUrlTree} as part of the\n   * `UrlCreationOptions`.\n   * @see {@link UrlCreationOptions#queryParams UrlCreationOptions#queryParams}\n   * @see {@link Router#createUrlTree Router#createUrlTree}\n   */\n  @Input() queryParams?: Params|null;\n  /**\n   * Passed to {@link Router#createUrlTree Router#createUrlTree} as part of the\n   * `UrlCreationOptions`.\n   * @see {@link UrlCreationOptions#fragment UrlCreationOptions#fragment}\n   * @see {@link Router#createUrlTree Router#createUrlTree}\n   */\n  @Input() fragment?: string;\n  /**\n   * Passed to {@link Router#createUrlTree Router#createUrlTree} as part of the\n   * `UrlCreationOptions`.\n   * @see {@link UrlCreationOptions#queryParamsHandling UrlCreationOptions#queryParamsHandling}\n   * @see {@link Router#createUrlTree Router#createUrlTree}\n   */\n  @Input() queryParamsHandling?: QueryParamsHandling|null;\n  /**\n   * Passed to {@link Router#navigateByUrl Router#navigateByUrl} as part of the\n   * `NavigationBehaviorOptions`.\n   * @see {@link NavigationBehaviorOptions#state NavigationBehaviorOptions#state}\n   * @see {@link Router#navigateByUrl Router#navigateByUrl}\n   */\n  @Input() state?: {[k: string]: any};\n  /**\n   * Passed to {@link Router#createUrlTree Router#createUrlTree} as part of the\n   * `UrlCreationOptions`.\n   * Specify a value here when you do not want to use the default value\n   * for `routerLink`, which is the current activated route.\n   * Note that a value of `undefined` here will use the `routerLink` default.\n   * @see {@link UrlCreationOptions#relativeTo UrlCreationOptions#relativeTo}\n   * @see {@link Router#createUrlTree Router#createUrlTree}\n   */\n  @Input() relativeTo?: ActivatedRoute|null;\n\n  private commands: any[]|null = null;\n\n  /** Whether a host element is an `<a>` tag. */\n  private isAnchorElement: boolean;\n\n  private subscription?: Subscription;\n\n  /** @internal */\n  onChanges = new Subject<RouterLink>();\n\n  constructor(\n      private router: Router, private route: ActivatedRoute,\n      @Attribute('tabindex') private readonly tabIndexAttribute: string|null|undefined,\n      private readonly renderer: Renderer2, private readonly el: ElementRef,\n      private locationStrategy?: LocationStrategy) {\n    const tagName = el.nativeElement.tagName?.toLowerCase();\n    this.isAnchorElement = tagName === 'a' || tagName === 'area';\n\n    if (this.isAnchorElement) {\n      this.subscription = router.events.subscribe((s: Event) => {\n        if (s instanceof NavigationEnd) {\n          this.updateHref();\n        }\n      });\n    } else {\n      this.setTabIndexIfNotOnNativeEl('0');\n    }\n  }\n\n  /**\n   * Passed to {@link Router#createUrlTree Router#createUrlTree} as part of the\n   * `UrlCreationOptions`.\n   * @see {@link UrlCreationOptions#preserveFragment UrlCreationOptions#preserveFragment}\n   * @see {@link Router#createUrlTree Router#createUrlTree}\n   */\n  @Input()\n  set preserveFragment(preserveFragment: boolean|string|null|undefined) {\n    this._preserveFragment = coerceToBoolean(preserveFragment);\n  }\n\n  get preserveFragment(): boolean {\n    return this._preserveFragment;\n  }\n\n  /**\n   * Passed to {@link Router#navigateByUrl Router#navigateByUrl} as part of the\n   * `NavigationBehaviorOptions`.\n   * @see {@link NavigationBehaviorOptions#skipLocationChange NavigationBehaviorOptions#skipLocationChange}\n   * @see {@link Router#navigateByUrl Router#navigateByUrl}\n   */\n  @Input()\n  set skipLocationChange(skipLocationChange: boolean|string|null|undefined) {\n    this._skipLocationChange = coerceToBoolean(skipLocationChange);\n  }\n\n  get skipLocationChange(): boolean {\n    return this._skipLocationChange;\n  }\n\n  /**\n   * Passed to {@link Router#navigateByUrl Router#navigateByUrl} as part of the\n   * `NavigationBehaviorOptions`.\n   * @see {@link NavigationBehaviorOptions#replaceUrl NavigationBehaviorOptions#replaceUrl}\n   * @see {@link Router#navigateByUrl Router#navigateByUrl}\n   */\n  @Input()\n  set replaceUrl(replaceUrl: boolean|string|null|undefined) {\n    this._replaceUrl = coerceToBoolean(replaceUrl);\n  }\n\n  get replaceUrl(): boolean {\n    return this._replaceUrl;\n  }\n\n  /**\n   * Modifies the tab index if there was not a tabindex attribute on the element during\n   * instantiation.\n   */\n  private setTabIndexIfNotOnNativeEl(newTabIndex: string|null) {\n    if (this.tabIndexAttribute != null /* both `null` and `undefined` */ || this.isAnchorElement) {\n      return;\n    }\n    this.applyAttributeValue('tabindex', newTabIndex);\n  }\n\n  /** @nodoc */\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.isAnchorElement) {\n      this.updateHref();\n    }\n    // This is subscribed to by `RouterLinkActive` so that it knows to update when there are changes\n    // to the RouterLinks it's tracking.\n    this.onChanges.next(this);\n  }\n\n  /**\n   * Commands to pass to {@link Router#createUrlTree Router#createUrlTree}.\n   *   - **array**: commands to pass to {@link Router#createUrlTree Router#createUrlTree}.\n   *   - **string**: shorthand for array of commands with just the string, i.e. `['/route']`\n   *   - **null|undefined**: effectively disables the `routerLink`\n   * @see {@link Router#createUrlTree Router#createUrlTree}\n   */\n  @Input()\n  set routerLink(commands: any[]|string|null|undefined) {\n    if (commands != null) {\n      this.commands = Array.isArray(commands) ? commands : [commands];\n      this.setTabIndexIfNotOnNativeEl('0');\n    } else {\n      this.commands = null;\n      this.setTabIndexIfNotOnNativeEl(null);\n    }\n  }\n\n  /** @nodoc */\n  @HostListener(\n      'click',\n      ['$event.button', '$event.ctrlKey', '$event.shiftKey', '$event.altKey', '$event.metaKey'])\n  onClick(button: number, ctrlKey: boolean, shiftKey: boolean, altKey: boolean, metaKey: boolean):\n      boolean {\n    if (this.urlTree === null) {\n      return true;\n    }\n\n    if (this.isAnchorElement) {\n      if (button !== 0 || ctrlKey || shiftKey || altKey || metaKey) {\n        return true;\n      }\n\n      if (typeof this.target === 'string' && this.target != '_self') {\n        return true;\n      }\n    }\n\n    const extras = {\n      skipLocationChange: this.skipLocationChange,\n      replaceUrl: this.replaceUrl,\n      state: this.state,\n    };\n    this.router.navigateByUrl(this.urlTree, extras);\n\n    // Return `false` for `<a>` elements to prevent default action\n    // and cancel the native behavior, since the navigation is handled\n    // by the Router.\n    return !this.isAnchorElement;\n  }\n\n  /** @nodoc */\n  ngOnDestroy(): any {\n    this.subscription?.unsubscribe();\n  }\n\n  private updateHref(): void {\n    this.href = this.urlTree !== null && this.locationStrategy ?\n        this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)) :\n        null;\n\n    const sanitizedValue = this.href === null ?\n        null :\n        // This class represents a directive that can be added to both `<a>` elements,\n        // as well as other elements. As a result, we can't define security context at\n        // compile time. So the security context is deferred to runtime.\n        // The `ɵɵsanitizeUrlOrResourceUrl` selects the necessary sanitizer function\n        // based on the tag and property names. The logic mimics the one from\n        // `packages/compiler/src/schema/dom_security_schema.ts`, which is used at compile time.\n        //\n        // Note: we should investigate whether we can switch to using `@HostBinding('attr.href')`\n        // instead of applying a value via a renderer, after a final merge of the\n        // `RouterLinkWithHref` directive.\n        ɵɵsanitizeUrlOrResourceUrl(this.href, this.el.nativeElement.tagName.toLowerCase(), 'href');\n    this.applyAttributeValue('href', sanitizedValue);\n  }\n\n  private applyAttributeValue(attrName: string, attrValue: string|null) {\n    const renderer = this.renderer;\n    const nativeElement = this.el.nativeElement;\n    if (attrValue !== null) {\n      renderer.setAttribute(nativeElement, attrName, attrValue);\n    } else {\n      renderer.removeAttribute(nativeElement, attrName);\n    }\n  }\n\n  get urlTree(): UrlTree|null {\n    if (this.commands === null) {\n      return null;\n    }\n    return this.router.createUrlTree(this.commands, {\n      // If the `relativeTo` input is not defined, we want to use `this.route` by default.\n      // Otherwise, we should use the value provided by the user in the input.\n      relativeTo: this.relativeTo !== undefined ? this.relativeTo : this.route,\n      queryParams: this.queryParams,\n      fragment: this.fragment,\n      queryParamsHandling: this.queryParamsHandling,\n      preserveFragment: this.preserveFragment,\n    });\n  }\n}\n\n/**\n * @description\n * An alias for the `RouterLink` directive.\n * Deprecated since v15, use `RouterLink` directive instead.\n *\n * @deprecated use `RouterLink` directive instead.\n * @publicApi\n */\nexport {RouterLink as RouterLinkWithHref};\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {AfterContentInit, ChangeDetectorRef, ContentChildren, Directive, ElementRef, EventEmitter, Input, OnChanges, OnDestroy, Optional, Output, QueryList, Renderer2, SimpleChanges} from '@angular/core';\nimport {from, of, Subscription} from 'rxjs';\nimport {mergeAll} from 'rxjs/operators';\n\nimport {Event, NavigationEnd} from '../events';\nimport {Router} from '../router';\nimport {IsActiveMatchOptions} from '../url_tree';\n\nimport {RouterLink} from './router_link';\n\n\n/**\n *\n * @description\n *\n * Tracks whether the linked route of an element is currently active, and allows you\n * to specify one or more CSS classes to add to the element when the linked route\n * is active.\n *\n * Use this directive to create a visual distinction for elements associated with an active route.\n * For example, the following code highlights the word \"Bob\" when the router\n * activates the associated route:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\">Bob</a>\n * ```\n *\n * Whenever the URL is either '/user' or '/user/bob', the \"active-link\" class is\n * added to the anchor tag. If the URL changes, the class is removed.\n *\n * You can set more than one class using a space-separated string or an array.\n * For example:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"class1 class2\">Bob</a>\n * <a routerLink=\"/user/bob\" [routerLinkActive]=\"['class1', 'class2']\">Bob</a>\n * ```\n *\n * To add the classes only when the URL matches the link exactly, add the option `exact: true`:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact:\n * true}\">Bob</a>\n * ```\n *\n * To directly check the `isActive` status of the link, assign the `RouterLinkActive`\n * instance to a template variable.\n * For example, the following checks the status without assigning any CSS classes:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive #rla=\"routerLinkActive\">\n *   Bob {{ rla.isActive ? '(already open)' : ''}}\n * </a>\n * ```\n *\n * You can apply the `RouterLinkActive` directive to an ancestor of linked elements.\n * For example, the following sets the active-link class on the `<div>`  parent tag\n * when the URL is either '/user/jim' or '/user/bob'.\n *\n * ```\n * <div routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact: true}\">\n *   <a routerLink=\"/user/jim\">Jim</a>\n *   <a routerLink=\"/user/bob\">Bob</a>\n * </div>\n * ```\n *\n * The `RouterLinkActive` directive can also be used to set the aria-current attribute\n * to provide an alternative distinction for active elements to visually impaired users.\n *\n * For example, the following code adds the 'active' class to the Home Page link when it is\n * indeed active and in such case also sets its aria-current attribute to 'page':\n *\n * ```\n * <a routerLink=\"/\" routerLinkActive=\"active\" ariaCurrentWhenActive=\"page\">Home Page</a>\n * ```\n *\n * @ngModule RouterModule\n *\n * @publicApi\n */\n@Directive({\n  selector: '[routerLinkActive]',\n  exportAs: 'routerLinkActive',\n  standalone: true,\n})\nexport class RouterLinkActive implements OnChanges, OnDestroy, AfterContentInit {\n  @ContentChildren(RouterLink, {descendants: true}) links!: QueryList<RouterLink>;\n\n  private classes: string[] = [];\n  private routerEventsSubscription: Subscription;\n  private linkInputChangesSubscription?: Subscription;\n  private _isActive = false;\n\n  get isActive() {\n    return this._isActive;\n  }\n\n  /**\n   * Options to configure how to determine if the router link is active.\n   *\n   * These options are passed to the `Router.isActive()` function.\n   *\n   * @see Router.isActive\n   */\n  @Input() routerLinkActiveOptions: {exact: boolean}|IsActiveMatchOptions = {exact: false};\n\n\n  /**\n   * Aria-current attribute to apply when the router link is active.\n   *\n   * Possible values: `'page'` | `'step'` | `'location'` | `'date'` | `'time'` | `true` | `false`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-current}\n   */\n  @Input() ariaCurrentWhenActive?: 'page'|'step'|'location'|'date'|'time'|true|false;\n\n  /**\n   *\n   * You can use the output `isActiveChange` to get notified each time the link becomes\n   * active or inactive.\n   *\n   * Emits:\n   * true  -> Route is active\n   * false -> Route is inactive\n   *\n   * ```\n   * <a\n   *  routerLink=\"/user/bob\"\n   *  routerLinkActive=\"active-link\"\n   *  (isActiveChange)=\"this.onRouterLinkActive($event)\">Bob</a>\n   * ```\n   */\n  @Output() readonly isActiveChange: EventEmitter<boolean> = new EventEmitter();\n\n  constructor(\n      private router: Router, private element: ElementRef, private renderer: Renderer2,\n      private readonly cdr: ChangeDetectorRef, @Optional() private link?: RouterLink) {\n    this.routerEventsSubscription = router.events.subscribe((s: Event) => {\n      if (s instanceof NavigationEnd) {\n        this.update();\n      }\n    });\n  }\n\n  /** @nodoc */\n  ngAfterContentInit(): void {\n    // `of(null)` is used to force subscribe body to execute once immediately (like `startWith`).\n    of(this.links.changes, of(null)).pipe(mergeAll()).subscribe(_ => {\n      this.update();\n      this.subscribeToEachLinkOnChanges();\n    });\n  }\n\n  private subscribeToEachLinkOnChanges() {\n    this.linkInputChangesSubscription?.unsubscribe();\n    const allLinkChanges = [...this.links.toArray(), this.link]\n                               .filter((link): link is RouterLink => !!link)\n                               .map(link => link.onChanges);\n    this.linkInputChangesSubscription = from(allLinkChanges).pipe(mergeAll()).subscribe(link => {\n      if (this._isActive !== this.isLinkActive(this.router)(link)) {\n        this.update();\n      }\n    });\n  }\n\n  @Input()\n  set routerLinkActive(data: string[]|string) {\n    const classes = Array.isArray(data) ? data : data.split(' ');\n    this.classes = classes.filter(c => !!c);\n  }\n\n  /** @nodoc */\n  ngOnChanges(changes: SimpleChanges): void {\n    this.update();\n  }\n  /** @nodoc */\n  ngOnDestroy(): void {\n    this.routerEventsSubscription.unsubscribe();\n    this.linkInputChangesSubscription?.unsubscribe();\n  }\n\n  private update(): void {\n    if (!this.links || !this.router.navigated) return;\n    Promise.resolve().then(() => {\n      const hasActiveLinks = this.hasActiveLinks();\n      if (this._isActive !== hasActiveLinks) {\n        this._isActive = hasActiveLinks;\n        this.cdr.markForCheck();\n        this.classes.forEach((c) => {\n          if (hasActiveLinks) {\n            this.renderer.addClass(this.element.nativeElement, c);\n          } else {\n            this.renderer.removeClass(this.element.nativeElement, c);\n          }\n        });\n        if (hasActiveLinks && this.ariaCurrentWhenActive !== undefined) {\n          this.renderer.setAttribute(\n              this.element.nativeElement, 'aria-current', this.ariaCurrentWhenActive.toString());\n        } else {\n          this.renderer.removeAttribute(this.element.nativeElement, 'aria-current');\n        }\n\n        // Emit on isActiveChange after classes are updated\n        this.isActiveChange.emit(hasActiveLinks);\n      }\n    });\n  }\n\n  private isLinkActive(router: Router): (link: RouterLink) => boolean {\n    const options: boolean|IsActiveMatchOptions =\n        isActiveMatchOptions(this.routerLinkActiveOptions) ?\n        this.routerLinkActiveOptions :\n        // While the types should disallow `undefined` here, it's possible without strict inputs\n        (this.routerLinkActiveOptions.exact || false);\n    return (link: RouterLink) => link.urlTree ? router.isActive(link.urlTree, options) : false;\n  }\n\n  private hasActiveLinks(): boolean {\n    const isActiveCheckFn = this.isLinkActive(this.router);\n    return this.link && isActiveCheckFn(this.link) || this.links.some(isActiveCheckFn);\n  }\n}\n\n/**\n * Use instead of `'paths' in options` to be compatible with property renaming\n */\nfunction isActiveMatchOptions(options: {exact: boolean}|\n                              IsActiveMatchOptions): options is IsActiveMatchOptions {\n  return !!(options as IsActiveMatchOptions).paths;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Compiler, createEnvironmentInjector, EnvironmentInjector, Injectable, OnDestroy} from '@angular/core';\nimport {from, Observable, of, Subscription} from 'rxjs';\nimport {catchError, concatMap, filter, mergeAll, mergeMap} from 'rxjs/operators';\n\nimport {Event, NavigationEnd} from './events';\nimport {LoadedRouterConfig, Route, Routes} from './models';\nimport {Router} from './router';\nimport {RouterConfigLoader} from './router_config_loader';\n\n\n/**\n * @description\n *\n * Provides a preloading strategy.\n *\n * @publicApi\n */\nexport abstract class PreloadingStrategy {\n  abstract preload(route: Route, fn: () => Observable<any>): Observable<any>;\n}\n\n/**\n * @description\n *\n * Provides a preloading strategy that preloads all modules as quickly as possible.\n *\n * ```\n * RouterModule.forRoot(ROUTES, {preloadingStrategy: PreloadAllModules})\n * ```\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root'})\nexport class PreloadAllModules implements PreloadingStrategy {\n  preload(route: Route, fn: () => Observable<any>): Observable<any> {\n    return fn().pipe(catchError(() => of(null)));\n  }\n}\n\n/**\n * @description\n *\n * Provides a preloading strategy that does not preload any modules.\n *\n * This strategy is enabled by default.\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root'})\nexport class NoPreloading implements PreloadingStrategy {\n  preload(route: Route, fn: () => Observable<any>): Observable<any> {\n    return of(null);\n  }\n}\n\n/**\n * The preloader optimistically loads all router configurations to\n * make navigations into lazily-loaded sections of the application faster.\n *\n * The preloader runs in the background. When the router bootstraps, the preloader\n * starts listening to all navigation events. After every such event, the preloader\n * will check if any configurations can be loaded lazily.\n *\n * If a route is protected by `canLoad` guards, the preloaded will not load it.\n *\n * @publicApi\n */\n@Injectable({providedIn: 'root'})\nexport class RouterPreloader implements OnDestroy {\n  private subscription?: Subscription;\n\n  constructor(\n      private router: Router, compiler: Compiler, private injector: EnvironmentInjector,\n      private preloadingStrategy: PreloadingStrategy, private loader: RouterConfigLoader) {}\n\n  setUpPreloading(): void {\n    this.subscription =\n        this.router.events\n            .pipe(filter((e: Event) => e instanceof NavigationEnd), concatMap(() => this.preload()))\n            .subscribe(() => {});\n  }\n\n  preload(): Observable<any> {\n    return this.processRoutes(this.injector, this.router.config);\n  }\n\n  /** @nodoc */\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  private processRoutes(injector: EnvironmentInjector, routes: Routes): Observable<void> {\n    const res: Observable<any>[] = [];\n    for (const route of routes) {\n      if (route.providers && !route._injector) {\n        route._injector =\n            createEnvironmentInjector(route.providers, injector, `Route: ${route.path}`);\n      }\n\n      const injectorForCurrentRoute = route._injector ?? injector;\n      const injectorForChildren = route._loadedInjector ?? injectorForCurrentRoute;\n\n      // Note that `canLoad` is only checked as a condition that prevents `loadChildren` and not\n      // `loadComponent`. `canLoad` guards only block loading of child routes by design. This\n      // happens as a consequence of needing to descend into children for route matching immediately\n      // while component loading is deferred until route activation. Because `canLoad` guards can\n      // have side effects, we cannot execute them here so we instead skip preloading altogether\n      // when present. Lastly, it remains to be decided whether `canLoad` should behave this way\n      // at all. Code splitting and lazy loading is separate from client-side authorization checks\n      // and should not be used as a security measure to prevent loading of code.\n      if ((route.loadChildren && !route._loadedRoutes && route.canLoad === undefined) ||\n          (route.loadComponent && !route._loadedComponent)) {\n        res.push(this.preloadConfig(injectorForCurrentRoute, route));\n      } else if (route.children || route._loadedRoutes) {\n        res.push(this.processRoutes(injectorForChildren, (route.children ?? route._loadedRoutes)!));\n      }\n    }\n    return from(res).pipe(mergeAll());\n  }\n\n  private preloadConfig(injector: EnvironmentInjector, route: Route): Observable<void> {\n    return this.preloadingStrategy.preload(route, () => {\n      let loadedChildren$: Observable<LoadedRouterConfig|null>;\n      if (route.loadChildren && route.canLoad === undefined) {\n        loadedChildren$ = this.loader.loadChildren(injector, route);\n      } else {\n        loadedChildren$ = of(null);\n      }\n\n      const recursiveLoadChildren$ =\n          loadedChildren$.pipe(mergeMap((config: LoadedRouterConfig|null) => {\n            if (config === null) {\n              return of(void 0);\n            }\n            route._loadedRoutes = config.routes;\n            route._loadedInjector = config.injector;\n            // If the loaded config was a module, use that as the module/module injector going\n            // forward. Otherwise, continue using the current module/module injector.\n            return this.processRoutes(config.injector ?? injector, config.routes);\n          }));\n      if (route.loadComponent && !route._loadedComponent) {\n        const loadComponent$ = this.loader.loadComponent(route);\n        return from([recursiveLoadChildren$, loadComponent$]).pipe(mergeAll());\n      } else {\n        return recursiveLoadChildren$;\n      }\n    });\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ViewportScroller} from '@angular/common';\nimport {Injectable, InjectionToken, NgZone, OnDestroy} from '@angular/core';\nimport {Unsubscribable} from 'rxjs';\n\nimport {NavigationEnd, NavigationStart, Scroll} from './events';\nimport {NavigationTransitions} from './navigation_transition';\nimport {Router} from './router';\nimport {UrlSerializer} from './url_tree';\n\nexport const ROUTER_SCROLLER = new InjectionToken<RouterScroller>('');\n\n@Injectable()\nexport class RouterScroller implements OnDestroy {\n  private routerEventsSubscription?: Unsubscribable;\n  private scrollEventsSubscription?: Unsubscribable;\n\n  private lastId = 0;\n  private lastSource: 'imperative'|'popstate'|'hashchange'|undefined = 'imperative';\n  private restoredId = 0;\n  private store: {[key: string]: [number, number]} = {};\n\n  /** @nodoc */\n  constructor(\n      readonly urlSerializer: UrlSerializer, private transitions: NavigationTransitions,\n      public readonly viewportScroller: ViewportScroller, private readonly zone: NgZone,\n      private options: {\n        scrollPositionRestoration?: 'disabled'|'enabled'|'top',\n        anchorScrolling?: 'disabled'|'enabled'\n      } = {}) {\n    // Default both options to 'disabled'\n    options.scrollPositionRestoration = options.scrollPositionRestoration || 'disabled';\n    options.anchorScrolling = options.anchorScrolling || 'disabled';\n  }\n\n  init(): void {\n    // we want to disable the automatic scrolling because having two places\n    // responsible for scrolling results race conditions, especially given\n    // that browser don't implement this behavior consistently\n    if (this.options.scrollPositionRestoration !== 'disabled') {\n      this.viewportScroller.setHistoryScrollRestoration('manual');\n    }\n    this.routerEventsSubscription = this.createScrollEvents();\n    this.scrollEventsSubscription = this.consumeScrollEvents();\n  }\n\n  private createScrollEvents() {\n    return this.transitions.events.subscribe(e => {\n      if (e instanceof NavigationStart) {\n        // store the scroll position of the current stable navigations.\n        this.store[this.lastId] = this.viewportScroller.getScrollPosition();\n        this.lastSource = e.navigationTrigger;\n        this.restoredId = e.restoredState ? e.restoredState.navigationId : 0;\n      } else if (e instanceof NavigationEnd) {\n        this.lastId = e.id;\n        this.scheduleScrollEvent(e, this.urlSerializer.parse(e.urlAfterRedirects).fragment);\n      }\n    });\n  }\n\n  private consumeScrollEvents() {\n    return this.transitions.events.subscribe(e => {\n      if (!(e instanceof Scroll)) return;\n      // a popstate event. The pop state event will always ignore anchor scrolling.\n      if (e.position) {\n        if (this.options.scrollPositionRestoration === 'top') {\n          this.viewportScroller.scrollToPosition([0, 0]);\n        } else if (this.options.scrollPositionRestoration === 'enabled') {\n          this.viewportScroller.scrollToPosition(e.position);\n        }\n        // imperative navigation \"forward\"\n      } else {\n        if (e.anchor && this.options.anchorScrolling === 'enabled') {\n          this.viewportScroller.scrollToAnchor(e.anchor);\n        } else if (this.options.scrollPositionRestoration !== 'disabled') {\n          this.viewportScroller.scrollToPosition([0, 0]);\n        }\n      }\n    });\n  }\n\n  private scheduleScrollEvent(routerEvent: NavigationEnd, anchor: string|null): void {\n    this.zone.runOutsideAngular(() => {\n      // The scroll event needs to be delayed until after change detection. Otherwise, we may\n      // attempt to restore the scroll position before the router outlet has fully rendered the\n      // component by executing its update block of the template function.\n      setTimeout(() => {\n        this.zone.run(() => {\n          this.transitions.events.next(new Scroll(\n              routerEvent, this.lastSource === 'popstate' ? this.store[this.restoredId] : null,\n              anchor));\n        });\n      }, 0);\n    });\n  }\n\n  /** @nodoc */\n  ngOnDestroy() {\n    this.routerEventsSubscription?.unsubscribe();\n    this.scrollEventsSubscription?.unsubscribe();\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {HashLocationStrategy, LOCATION_INITIALIZED, LocationStrategy, ViewportScroller} from '@angular/common';\nimport {APP_BOOTSTRAP_LISTENER, APP_INITIALIZER, ApplicationRef, ComponentRef, ENVIRONMENT_INITIALIZER, EnvironmentProviders, inject, InjectFlags, InjectionToken, Injector, makeEnvironmentProviders, NgZone, Provider, Type} from '@angular/core';\nimport {of, Subject} from 'rxjs';\nimport {filter, map, take} from 'rxjs/operators';\n\nimport {Event, NavigationCancel, NavigationCancellationCode, NavigationEnd, NavigationError, stringifyEvent} from './events';\nimport {Routes} from './models';\nimport {NavigationTransitions} from './navigation_transition';\nimport {Router} from './router';\nimport {InMemoryScrollingOptions, ROUTER_CONFIGURATION, RouterConfigOptions} from './router_config';\nimport {ROUTES} from './router_config_loader';\nimport {PreloadingStrategy, RouterPreloader} from './router_preloader';\nimport {ROUTER_SCROLLER, RouterScroller} from './router_scroller';\nimport {ActivatedRoute} from './router_state';\nimport {UrlSerializer} from './url_tree';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || ngDevMode;\n\n/**\n * Sets up providers necessary to enable `Router` functionality for the application.\n * Allows to configure a set of routes as well as extra features that should be enabled.\n *\n * @usageNotes\n *\n * Basic example of how you can add a Router to your application:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent, {\n *   providers: [provideRouter(appRoutes)]\n * });\n * ```\n *\n * You can also enable optional features in the Router by adding functions from the `RouterFeatures`\n * type:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent,\n *   {\n *     providers: [\n *       provideRouter(appRoutes,\n *         withDebugTracing(),\n *         withRouterConfig({paramsInheritanceStrategy: 'always'}))\n *     ]\n *   }\n * );\n * ```\n *\n * @see `RouterFeatures`\n *\n * @publicApi\n * @param routes A set of `Route`s to use for the application routing table.\n * @param features Optional features to configure additional router behaviors.\n * @returns A set of providers to setup a Router.\n */\nexport function provideRouter(routes: Routes, ...features: RouterFeatures[]): EnvironmentProviders {\n  return makeEnvironmentProviders([\n    {provide: ROUTES, multi: true, useValue: routes},\n    NG_DEV_MODE ? {provide: ROUTER_IS_PROVIDED, useValue: true} : [],\n    {provide: ActivatedRoute, useFactory: rootRoute, deps: [Router]},\n    {provide: APP_BOOTSTRAP_LISTENER, multi: true, useFactory: getBootstrapListener},\n    features.map(feature => feature.ɵproviders),\n  ]);\n}\n\nexport function rootRoute(router: Router): ActivatedRoute {\n  return router.routerState.root;\n}\n\n/**\n * Helper type to represent a Router feature.\n *\n * @publicApi\n */\nexport interface RouterFeature<FeatureKind extends RouterFeatureKind> {\n  ɵkind: FeatureKind;\n  ɵproviders: Provider[];\n}\n\n/**\n * Helper function to create an object that represents a Router feature.\n */\nfunction routerFeature<FeatureKind extends RouterFeatureKind>(\n    kind: FeatureKind, providers: Provider[]): RouterFeature<FeatureKind> {\n  return {ɵkind: kind, ɵproviders: providers};\n}\n\n\n/**\n * An Injection token used to indicate whether `provideRouter` or `RouterModule.forRoot` was ever\n * called.\n */\nexport const ROUTER_IS_PROVIDED =\n    new InjectionToken<boolean>('', {providedIn: 'root', factory: () => false});\n\nconst routerIsProvidedDevModeCheck = {\n  provide: ENVIRONMENT_INITIALIZER,\n  multi: true,\n  useFactory() {\n    return () => {\n      if (!inject(ROUTER_IS_PROVIDED)) {\n        console.warn(\n            '`provideRoutes` was called without `provideRouter` or `RouterModule.forRoot`. ' +\n            'This is likely a mistake.');\n      }\n    };\n  }\n};\n\n/**\n * Registers a [DI provider](guide/glossary#provider) for a set of routes.\n * @param routes The route configuration to provide.\n *\n * @usageNotes\n *\n * ```\n * @NgModule({\n *   providers: [provideRoutes(ROUTES)]\n * })\n * class LazyLoadedChildModule {}\n * ```\n *\n * @deprecated If necessary, provide routes using the `ROUTES` `InjectionToken`.\n * @see `ROUTES`\n * @publicApi\n */\nexport function provideRoutes(routes: Routes): Provider[] {\n  return [\n    {provide: ROUTES, multi: true, useValue: routes},\n    NG_DEV_MODE ? routerIsProvidedDevModeCheck : [],\n  ];\n}\n\n/**\n * A type alias for providers returned by `withInMemoryScrolling` for use with `provideRouter`.\n *\n * @see `withInMemoryScrolling`\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type InMemoryScrollingFeature = RouterFeature<RouterFeatureKind.InMemoryScrollingFeature>;\n\n/**\n * Enables customizable scrolling behavior for router navigations.\n *\n * @usageNotes\n *\n * Basic example of how you can enable scrolling feature:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent,\n *   {\n *     providers: [\n *       provideRouter(appRoutes, withInMemoryScrolling())\n *     ]\n *   }\n * );\n * ```\n *\n * @see `provideRouter`\n * @see `ViewportScroller`\n *\n * @publicApi\n * @param options Set of configuration parameters to customize scrolling behavior, see\n *     `InMemoryScrollingOptions` for additional information.\n * @returns A set of providers for use with `provideRouter`.\n */\nexport function withInMemoryScrolling(options: InMemoryScrollingOptions = {}):\n    InMemoryScrollingFeature {\n  const providers = [{\n    provide: ROUTER_SCROLLER,\n    useFactory: () => {\n      const viewportScroller = inject(ViewportScroller);\n      const zone = inject(NgZone);\n      const transitions = inject(NavigationTransitions);\n      const urlSerializer = inject(UrlSerializer);\n      return new RouterScroller(urlSerializer, transitions, viewportScroller, zone, options);\n    },\n  }];\n  return routerFeature(RouterFeatureKind.InMemoryScrollingFeature, providers);\n}\n\nexport function getBootstrapListener() {\n  const injector = inject(Injector);\n  return (bootstrappedComponentRef: ComponentRef<unknown>) => {\n    const ref = injector.get(ApplicationRef);\n\n    if (bootstrappedComponentRef !== ref.components[0]) {\n      return;\n    }\n\n    const router = injector.get(Router);\n    const bootstrapDone = injector.get(BOOTSTRAP_DONE);\n\n    if (injector.get(INITIAL_NAVIGATION) === InitialNavigation.EnabledNonBlocking) {\n      router.initialNavigation();\n    }\n\n    injector.get(ROUTER_PRELOADER, null, InjectFlags.Optional)?.setUpPreloading();\n    injector.get(ROUTER_SCROLLER, null, InjectFlags.Optional)?.init();\n    router.resetRootComponentType(ref.componentTypes[0]);\n    if (!bootstrapDone.closed) {\n      bootstrapDone.next();\n      bootstrapDone.unsubscribe();\n    }\n  };\n}\n\n/**\n * A subject used to indicate that the bootstrapping phase is done. When initial navigation is\n * `enabledBlocking`, the first navigation waits until bootstrapping is finished before continuing\n * to the activation phase.\n */\nconst BOOTSTRAP_DONE =\n    new InjectionToken<Subject<void>>(NG_DEV_MODE ? 'bootstrap done indicator' : '', {\n      factory: () => {\n        return new Subject<void>();\n      }\n    });\n\n/**\n * This and the INITIAL_NAVIGATION token are used internally only. The public API side of this is\n * configured through the `ExtraOptions`.\n *\n * When set to `EnabledBlocking`, the initial navigation starts before the root\n * component is created. The bootstrap is blocked until the initial navigation is complete. This\n * value is required for [server-side rendering](guide/universal) to work.\n *\n * When set to `EnabledNonBlocking`, the initial navigation starts after the root component has been\n * created. The bootstrap is not blocked on the completion of the initial navigation.\n *\n * When set to `Disabled`, the initial navigation is not performed. The location listener is set up\n * before the root component gets created. Use if there is a reason to have more control over when\n * the router starts its initial navigation due to some complex initialization logic.\n *\n * @see `ExtraOptions`\n */\nconst enum InitialNavigation {\n  EnabledBlocking,\n  EnabledNonBlocking,\n  Disabled,\n}\n\nconst INITIAL_NAVIGATION = new InjectionToken<InitialNavigation>(\n    NG_DEV_MODE ? 'initial navigation' : '',\n    {providedIn: 'root', factory: () => InitialNavigation.EnabledNonBlocking});\n\n/**\n * A type alias for providers returned by `withEnabledBlockingInitialNavigation` for use with\n * `provideRouter`.\n *\n * @see `withEnabledBlockingInitialNavigation`\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type EnabledBlockingInitialNavigationFeature =\n    RouterFeature<RouterFeatureKind.EnabledBlockingInitialNavigationFeature>;\n\n/**\n * A type alias for providers returned by `withEnabledBlockingInitialNavigation` or\n * `withDisabledInitialNavigation` functions for use with `provideRouter`.\n *\n * @see `withEnabledBlockingInitialNavigation`\n * @see `withDisabledInitialNavigation`\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type InitialNavigationFeature =\n    EnabledBlockingInitialNavigationFeature|DisabledInitialNavigationFeature;\n\n/**\n * Configures initial navigation to start before the root component is created.\n *\n * The bootstrap is blocked until the initial navigation is complete. This value is required for\n * [server-side rendering](guide/universal) to work.\n *\n * @usageNotes\n *\n * Basic example of how you can enable this navigation behavior:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent,\n *   {\n *     providers: [\n *       provideRouter(appRoutes, withEnabledBlockingInitialNavigation())\n *     ]\n *   }\n * );\n * ```\n *\n * @see `provideRouter`\n *\n * @publicApi\n * @returns A set of providers for use with `provideRouter`.\n */\nexport function withEnabledBlockingInitialNavigation(): EnabledBlockingInitialNavigationFeature {\n  const providers = [\n    {provide: INITIAL_NAVIGATION, useValue: InitialNavigation.EnabledBlocking},\n    {\n      provide: APP_INITIALIZER,\n      multi: true,\n      deps: [Injector],\n      useFactory: (injector: Injector) => {\n        const locationInitialized: Promise<any> =\n            injector.get(LOCATION_INITIALIZED, Promise.resolve());\n\n        /**\n         * Performs the given action once the router finishes its next/current navigation.\n         *\n         * If the navigation is canceled or errors without a redirect, the navigation is considered\n         * complete. If the `NavigationEnd` event emits, the navigation is also considered complete.\n         */\n        function afterNextNavigation(action: () => void) {\n          const router = injector.get(Router);\n          router.events\n              .pipe(\n                  filter(\n                      (e): e is NavigationEnd|NavigationCancel|NavigationError =>\n                          e instanceof NavigationEnd || e instanceof NavigationCancel ||\n                          e instanceof NavigationError),\n                  map(e => {\n                    if (e instanceof NavigationEnd) {\n                      // Navigation assumed to succeed if we get `ActivationStart`\n                      return true;\n                    }\n                    const redirecting = e instanceof NavigationCancel ?\n                        (e.code === NavigationCancellationCode.Redirect ||\n                         e.code === NavigationCancellationCode.SupersededByNewNavigation) :\n                        false;\n                    return redirecting ? null : false;\n                  }),\n                  filter((result): result is boolean => result !== null),\n                  take(1),\n                  )\n              .subscribe(() => {\n                action();\n              });\n        }\n\n        return () => {\n          return locationInitialized.then(() => {\n            return new Promise(resolve => {\n              const router = injector.get(Router);\n              const bootstrapDone = injector.get(BOOTSTRAP_DONE);\n              afterNextNavigation(() => {\n                // Unblock APP_INITIALIZER in case the initial navigation was canceled or errored\n                // without a redirect.\n                resolve(true);\n              });\n\n              injector.get(NavigationTransitions).afterPreactivation = () => {\n                // Unblock APP_INITIALIZER once we get to `afterPreactivation`. At this point, we\n                // assume activation will complete successfully (even though this is not\n                // guaranteed).\n                resolve(true);\n                return bootstrapDone.closed ? of(void 0) : bootstrapDone;\n              };\n              router.initialNavigation();\n            });\n          });\n        };\n      }\n    },\n  ];\n  return routerFeature(RouterFeatureKind.EnabledBlockingInitialNavigationFeature, providers);\n}\n\n/**\n * A type alias for providers returned by `withDisabledInitialNavigation` for use with\n * `provideRouter`.\n *\n * @see `withDisabledInitialNavigation`\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type DisabledInitialNavigationFeature =\n    RouterFeature<RouterFeatureKind.DisabledInitialNavigationFeature>;\n\n/**\n * Disables initial navigation.\n *\n * Use if there is a reason to have more control over when the router starts its initial navigation\n * due to some complex initialization logic.\n *\n * @usageNotes\n *\n * Basic example of how you can disable initial navigation:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent,\n *   {\n *     providers: [\n *       provideRouter(appRoutes, withDisabledInitialNavigation())\n *     ]\n *   }\n * );\n * ```\n *\n * @see `provideRouter`\n *\n * @returns A set of providers for use with `provideRouter`.\n *\n * @publicApi\n */\nexport function withDisabledInitialNavigation(): DisabledInitialNavigationFeature {\n  const providers = [\n    {\n      provide: APP_INITIALIZER,\n      multi: true,\n      useFactory: () => {\n        const router = inject(Router);\n        return () => {\n          router.setUpLocationChangeListener();\n        };\n      }\n    },\n    {provide: INITIAL_NAVIGATION, useValue: InitialNavigation.Disabled}\n  ];\n  return routerFeature(RouterFeatureKind.DisabledInitialNavigationFeature, providers);\n}\n\n/**\n * A type alias for providers returned by `withDebugTracing` for use with `provideRouter`.\n *\n * @see `withDebugTracing`\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type DebugTracingFeature = RouterFeature<RouterFeatureKind.DebugTracingFeature>;\n\n/**\n * Enables logging of all internal navigation events to the console.\n * Extra logging might be useful for debugging purposes to inspect Router event sequence.\n *\n * @usageNotes\n *\n * Basic example of how you can enable debug tracing:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent,\n *   {\n *     providers: [\n *       provideRouter(appRoutes, withDebugTracing())\n *     ]\n *   }\n * );\n * ```\n *\n * @see `provideRouter`\n *\n * @returns A set of providers for use with `provideRouter`.\n *\n * @publicApi\n */\nexport function withDebugTracing(): DebugTracingFeature {\n  let providers: Provider[] = [];\n  if (NG_DEV_MODE) {\n    providers = [{\n      provide: ENVIRONMENT_INITIALIZER,\n      multi: true,\n      useFactory: () => {\n        const router = inject(Router);\n        return () => router.events.subscribe((e: Event) => {\n          // tslint:disable:no-console\n          console.group?.(`Router Event: ${(<any>e.constructor).name}`);\n          console.log(stringifyEvent(e));\n          console.log(e);\n          console.groupEnd?.();\n          // tslint:enable:no-console\n        });\n      }\n    }];\n  } else {\n    providers = [];\n  }\n  return routerFeature(RouterFeatureKind.DebugTracingFeature, providers);\n}\n\nconst ROUTER_PRELOADER = new InjectionToken<RouterPreloader>(NG_DEV_MODE ? 'router preloader' : '');\n\n/**\n * A type alias that represents a feature which enables preloading in Router.\n * The type is used to describe the return value of the `withPreloading` function.\n *\n * @see `withPreloading`\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type PreloadingFeature = RouterFeature<RouterFeatureKind.PreloadingFeature>;\n\n/**\n * Allows to configure a preloading strategy to use. The strategy is configured by providing a\n * reference to a class that implements a `PreloadingStrategy`.\n *\n * @usageNotes\n *\n * Basic example of how you can configure preloading:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent,\n *   {\n *     providers: [\n *       provideRouter(appRoutes, withPreloading(PreloadAllModules))\n *     ]\n *   }\n * );\n * ```\n *\n * @see `provideRouter`\n *\n * @param preloadingStrategy A reference to a class that implements a `PreloadingStrategy` that\n *     should be used.\n * @returns A set of providers for use with `provideRouter`.\n *\n * @publicApi\n */\nexport function withPreloading(preloadingStrategy: Type<PreloadingStrategy>): PreloadingFeature {\n  const providers = [\n    {provide: ROUTER_PRELOADER, useExisting: RouterPreloader},\n    {provide: PreloadingStrategy, useExisting: preloadingStrategy},\n  ];\n  return routerFeature(RouterFeatureKind.PreloadingFeature, providers);\n}\n\n/**\n * A type alias for providers returned by `withRouterConfig` for use with `provideRouter`.\n *\n * @see `withRouterConfig`\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type RouterConfigurationFeature =\n    RouterFeature<RouterFeatureKind.RouterConfigurationFeature>;\n\n/**\n * Allows to provide extra parameters to configure Router.\n *\n * @usageNotes\n *\n * Basic example of how you can provide extra configuration options:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent,\n *   {\n *     providers: [\n *       provideRouter(appRoutes, withRouterConfig({\n *          onSameUrlNavigation: 'reload'\n *       }))\n *     ]\n *   }\n * );\n * ```\n *\n * @see `provideRouter`\n *\n * @param options A set of parameters to configure Router, see `RouterConfigOptions` for\n *     additional information.\n * @returns A set of providers for use with `provideRouter`.\n *\n * @publicApi\n */\nexport function withRouterConfig(options: RouterConfigOptions): RouterConfigurationFeature {\n  const providers = [\n    {provide: ROUTER_CONFIGURATION, useValue: options},\n  ];\n  return routerFeature(RouterFeatureKind.RouterConfigurationFeature, providers);\n}\n\n/**\n * A type alias for providers returned by `withHashLocation` for use with `provideRouter`.\n *\n * @see `withHashLocation`\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type RouterHashLocationFeature = RouterFeature<RouterFeatureKind.RouterHashLocationFeature>;\n\n/**\n * Provides the location strategy that uses the URL fragment instead of the history API.\n *\n * @usageNotes\n *\n * Basic example of how you can use the hash location option:\n * ```\n * const appRoutes: Routes = [];\n * bootstrapApplication(AppComponent,\n *   {\n *     providers: [\n *       provideRouter(appRoutes, withHashLocation())\n *     ]\n *   }\n * );\n * ```\n *\n * @see `provideRouter`\n * @see `HashLocationStrategy`\n *\n * @returns A set of providers for use with `provideRouter`.\n *\n * @publicApi\n */\nexport function withHashLocation(): RouterConfigurationFeature {\n  const providers = [\n    {provide: LocationStrategy, useClass: HashLocationStrategy},\n  ];\n  return routerFeature(RouterFeatureKind.RouterConfigurationFeature, providers);\n}\n\n/**\n * A type alias that represents all Router features available for use with `provideRouter`.\n * Features can be enabled by adding special functions to the `provideRouter` call.\n * See documentation for each symbol to find corresponding function name. See also `provideRouter`\n * documentation on how to use those functions.\n *\n * @see `provideRouter`\n *\n * @publicApi\n */\nexport type RouterFeatures = PreloadingFeature|DebugTracingFeature|InitialNavigationFeature|\n    InMemoryScrollingFeature|RouterConfigurationFeature;\n\n/**\n * The list of features as an enum to uniquely type each feature.\n */\nexport const enum RouterFeatureKind {\n  PreloadingFeature,\n  DebugTracingFeature,\n  EnabledBlockingInitialNavigationFeature,\n  DisabledInitialNavigationFeature,\n  InMemoryScrollingFeature,\n  RouterConfigurationFeature,\n  RouterHashLocationFeature\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {HashLocationStrategy, Location, LocationStrategy, PathLocationStrategy, ViewportScroller} from '@angular/common';\nimport {APP_BOOTSTRAP_LISTENER, ComponentRef, inject, Inject, InjectionToken, ModuleWithProviders, NgModule, NgProbeToken, NgZone, Optional, Provider, SkipSelf, ɵRuntimeError as RuntimeError} from '@angular/core';\n\nimport {EmptyOutletComponent} from './components/empty_outlet';\nimport {RouterLink} from './directives/router_link';\nimport {RouterLinkActive} from './directives/router_link_active';\nimport {RouterOutlet} from './directives/router_outlet';\nimport {RuntimeErrorCode} from './errors';\nimport {Routes} from './models';\nimport {NavigationTransitions} from './navigation_transition';\nimport {getBootstrapListener, rootRoute, ROUTER_IS_PROVIDED, withDebugTracing, withDisabledInitialNavigation, withEnabledBlockingInitialNavigation, withPreloading} from './provide_router';\nimport {Router} from './router';\nimport {ExtraOptions, ROUTER_CONFIGURATION} from './router_config';\nimport {RouterConfigLoader, ROUTES} from './router_config_loader';\nimport {ChildrenOutletContexts} from './router_outlet_context';\nimport {ROUTER_SCROLLER, RouterScroller} from './router_scroller';\nimport {ActivatedRoute} from './router_state';\nimport {DefaultUrlSerializer, UrlSerializer} from './url_tree';\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || ngDevMode;\n\n/**\n * The directives defined in the `RouterModule`.\n */\nconst ROUTER_DIRECTIVES = [RouterOutlet, RouterLink, RouterLinkActive, EmptyOutletComponent];\n\n/**\n * @docsNotRequired\n */\nexport const ROUTER_FORROOT_GUARD = new InjectionToken<void>(\n    NG_DEV_MODE ? 'router duplicate forRoot guard' : 'ROUTER_FORROOT_GUARD');\n\n// TODO(atscott): All of these except `ActivatedRoute` are `providedIn: 'root'`. They are only kept\n// here to avoid a breaking change whereby the provider order matters based on where the\n// `RouterModule`/`RouterTestingModule` is imported. These can/should be removed as a \"breaking\"\n// change in a major version.\nexport const ROUTER_PROVIDERS: Provider[] = [\n  Location,\n  {provide: UrlSerializer, useClass: DefaultUrlSerializer},\n  Router,\n  ChildrenOutletContexts,\n  {provide: ActivatedRoute, useFactory: rootRoute, deps: [Router]},\n  RouterConfigLoader,\n  // Only used to warn when `provideRoutes` is used without `RouterModule` or `provideRouter`. Can\n  // be removed when `provideRoutes` is removed.\n  NG_DEV_MODE ? {provide: ROUTER_IS_PROVIDED, useValue: true} : [],\n];\n\nexport function routerNgProbeToken() {\n  return new NgProbeToken('Router', Router);\n}\n\n/**\n * @description\n *\n * Adds directives and providers for in-app navigation among views defined in an application.\n * Use the Angular `Router` service to declaratively specify application states and manage state\n * transitions.\n *\n * You can import this NgModule multiple times, once for each lazy-loaded bundle.\n * However, only one `Router` service can be active.\n * To ensure this, there are two ways to register routes when importing this module:\n *\n * * The `forRoot()` method creates an `NgModule` that contains all the directives, the given\n * routes, and the `Router` service itself.\n * * The `forChild()` method creates an `NgModule` that contains all the directives and the given\n * routes, but does not include the `Router` service.\n *\n * @see [Routing and Navigation guide](guide/router) for an\n * overview of how the `Router` service should be used.\n *\n * @publicApi\n */\n@NgModule({\n  imports: ROUTER_DIRECTIVES,\n  exports: ROUTER_DIRECTIVES,\n})\nexport class RouterModule {\n  constructor(@Optional() @Inject(ROUTER_FORROOT_GUARD) guard: any) {}\n\n  /**\n   * Creates and configures a module with all the router providers and directives.\n   * Optionally sets up an application listener to perform an initial navigation.\n   *\n   * When registering the NgModule at the root, import as follows:\n   *\n   * ```\n   * @NgModule({\n   *   imports: [RouterModule.forRoot(ROUTES)]\n   * })\n   * class MyNgModule {}\n   * ```\n   *\n   * @param routes An array of `Route` objects that define the navigation paths for the application.\n   * @param config An `ExtraOptions` configuration object that controls how navigation is performed.\n   * @return The new `NgModule`.\n   *\n   */\n  static forRoot(routes: Routes, config?: ExtraOptions): ModuleWithProviders<RouterModule> {\n    return {\n      ngModule: RouterModule,\n      providers: [\n        ROUTER_PROVIDERS,\n        NG_DEV_MODE ? (config?.enableTracing ? withDebugTracing().ɵproviders : []) : [],\n        {provide: ROUTES, multi: true, useValue: routes},\n        {\n          provide: ROUTER_FORROOT_GUARD,\n          useFactory: provideForRootGuard,\n          deps: [[Router, new Optional(), new SkipSelf()]]\n        },\n        {provide: ROUTER_CONFIGURATION, useValue: config ? config : {}},\n        config?.useHash ? provideHashLocationStrategy() : providePathLocationStrategy(),\n        provideRouterScroller(),\n        config?.preloadingStrategy ? withPreloading(config.preloadingStrategy).ɵproviders : [],\n        {provide: NgProbeToken, multi: true, useFactory: routerNgProbeToken},\n        config?.initialNavigation ? provideInitialNavigation(config) : [],\n        provideRouterInitializer(),\n      ],\n    };\n  }\n\n  /**\n   * Creates a module with all the router directives and a provider registering routes,\n   * without creating a new Router service.\n   * When registering for submodules and lazy-loaded submodules, create the NgModule as follows:\n   *\n   * ```\n   * @NgModule({\n   *   imports: [RouterModule.forChild(ROUTES)]\n   * })\n   * class MyNgModule {}\n   * ```\n   *\n   * @param routes An array of `Route` objects that define the navigation paths for the submodule.\n   * @return The new NgModule.\n   *\n   */\n  static forChild(routes: Routes): ModuleWithProviders<RouterModule> {\n    return {\n      ngModule: RouterModule,\n      providers: [{provide: ROUTES, multi: true, useValue: routes}],\n    };\n  }\n}\n\n/**\n * For internal use by `RouterModule` only. Note that this differs from `withInMemoryRouterScroller`\n * because it reads from the `ExtraOptions` which should not be used in the standalone world.\n */\nexport function provideRouterScroller(): Provider {\n  return {\n    provide: ROUTER_SCROLLER,\n    useFactory: () => {\n      const viewportScroller = inject(ViewportScroller);\n      const zone = inject(NgZone);\n      const config: ExtraOptions = inject(ROUTER_CONFIGURATION);\n      const transitions = inject(NavigationTransitions);\n      const urlSerializer = inject(UrlSerializer);\n      if (config.scrollOffset) {\n        viewportScroller.setOffset(config.scrollOffset);\n      }\n      return new RouterScroller(urlSerializer, transitions, viewportScroller, zone, config);\n    },\n  };\n}\n\n// Note: For internal use only with `RouterModule`. Standalone setup via `provideRouter` should\n// provide hash location directly via `{provide: LocationStrategy, useClass: HashLocationStrategy}`.\nfunction provideHashLocationStrategy(): Provider {\n  return {provide: LocationStrategy, useClass: HashLocationStrategy};\n}\n\n// Note: For internal use only with `RouterModule`. Standalone setup via `provideRouter` does not\n// need this at all because `PathLocationStrategy` is the default factory for `LocationStrategy`.\nfunction providePathLocationStrategy(): Provider {\n  return {provide: LocationStrategy, useClass: PathLocationStrategy};\n}\n\nexport function provideForRootGuard(router: Router): any {\n  if (NG_DEV_MODE && router) {\n    throw new RuntimeError(\n        RuntimeErrorCode.FOR_ROOT_CALLED_TWICE,\n        `The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector.` +\n            ` Lazy loaded modules should use RouterModule.forChild() instead.`);\n  }\n  return 'guarded';\n}\n\n// Note: For internal use only with `RouterModule`. Standalone router setup with `provideRouter`\n// users call `withXInitialNavigation` directly.\nfunction provideInitialNavigation(config: Pick<ExtraOptions, 'initialNavigation'>): Provider[] {\n  return [\n    config.initialNavigation === 'disabled' ? withDisabledInitialNavigation().ɵproviders : [],\n    config.initialNavigation === 'enabledBlocking' ?\n        withEnabledBlockingInitialNavigation().ɵproviders :\n        [],\n  ];\n}\n\n// TODO(atscott): This should not be in the public API\n/**\n * A [DI token](guide/glossary/#di-token) for the router initializer that\n * is called after the app is bootstrapped.\n *\n * @publicApi\n */\nexport const ROUTER_INITIALIZER = new InjectionToken<(compRef: ComponentRef<any>) => void>(\n    NG_DEV_MODE ? 'Router Initializer' : '');\n\nfunction provideRouterInitializer(): Provider[] {\n  return [\n    // ROUTER_INITIALIZER token should be removed. It's public API but shouldn't be. We can just\n    // have `getBootstrapListener` directly attached to APP_BOOTSTRAP_LISTENER.\n    {provide: ROUTER_INITIALIZER, useFactory: getBootstrapListener},\n    {provide: APP_BOOTSTRAP_LISTENER, multi: true, useExisting: ROUTER_INITIALIZER},\n  ];\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of the router package.\n */\n\nimport {Version} from '@angular/core';\n\n/**\n * @publicApi\n */\nexport const VERSION = new Version('15.1.3');\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\nexport * from './src/index';\n\n// This file only reexports content of the `src` folder. Keep it that way.\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\nexport * from './public_api';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Subject","BehaviorSubject","constructor","_value","value","getValue","_subscribe","subscriber","subscription","closed","next","hasError","thrownError","_throwIfClosed","Observable","Subscription","refCount","higherOrderRefCount","createOperatorSubscriber","hasLift","ConnectableObservable","source","subjectFactory","lift","getSubject","subscribe","subject","_subject","isStopped","_teardown","_refCount","_connection","unsubscribe","connect","connection","add","undefined","complete","err","error","EMPTY","concatAll","popScheduler","from","concat","args","innerFrom","defer","observableFactory","isFunction","throwError","errorOrErrorFactory","scheduler","errorFactory","init","schedule","mergeAll","mergeMap","concatMap","project","resultSelector","operate","defaultIfEmpty","defaultValue","hasValue","filter","predicate","thisArg","index","call","finalize","callback","EmptyError","take","throwIfEmpty","identity","first","hasDefaultValue","arguments","length","pipe","v","i","takeLast","last","map","mapTo","refCounter","sharedConnection","conn","scanInternals","scan","accumulator","seed","hasSeed","emitOnNext","emitBeforeComplete","hasState","state","startWith","values","switchMap","innerSubscriber","isComplete","checkComplete","innerIndex","outerIndex","innerValue","count","seen","buffer","push","shift","takeWhile","inclusive","result","tap","observerOrNext","tapObserver","isUnsub","defaultErrorFactory","PRIMARY_OUTLET","RouteTitleKey","Symbol","ParamsAsMap","params","has","name","Object","prototype","hasOwnProperty","get","Array","isArray","getAll","keys","convertToParamMap","defaultUrlMatcher","segments","segmentGroup","route","parts","path","split","pathMatch","hasChildren","posParams","part","segment","isParameter","startsWith","substring","consumed","slice","a","b","shallowEqual","k1","k2","key","equalArraysOrString","aSorted","sort","bSorted","every","val","flatten","arr","apply","and","bools","some","prop","wrapIntoObservable","isObservable","isPromise","Promise","resolve","of","NG_DEV_MODE","ngDevMode","pathCompareMap","equalSegmentGroups","containsSegmentGroup","paramCompareMap","equalParams","containsParams","containsTree","container","containee","options","paths","root","matrixParams","queryParams","fragment","equalPath","matrixParamsMatch","numberOfChildren","c","children","containsSegmentGroupHelper","containeePaths","current","containerPaths","containeeSegment","parameters","UrlTree","UrlSegmentGroup","RuntimeError","queryParamMap","_queryParamMap","toString","DEFAULT_SERIALIZER","serialize","forEach","k","parent","serializePaths","UrlSegment","parameterMap","_parameterMap","serializePath","as","bs","fn","res","child","childOutlet","UrlSerializer","Injectable","providedIn","useFactory","DefaultUrlSerializer","parse","url","p","UrlParser","parseRootSegment","parseQueryParams","parseFragment","tree","query","serializeQueryParams","encodeUriFragment","join","serializeSegment","primary","mapChildrenIntoArray","encodeUriString","s","encodeURIComponent","replace","encodeUriQuery","encodeURI","encodeUriSegment","decode","decodeURIComponent","decodeQuery","serializeMatrixParams","strParams","SEGMENT_RE","matchSegments","str","match","QUERY_PARAM_RE","matchQueryParams","QUERY_PARAM_VALUE_RE","matchUrlQueryParamValue","remaining","consumeOptional","peekStartsWith","parseChildren","parseQueryParam","parseSegment","capture","parseParens","parseMatrixParams","parseParam","valueMatch","decodedKey","decodedVal","currentVal","allowPrimary","outletName","indexOf","createRoot","rootCandidate","squashSegmentGroup","newChildren","childCandidate","mergeTrivialChildren","isUrlTree","createUrlTreeFromSnapshot","relativeTo","commands","relativeToUrlSegmentGroup","createSegmentGroupFromRoute","createUrlTreeFromSegmentGroup","targetGroup","createSegmentGroupFromRouteRecursive","currentRoute","childOutlets","childSnapshot","outlet","rootSegmentGroup","nav","computeNavigation","toRoot","position","findStartingPositionForTargetGroup","newSegmentGroup","processChildren","updateSegmentGroupChildren","updateSegmentGroup","createUrlTree","urlTree","createTreeUsingPathIndex","lastPathIndex","startingPosition","findStartingPosition","snapshot","_urlSegment","_lastPathIndex","isMatrixParams","command","outlets","segmentPath","isCommandWithOutlets","oldRoot","oldSegmentGroup","qp","replaceSegment","newRoot","oldSegment","newSegment","Navigation","isAbsolute","numberOfDoubleDots","cmdWithOutlet","find","reduce","cmd","cmdIdx","urlPart","partIndex","Position","target","NaN","modifier","createPositionApplyingDoubleDots","group","g","ci","dd","getOutlets","startIndex","m","prefixedWith","slicedCommands","commandIndex","pathIndex","createNewSegmentGroup","currentCommandIndex","currentPathIndex","noMatch","curr","compare","createNewSegmentChildren","stringify","IMPERATIVE_NAVIGATION","RouterEvent","id","NavigationStart","navigationTrigger","restoredState","NavigationEnd","urlAfterRedirects","NavigationCancel","reason","code","NavigationSkipped","NavigationError","RoutesRecognized","GuardsCheckStart","GuardsCheckEnd","shouldActivate","ResolveStart","ResolveEnd","RouteConfigLoadStart","RouteConfigLoadEnd","ChildActivationStart","routeConfig","ChildActivationEnd","ActivationStart","ActivationEnd","Scroll","routerEvent","anchor","pos","stringifyEvent","type","LegacyCreateUrlTree","currentState","currentUrlTree","CreateUrlTreeUsingSnapshot","relativeToSnapshot","e","console","warn","CreateUrlTreeStrategy","useClass","Tree","_root","t","pathFromRoot","n","findNode","firstChild","siblings","findPath","cc","node","unshift","TreeNode","nodeChildrenAsMap","RouterState","setRouterState","rootComponent","createEmptyStateSnapshot","emptyUrl","emptyParams","emptyData","emptyQueryParams","activated","ActivatedRoute","ActivatedRouteSnapshot","RouterStateSnapshot","data","component","futureSnapshot","d","_futureSnapshot","_routerState","paramMap","_paramMap","inheritedParamsDataResolve","paramsInheritanceStrategy","inheritingStartingFrom","flattenInherited","_resolvedData","title","urlSegment","_resolve","matched","serializeNode","advanceActivatedRoute","currentSnapshot","nextSnapshot","shallowEqualArrays","equalUrlParams","equalSegments","parentsMismatch","equalParamsAndUrlSegments","createRouterState","routeReuseStrategy","prevState","createNode","shouldReuseRoute","createOrReuseChildren","shouldAttach","detachedRouteHandle","retrieve","createActivatedRoute","NAVIGATION_CANCELING_ERROR","urlSerializer","redirect","redirectTo","navigationBehaviorOptions","navigationCancelingError","message","redirectUrl","Error","cancellationCode","isRedirectingNavigationCancelingError","isNavigationCancelingError","OutletContext","ChildrenOutletContexts","Map","onChildOutletCreated","childName","context","getOrCreateContext","contexts","set","onChildOutletDestroyed","getContext","attachRef","onOutletDeactivated","onOutletReAttached","RouterOutlet","EventEmitter","inject","ViewContainerRef","ChangeDetectorRef","EnvironmentInjector","ngOnChanges","changes","firstChange","previousValue","isTrackedInParentContexts","deactivate","parentContexts","initializeOutletWithName","ngOnDestroy","ngOnInit","attach","activateWith","injector","isActivated","instance","activatedRoute","_activatedRoute","activatedRouteData","detach","location","cmp","detachEvents","emit","ref","insert","hostView","attachEvents","destroy","deactivateEvents","resolverOrInjector","childContexts","OutletInjector","isComponentFactoryResolver","factory","resolveComponentFactory","createComponent","environmentInjector","changeDetector","markForCheck","activateEvents","Directive","selector","exportAs","standalone","Input","Output","token","notFoundValue","item","ɵEmptyOutletComponent","Component","template","imports","currentInjector","providers","_injector","createEnvironmentInjector","getLoadedRoutes","_loadedRoutes","getLoadedInjector","_loadedInjector","getLoadedComponent","_loadedComponent","getProvidersInjector","validateConfig","config","parentPath","requireStandaloneComponents","fullPath","getFullPath","validateNode","isStandalone","loadComponent","loadChildren","canActivate","matcher","charAt","exp","assertStandalone","standardizeConfig","r","EmptyOutletComponent","getOutlet","routes","sortedConfig","getClosestRouteInjector","activateRoutes","rootContexts","forwardEvent","ActivateRoutes","targetRouterState","currentRouterState","activate","futureState","currState","futureRoot","currRoot","deactivateChildRoutes","activateChildRoutes","futureNode","currNode","futureChild","childOutletName","deactivateRoutes","deactivateRouteAndItsChildren","parentContext","future","shouldDetach","detachAndStoreRouteSubtree","deactivateRouteAndOutlet","componentRef","store","resolver","stored","cmpFactoryResolver","ComponentFactoryResolver","CanActivate","CanDeactivate","getAllRouteGuards","getChildRouteGuards","getCanActivateChild","canActivateChild","guards","tokenOrFunction","NOT_FOUND","isInjectable","futurePath","checks","canDeactivateChecks","canActivateChecks","prevChildren","getRouteGuards","shouldRun","shouldRunGuardsAndResolvers","runGuardsAndResolvers","mode","isBoolean","isCanLoad","guard","canLoad","isCanActivate","isCanActivateChild","isCanDeactivate","canDeactivate","isCanMatch","canMatch","isEmptyError","INITIAL_VALUE","prioritizedGuardValue","obs","combineLatest","o","results","targetSnapshot","guardsResult","runCanDeactivateChecks","runCanActivateChecks","futureRSS","currRSS","check","runCanDeactivate","fireChildActivationStart","fireActivationStart","runCanActivateChild","runCanActivate","futureARS","canActivateObservables","closestInjector","getTokenOrFunctionIdentity","guardVal","runInContext","canActivateChildGuards","reverse","_","canActivateChildGuardsMapped","guardsMapped","currARS","canDeactivateObservables","runCanLoadGuards","canLoadObservables","injectionToken","redirectIfUrlTree","redirectingNavigationError","runCanMatchGuards","canMatchObservables","consumedSegments","remainingSegments","positionalParamSegments","matchWithChecks","getOrCreateRouteInjectorIfNeeded","slicedSegments","containsEmptyPathMatchesWithNamedOutlets","createChildrenForEmptyPaths","_sourceSegment","_segmentIndexShift","containsEmptyPathMatches","addEmptyPathsToChildrenIfNeeded","emptyPathMatch","primarySegment","isImmediateMatch","rawSegment","noLeftoversInUrl","NoMatch","AbsoluteRedirect","absoluteRedirect","newTree","namedOutletsRedirect","canLoadFails","applyRedirects","configLoader","ApplyRedirects","splitGroup","expanded$","expandSegmentGroup","urlTrees$","catchError","allowRedirects","noMatchError","mapped$","expandChildren","expandSegment","sortedRoutes","sortByMatchingOutlets","expandedChild","expandSegmentAgainstRoute","matchSegmentAgainstRoute","expandSegmentAgainstRouteUsingRedirect","expandWildCardWithParamsAgainstRouteUsingRedirect","expandRegularSegmentAgainstRouteUsingRedirect","applyRedirectCommands","lineralizeSegments","newSegments","rawSegmentGroup","loaded$","cfg","childConfig$","getChildConfig","routerConfig","childInjector","childConfig","splitSegmentGroup","matchedOnOutlet","cs","shouldLoadResult","applyRedirectCreateUrlTree","createSegmentGroup","createQueryParams","redirectToParams","actualParams","copySourceValue","sourceName","updatedSegments","createSegments","redirectToSegments","actualSegments","findPosParam","findOrReturn","redirectToUrlSegment","idx","splice","applyRedirectsFn","extractedUrl","newObservableError","recognize","rootComponentType","Recognizer","processSegmentGroup","freeze","rootNode","routeState","inheritParamsAndData","routeNode","processSegment","outletChildren","rxjsLast","mergedChildren","mergeEmptyPathMatches","checkOutletNameUniqueness","sortActivatedRouteSnapshots","processSegmentAgainstRoute","x","matchResult","pathIndexShift","getPathIndexShift","getData","getSourceSegmentGroup","getResolve","nodes","localeCompare","hasEmptyPathConfig","mergedNodes","Set","duplicateEmptyPathNode","resultNode","mergedNode","names","routeWithSameOutletName","getCorrectedPathIndexShift","_segmentIndexShiftCorrected","serializer","recognizeFn","canActivateChecksResolved","runResolve","hasStaticTitle","resolveNode","resolvedData","getDataKeys","getResolver","obj","getOwnPropertySymbols","resolverValue","switchTap","nextResult","ROUTES","InjectionToken","RouterConfigLoader","compiler","WeakMap","componentLoaders","onLoadStartListener","loadRunner","maybeUnwrapDefaultExport","onLoadEndListener","delete","loader","parentInjector","childrenLoaders","moduleFactoryOrRoutes$","loadModuleFactoryOrRoutes","factoryOrRoutes","rawRoutes","create","InjectFlags","Self","Optional","deprecatedResult","deprecatedLoadChildrenString","NgModuleFactory","compileModuleAsync","i0","isWrappedDefaultExport","input","NavigationTransitions","hasRequestedNavigation","navigationId","onLoadStart","events","onLoadEnd","transitions","handleNavigationRequest","request","setupNavigations","router","targetPageId","currentRawUrl","urlHandlingStrategy","extract","rawUrl","extras","reject","promise","routerState","overallTransitionState","completed","errored","currentNavigation","initialUrl","trigger","previousNavigation","lastSuccessfulNavigation","browserUrlTree","urlTransition","navigated","onSameUrlNavigation","serializeUrl","rawUrlTree","shouldProcessUrl","isBrowserTriggeredNavigation","transition","finalUrl","urlUpdateStrategy","skipLocationChange","merge","setBrowserUrl","routesRecognized","navStart","createEmptyState","replaceUrl","guardsStart","checkGuards","evt","guardsEnd","restoreHistory","cancelNavigationTransition","resolveStart","dataResolved","resolveData","resolveEnd","loadComponents","loaders","loadedComponent","afterPreactivation","titleStrategy","updateTitle","cancelationReason","navCancel","mergedTree","scheduleNavigation","navError","errorHandler","ee","TitleStrategy","buildTitle","pageTitle","getResolvedTitleForRoute","DefaultTitleStrategy","setTitle","i1","RouteReuseStrategy","DefaultRouteReuseStrategy","BaseRouteReuseStrategy","detachedTree","UrlHandlingStrategy","DefaultUrlHandlingStrategy","newUrlPart","wholeUrl","defaultErrorHandler","defaultMalformedUriErrorHandler","exactMatchOptions","subsetMatchOptions","Router","navigationTransitions","browserPageId","getState","ɵrouterPageId","Console","ROUTER_CONFIGURATION","optional","malformedUriErrorHandler","canceledNavigationResolution","Location","isNgZoneEnabled","NgZone","isInAngularZone","resetConfig","lastSuccessfulId","currentPageId","resetRootComponentType","initialNavigation","setUpLocationChangeListener","navigateToSyncWithBrowser","locationSubscription","event","setTimeout","stateCopy","parseUrl","getCurrentNavigation","dispose","disposed","navigationExtras","queryParamsHandling","preserveFragment","f","q","removeEmptyProps","urlCreationStrategy","navigateByUrl","navigate","validateCommands","isActive","matchOptions","priorPromise","rej","catch","generateNgRouterState","isCurrentPathEqualTo","replaceState","go","restoringFromCaughtError","targetPagePosition","browserUrlUpdateOccurred","historyGo","resetState","resetUrlToCurrentUrlTree","routerPageId","RouterLink","tabIndexAttribute","renderer","el","locationStrategy","tagName","nativeElement","toLowerCase","isAnchorElement","updateHref","setTabIndexIfNotOnNativeEl","_preserveFragment","coerceToBoolean","_skipLocationChange","_replaceUrl","newTabIndex","applyAttributeValue","onChanges","routerLink","onClick","button","ctrlKey","shiftKey","altKey","metaKey","href","prepareExternalUrl","sanitizedValue","ɵɵsanitizeUrlOrResourceUrl","attrName","attrValue","setAttribute","removeAttribute","Attribute","HostBinding","HostListener","RouterLinkActive","_isActive","element","cdr","link","exact","routerEventsSubscription","update","ngAfterContentInit","links","subscribeToEachLinkOnChanges","linkInputChangesSubscription","allLinkChanges","toArray","isLinkActive","routerLinkActive","classes","then","hasActiveLinks","addClass","removeClass","ariaCurrentWhenActive","isActiveChange","isActiveMatchOptions","routerLinkActiveOptions","isActiveCheckFn","ContentChildren","descendants","PreloadingStrategy","PreloadAllModules","preload","NoPreloading","RouterPreloader","preloadingStrategy","setUpPreloading","processRoutes","injectorForCurrentRoute","injectorForChildren","preloadConfig","loadedChildren$","recursiveLoadChildren$","loadComponent$","i2.RouterConfigLoader","ROUTER_SCROLLER","RouterScroller","viewportScroller","zone","scrollPositionRestoration","anchorScrolling","setHistoryScrollRestoration","createScrollEvents","scrollEventsSubscription","consumeScrollEvents","lastId","getScrollPosition","lastSource","restoredId","scheduleScrollEvent","scrollToPosition","scrollToAnchor","runOutsideAngular","run","provideRouter","features","makeEnvironmentProviders","provide","multi","useValue","ROUTER_IS_PROVIDED","rootRoute","deps","APP_BOOTSTRAP_LISTENER","getBootstrapListener","feature","ɵproviders","routerFeature","kind","ɵkind","routerIsProvidedDevModeCheck","ENVIRONMENT_INITIALIZER","provideRoutes","ViewportScroller","Injector","bootstrappedComponentRef","ApplicationRef","components","bootstrapDone","BOOTSTRAP_DONE","INITIAL_NAVIGATION","ROUTER_PRELOADER","componentTypes","withEnabledBlockingInitialNavigation","APP_INITIALIZER","locationInitialized","LOCATION_INITIALIZED","afterNextNavigation","action","redirecting","withDisabledInitialNavigation","withDebugTracing","log","groupEnd","withPreloading","useExisting","withRouterConfig","withHashLocation","LocationStrategy","HashLocationStrategy","ROUTER_DIRECTIVES","ROUTER_FORROOT_GUARD","routerNgProbeToken","NgProbeToken","RouterModule","forRoot","ngModule","ROUTER_PROVIDERS","enableTracing","provideForRootGuard","SkipSelf","useHash","provideHashLocationStrategy","providePathLocationStrategy","provideRouterScroller","provideInitialNavigation","provideRouterInitializer","forChild","NgModule","exports","Inject","scrollOffset","setOffset","PathLocationStrategy","ROUTER_INITIALIZER","VERSION","Version"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]}