{"version":3,"file":"apps_preview-ui_src_bootstrap_ts.js","mappings":"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","sources":["./apps/preview-ui/src/app/app.component.ts","./apps/preview-ui/src/app/app.component.html","./apps/preview-ui/src/app/app.module.ts","./apps/preview-ui/src/bootstrap.ts","./apps/preview-ui/src/environments/environment.next.ts"],"sourcesContent":["import {ChangeDetectorRef, Component, Inject, Injector, OnInit} from '@angular/core';\nimport {PrimeNGConfig} from 'primeng/api';\nimport {\n  BaseAppComponent,\n  ChangeListenerService,\n  ChangeProviderService,\n  GlobalPluginLoader,\n  IndexedDbStorageService,\n  RemotePluginLoaderService\n} from '@dontcode/sandbox';\nimport {environment} from '../environments/environment';\nimport {CommonConfigService, ComponentLoaderService, DONT_CODE_CORE} from \"@dontcode/plugin-common\";\nimport {Core, DontCodeModelManager, DontCodePreviewManager, DontCodeStoreManager} from \"@dontcode/core\";\nimport { HttpClient } from '@angular/common/http';\nimport { SandboxRepositorySchema } from '@dontcode/sandbox/lib/shared/definitions';\n\n@Component({\n  // eslint-disable-next-line @angular-eslint/component-selector\n  selector: 'preview-ui-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent extends BaseAppComponent implements OnInit {\n  testMode = false;\n\n  constructor(\n    private primengConfig: PrimeNGConfig,\n    pluginLoader: RemotePluginLoaderService,\n    provider: ChangeProviderService,\n    storage:IndexedDbStorageService,\n    listener:ChangeListenerService,\n    globalPluginLoader:GlobalPluginLoader,\n    loaderService: ComponentLoaderService,\n    changeProviderService: ChangeProviderService,\n    configService: CommonConfigService,\n    httpClient: HttpClient,\n    injector:Injector,\n    ref: ChangeDetectorRef,\n    @Inject(DONT_CODE_CORE)\n    dontCodeCore: Core,\n    modelMgr:DontCodeModelManager,\n    storeMgr:DontCodeStoreManager,\n    previewMgr:DontCodePreviewManager\n  ) {\n    super(provider, storage, listener, pluginLoader, globalPluginLoader, loaderService, changeProviderService, configService, httpClient, injector\n    ,ref, dontCodeCore, modelMgr, storeMgr, previewMgr );\n\n    this.defaultRepositoryUrl='assets/repositories/stable.json';\n      // Manages the different cases of loading the repository of plugins\n    this.runtimeConfig = (window as any).dontCodeConfig;\n    if ((this.runtimeConfig!=null) && (this.runtimeConfig?.repositoryUrl==null)) {\n      this.runtimeConfig.repositoryUrl=environment.repositoryUrl;\n    }\n  }\n\n  override ngOnInit(): void {\n    this.primengConfig.ripple = true;\n    super.ngOnInit();\n\n  }\n\n  override afterInitialization(config: SandboxRepositorySchema, repositoryUrl:string): Promise<void> {\n    return super.afterInitialization(config, repositoryUrl).then (() => {\n      // Check if we need to load a project ?\n      const projectToLoad = this.runtimeConfig.projectId;\n      if (projectToLoad) {\n        this.listener.loadProject(projectToLoad).then((project) => {\n          console.log('Loaded project ', project.name);\n        });\n      }\n    });\n  }\n\n}\n","<div *ngIf=\"mainTab()\">\n  <ng-container *ngIf=\"!testMode\">\n    <dontcode-sandbox-main></dontcode-sandbox-main>\n  </ng-container>\n  <ng-container *ngIf=\"testMode\">\n  </ng-container>\n</div>\n<div *ngIf=\"!mainTab()\"><router-outlet></router-outlet></div>\n","import {NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\n\nimport {AppComponent} from './app.component';\nimport {RouterModule} from '@angular/router';\nimport {SandboxModule} from \"@dontcode/sandbox\";\nimport {BrowserAnimationsModule} from \"@angular/platform-browser/animations\";\nimport {environment} from \"../environments/environment\";\nimport {HttpClientModule} from \"@angular/common/http\";\nimport {PluginCommonModule} from \"@dontcode/plugin-common\";\nimport {InputTextModule} from \"primeng/inputtext\";\nimport {FormsModule} from \"@angular/forms\";\nimport {ButtonModule} from \"primeng/button\";\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    HttpClientModule,\n    RouterModule.forRoot([], {\n    enableTracing: false,\n    useHash: true,\n    initialNavigation: 'enabledBlocking'\n}),\n    PluginCommonModule.forRoot(),\n    SandboxModule.forRoot({\n      indexedDbName: 'Dont-code Previewer',\n      applicationName: 'Previewer',\n      templateFileUrl: 'assets/dev/templates.json'\n    }),\n    InputTextModule,\n    FormsModule,\n    ButtonModule\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n","export const environment = {\n  production: false,\n  //repositoryUrl: 'assets/repositories/next.json'\n  repositoryUrl: 'https://test.dont-code.net/demo/repository-next.json'\n};\n"],"names":["ChangeDetectorRef","Injector","PrimeNGConfig","BaseAppComponent","ChangeListenerService","ChangeProviderService","GlobalPluginLoader","IndexedDbStorageService","RemotePluginLoaderService","environment","CommonConfigService","ComponentLoaderService","DONT_CODE_CORE","DontCodeModelManager","DontCodePreviewManager","DontCodeStoreManager","HttpClient","i0","AppComponent","constructor","primengConfig","pluginLoader","provider","storage","listener","globalPluginLoader","loaderService","changeProviderService","configService","httpClient","injector","ref","dontCodeCore","modelMgr","storeMgr","previewMgr","defaultRepositoryUrl","runtimeConfig","window","dontCodeConfig","repositoryUrl","ngOnInit","ripple","afterInitialization","config","then","projectToLoad","projectId","loadProject","project","console","log","name","selectors","features","decls","vars","consts","template","BrowserModule","RouterModule","SandboxModule","BrowserAnimationsModule","HttpClientModule","PluginCommonModule","InputTextModule","FormsModule","ButtonModule","AppModule","bootstrap","forRoot","enableTracing","useHash","initialNavigation","indexedDbName","applicationName","templateFileUrl","declarations","imports","enableProdMode","production","__NgCli_bootstrap_1","bootstrapModule","catch","err","error"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}