{"version":3,"file":"apps_preview-ui_src_bootstrap_ts.js","mappings":"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","sources":["./apps/preview-ui/src/app/app.component.ts","./apps/preview-ui/src/app/app.component.html","./apps/preview-ui/src/app/app.module.ts","./apps/preview-ui/src/bootstrap.ts","./apps/preview-ui/src/environments/environment.next.ts"],"sourcesContent":["import {Component, Inject, Injector} from '@angular/core';\nimport {PrimeNGConfig} from 'primeng/api';\nimport {\n  BaseAppComponent,\n  ChangeListenerService,\n  ChangeProviderService,\n  GlobalPluginLoader,\n  IndexedDbStorageService,\n  RemotePluginLoaderService\n} from '@dontcode/sandbox';\nimport {environment} from '../environments/environment';\nimport {ComponentLoaderService, DONT_CODE_CORE} from \"@dontcode/plugin-common\";\nimport {Core, DontCodeModelManager, DontCodePreviewManager, DontCodeStoreManager} from \"@dontcode/core\";\n\n@Component({\n  selector: 'preview-ui-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent extends BaseAppComponent {\n  testMode = false;\n\n  constructor(\n    private primengConfig: PrimeNGConfig,\n    pluginLoader: RemotePluginLoaderService,\n    provider: ChangeProviderService,\n    storage:IndexedDbStorageService,\n    listener:ChangeListenerService,\n    globalPluginLoader:GlobalPluginLoader,\n    loaderService: ComponentLoaderService,\n    changeProviderService: ChangeProviderService,\n    injector:Injector,\n    @Inject(DONT_CODE_CORE)\n    dontCodeCore: Core,\n    modelMgr:DontCodeModelManager,\n    storeMgr:DontCodeStoreManager,\n    previewMgr:DontCodePreviewManager\n  ) {\n    super(provider, storage, listener, pluginLoader, globalPluginLoader, loaderService, changeProviderService,injector\n    ,dontCodeCore, modelMgr, storeMgr, previewMgr );\n      // Manages the different cases of loading the repository of plugins\n    this.runtimeConfig = (window as any).dontCodeConfig;\n    // To do: Get the list from the Plugin Marketplace: https://test.dont-code.net/data/Plugin%20Module\n    if ((this.runtimeConfig!=null) && (this.runtimeConfig?.repositoryUrl==null)) {\n      this.runtimeConfig.repositoryUrl=environment.repositoryUrl;\n    }\n  }\n\n  override ngOnInit(): void {\n    this.primengConfig.ripple = true;\n    super.ngOnInit();\n\n    // Wait for all plugins to be loaded before loading the project\n    this.pluginsLoaded?.then (() => {\n      // Check if we need to load a project ?\n      const projectToLoad = (window as any).dontCodeConfig.projectId;\n      if (projectToLoad) {\n        this.listener.loadProject(projectToLoad).then((project) => {\n          console.log('Loaded project ', project.name);\n        });\n      }\n    });\n  }\n\n}\n","<div *ngIf=\"mainTab()\">\n  <ng-container *ngIf=\"!testMode\">\n    <dontcode-sandbox-main></dontcode-sandbox-main>\n  </ng-container>\n  <ng-container *ngIf=\"testMode\">\n  </ng-container>\n</div>\n<div *ngIf=\"!mainTab()\"><router-outlet></router-outlet></div>\n","import {NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\n\nimport {AppComponent} from './app.component';\nimport {RouterModule} from '@angular/router';\nimport {SandboxModule} from \"@dontcode/sandbox\";\nimport {BrowserAnimationsModule} from \"@angular/platform-browser/animations\";\nimport {environment} from \"../environments/environment\";\nimport {HttpClientModule} from \"@angular/common/http\";\nimport {PluginCommonModule} from \"@dontcode/plugin-common\";\nimport {InputTextModule} from \"primeng/inputtext\";\nimport {FormsModule} from \"@angular/forms\";\nimport {ButtonModule} from \"primeng/button\";\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    HttpClientModule,\n    RouterModule.forRoot([], {\n    enableTracing: false,\n    useHash: true,\n    initialNavigation: 'enabledBlocking'\n}),\n    PluginCommonModule.forRoot(),\n    SandboxModule.forRoot({\n      webSocketUrl: environment.webSocketUrl,\n      projectUrl: environment.projectApiUrl,\n      documentUrl: environment.documentApiUrl,\n      storeUrl: environment.storeApiUrl,\n      indexedDbName: 'Dont-code Previewer',\n      applicationName: 'Previewer',\n      templateFileUrl: 'assets/dev/templates.json'\n    }),\n    InputTextModule,\n    FormsModule,\n    ButtonModule\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n","export const environment = {\n  production: false,\n  webSocketUrl: 'wss://test.dont-code.net/preview',\n  repositoryUrl: 'assets/repositories/next.json',  // To be switched to https://test.dont-code.net/data/Plugin%20Module whenever it is ready\n  storeApiUrl: 'https://test.dont-code.net/data',\n  projectApiUrl: 'https://test.dont-code.net/demo_project',\n  documentApiUrl: 'https://test.dont-code.net/documents',\n};\n"],"names":["Injector","PrimeNGConfig","BaseAppComponent","ChangeListenerService","ChangeProviderService","GlobalPluginLoader","IndexedDbStorageService","RemotePluginLoaderService","environment","ComponentLoaderService","DONT_CODE_CORE","DontCodeModelManager","DontCodePreviewManager","DontCodeStoreManager","i0","AppComponent","constructor","primengConfig","pluginLoader","provider","storage","listener","globalPluginLoader","loaderService","changeProviderService","injector","dontCodeCore","modelMgr","storeMgr","previewMgr","runtimeConfig","window","dontCodeConfig","repositoryUrl","ngOnInit","ripple","pluginsLoaded","then","projectToLoad","projectId","loadProject","project","console","log","name","selectors","features","decls","vars","consts","template","BrowserModule","RouterModule","SandboxModule","BrowserAnimationsModule","HttpClientModule","PluginCommonModule","InputTextModule","FormsModule","ButtonModule","AppModule","bootstrap","forRoot","enableTracing","useHash","initialNavigation","webSocketUrl","projectUrl","projectApiUrl","documentUrl","documentApiUrl","storeUrl","storeApiUrl","indexedDbName","applicationName","templateFileUrl","declarations","imports","enableProdMode","production","__NgCli_bootstrap_1","bootstrapModule","catch","err","error"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}