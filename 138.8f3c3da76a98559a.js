(self.webpackChunkpreview_ui=self.webpackChunkpreview_ui||[]).push([[138],{4707:(_e,G,P)=>{P.d(G,{t:()=>q});var j=P(7579),U=P(6063);class q extends j.x{constructor(E=1/0,R=1/0,$=U.l){super(),this._bufferSize=E,this._windowTime=R,this._timestampProvider=$,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=R===1/0,this._bufferSize=Math.max(1,E),this._windowTime=Math.max(1,R)}next(E){const{isStopped:R,_buffer:$,_infiniteTimeWindow:D,_timestampProvider:L,_windowTime:O}=this;R||($.push(E),!D&&$.push(L.now()+O)),this._trimBuffer(),super.next(E)}_subscribe(E){this._throwIfClosed(),this._trimBuffer();const R=this._innerSubscribe(E),{_infiniteTimeWindow:$,_buffer:D}=this,L=D.slice();for(let O=0;O<L.length&&!E.closed;O+=$?1:2)E.next(L[O]);return this._checkFinalizedStatuses(E),R}_trimBuffer(){const{_bufferSize:E,_timestampProvider:R,_buffer:$,_infiniteTimeWindow:D}=this,L=(D?1:2)*E;if(E<1/0&&L<$.length&&$.splice(0,$.length-L),!D){const O=R.now();let p=0;for(let _=1;_<$.length&&$[_]<=O;_+=2)p=_;p&&$.splice(0,p+1)}}}},7579:(_e,G,P)=>{P.d(G,{u:()=>D,x:()=>$});var j=P(9751),U=P(727);const H=(0,P(3888).d)(L=>function(){L(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var E=P(8737),R=P(2806);let $=(()=>{class L extends j.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(p){const _=new D(this,this);return _.operator=p,_}_throwIfClosed(){if(this.closed)throw new H}next(p){(0,R.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _ of this.currentObservers)_.next(p)}})}error(p){(0,R.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=p;const{observers:_}=this;for(;_.length;)_.shift().error(p)}})}complete(){(0,R.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:p}=this;for(;p.length;)p.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var p;return(null===(p=this.observers)||void 0===p?void 0:p.length)>0}_trySubscribe(p){return this._throwIfClosed(),super._trySubscribe(p)}_subscribe(p){return this._throwIfClosed(),this._checkFinalizedStatuses(p),this._innerSubscribe(p)}_innerSubscribe(p){const{hasError:_,isStopped:je,observers:be}=this;return _||je?U.Lc:(this.currentObservers=null,be.push(p),new U.w0(()=>{this.currentObservers=null,(0,E.P)(be,p)}))}_checkFinalizedStatuses(p){const{hasError:_,thrownError:je,isStopped:be}=this;_?p.error(je):be&&p.complete()}asObservable(){const p=new j.y;return p.source=this,p}}return L.create=(O,p)=>new D(O,p),L})();class D extends ${constructor(O,p){super(),this.destination=O,this.source=p}next(O){var p,_;null===(_=null===(p=this.destination)||void 0===p?void 0:p.next)||void 0===_||_.call(p,O)}error(O){var p,_;null===(_=null===(p=this.destination)||void 0===p?void 0:p.error)||void 0===_||_.call(p,O)}complete(){var O,p;null===(p=null===(O=this.destination)||void 0===O?void 0:O.complete)||void 0===p||p.call(O)}_subscribe(O){var p,_;return null!==(_=null===(p=this.source)||void 0===p?void 0:p.subscribe(O))&&void 0!==_?_:U.Lc}}},515:(_e,G,P)=>{P.d(G,{E:()=>U});const U=new(P(9751).y)(E=>E.complete())},2843:(_e,G,P)=>{P.d(G,{_:()=>q});var j=P(9751),U=P(576);function q(H,E){const R=(0,U.m)(H)?H:()=>H,$=D=>D.error(R());return new j.y(E?D=>E.schedule($,0,D):$)}},5698:(_e,G,P)=>{P.d(G,{q:()=>H});var j=P(515),U=P(4482),q=P(5403);function H(E){return E<=0?()=>j.E:(0,U.e)((R,$)=>{let D=0;R.subscribe((0,q.x)($,L=>{++D<=E&&($.next(L),E<=D&&$.complete())}))})}},6063:(_e,G,P)=>{P.d(G,{l:()=>j});const j={now:()=>(j.delegate||Date).now(),delegate:void 0}},138:(_e,G,P)=>{P.r(G),P.d(G,{AbstractActionHandler:()=>qy,AbstractDontCodeStoreProvider:()=>rg,AbstractSchemaItem:()=>ye,Change:()=>z,ChangeType:()=>g,DataTransformationInfo:()=>ep,DontCodeChangeManager:()=>fo,DontCodeCore:()=>vo,DontCodeModel:()=>l,DontCodeModelManager:()=>W,DontCodeModelPointer:()=>M,DontCodePluginManager:()=>no,DontCodePreviewManager:()=>lo,DontCodeProject:()=>tg,DontCodeSchema:()=>Mr,DontCodeSchemaEnum:()=>za,DontCodeSchemaEnumValue:()=>fn,DontCodeSchemaManager:()=>to,DontCodeSchemaObject:()=>Xe,DontCodeSchemaProperty:()=>Xa,DontCodeSchemaRef:()=>Qa,DontCodeSchemaRoot:()=>Ha,DontCodeSchemaValue:()=>Ja,DontCodeStoreCriteria:()=>kd,DontCodeStoreCriteriaOperator:()=>se,DontCodeStoreManager:()=>uo,DontCodeTestManager:()=>nr,Message:()=>tp,MessageType:()=>Fr,ModelQuerySingleResult:()=>rp,MoneyAmount:()=>np,SpecialFields:()=>Ss,StoreProviderHelper:()=>oe,concatIterable:()=>Va,dtcde:()=>Es});var j=P(4707),U=P(7579),q=P(9751),H=P(727);class E extends H.w0{constructor(e,r){super()}schedule(e,r=0){return this}}const R={setInterval(t,e,...r){const{delegate:n}=R;return n?.setInterval?n.setInterval(t,e,...r):setInterval(t,e,...r)},clearInterval(t){const{delegate:e}=R;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var $=P(8737),L=P(6063);class O{constructor(e,r=O.now){this.schedulerActionCtor=e,this.now=r}schedule(e,r=0,n){return new this.schedulerActionCtor(this,e).schedule(n,r)}}O.now=L.l.now;const je=new class p extends O{constructor(e,r=O.now){super(e,r),this.actions=[],this._active=!1}flush(e){const{actions:r}=this;if(this._active)return void r.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=r.shift());if(this._active=!1,n){for(;e=r.shift();)e.unsubscribe();throw n}}}(class D extends E{constructor(e,r){super(e,r),this.scheduler=e,this.work=r,this.pending=!1}schedule(e,r=0){var n;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,r)),this.pending=!0,this.delay=r,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(a,this.id,r),this}requestAsyncId(e,r,n=0){return R.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,r,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return r;null!=r&&R.clearInterval(r)}execute(e,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,r);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,r){let i,n=!1;try{this.work(e)}catch(a){n=!0,i=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:r}=this,{actions:n}=r;this.work=this.state=this.scheduler=null,this.pending=!1,(0,$.P)(n,this),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,super.unsubscribe()}}});var be=P(3532);var bs=P(4482),ms=P(5403),$s=P(8421),Rs=P(5032),As=P(5698),Yn=P(2076),Is=P(2843);function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vn(t,e,r){return e&&Wn(t.prototype,e),r&&Wn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ue(t){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(t)}function Ge(t,e){return(Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n})(t,e)}function Hn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Be(t,e,r){return(Be=Hn()?Reflect.construct.bind():function(i,a,o){var s=[null];s.push.apply(s,a);var c=new(Function.bind.apply(i,s));return o&&Ge(c,o.prototype),c}).apply(null,arguments)}function Jr(t){var e="function"==typeof Map?new Map:void 0;return Jr=function(n){if(null===n||!function Ds(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Be(n,arguments,Ue(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ge(i,n)},Jr(t)}function Ns(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Cs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zn(t,e){if(t){if("string"==typeof t)return Qr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qr(t,e)}}function Qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var B=Object.prototype.hasOwnProperty;function ce(t,e){return(t=t.slice()).push(e),t}function Xr(t,e){return(e=e.slice()).unshift(t),e}var Gs=function(t){!function ws(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ge(t,e)}(r,t);var e=function Ms(t){var e=Hn();return function(){var i,n=Ue(t);if(e){var a=Ue(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Ns(this,i)}}(r);function r(n){var i;return Kn(this,r),(i=e.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,i.value=n,i.name="NewError",i}return Vn(r)}(Jr(Error));function b(t,e,r,n,i){if(!(this instanceof b))try{return new b(t,e,r,n,i)}catch(u){if(!u.avoidNew)throw u;return u.value}"string"==typeof t&&(i=n,n=r,r=e,e=t,t=null);var a=t&&"object"===ee(t);if(this.json=(t=t||{}).json||r,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=!B.call(t,"wrap")||t.wrap,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||n||null,this.otherTypeCallback=t.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==t.autostart){var o={path:a?t.path:e};a?"json"in t&&(o.json=t.json):o.json=r;var s=this.evaluate(o);if(!s||"object"!==ee(s))throw new Gs(s);return s}}b.prototype.evaluate=function(t,e,r,n){var i=this,a=this.parent,o=this.parentProperty,s=this.flatten,u=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,e=e||this.json,(t=t||this.path)&&"object"===ee(t)&&!Array.isArray(t)){if(!t.path&&""!==t.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!B.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');e=t.json,s=B.call(t,"flatten")?t.flatten:s,this.currResultType=B.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=B.call(t,"sandbox")?t.sandbox:this.currSandbox,u=B.call(t,"wrap")?t.wrap:u,this.currPreventEval=B.call(t,"preventEval")?t.preventEval:this.currPreventEval,r=B.call(t,"callback")?t.callback:r,this.currOtherTypeCallback=B.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,a=B.call(t,"parent")?t.parent:a,o=B.call(t,"parentProperty")?t.parentProperty:o,t=t.path}if(a=a||null,o=o||null,Array.isArray(t)&&(t=b.toPathString(t)),(t||""===t)&&e){var f=b.toPathArray(t);"$"===f[0]&&f.length>1&&f.shift(),this._hasParentSelector=null;var v=this._trace(f,e,["$"],a,o,r).filter(function(h){return h&&!h.isParentSelector});return v.length?u||1!==v.length||v[0].hasArrExpr?v.reduce(function(h,d){var S=i._getPreferredOutput(d);return s&&Array.isArray(S)?h=h.concat(S):h.push(S),h},[]):this._getPreferredOutput(v[0]):u?[]:void 0}},b.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":var r=Array.isArray(t.path)?t.path:b.toPathArray(t.path);return t.pointer=b.toPointer(r),t.path="string"==typeof t.path?t.path:b.toPathString(t.path),t;case"value":case"parent":case"parentProperty":return t[e];case"path":return b.toPathString(t[e]);case"pointer":return b.toPointer(t.path);default:throw new TypeError("Unknown result type")}},b.prototype._handleCallback=function(t,e,r){if(e){var n=this._getPreferredOutput(t);t.path="string"==typeof t.path?t.path:b.toPathString(t.path),e(n,r,t)}},b.prototype._trace=function(t,e,r,n,i,a,o,s){var c,u=this;if(!t.length)return this._handleCallback(c={path:r,value:e,parent:n,parentProperty:i,hasArrExpr:o},a,"value"),c;var f=t[0],v=t.slice(1),h=[];function d(w){Array.isArray(w)?w.forEach(function(ig){h.push(ig)}):h.push(w)}if(("string"!=typeof f||s)&&e&&B.call(e,f))d(this._trace(v,e[f],ce(r,f),e,f,a,o));else if("*"===f)this._walk(e,function(w){d(u._trace(v,e[w],ce(r,w),e,w,a,!0,!0))});else if(".."===f)d(this._trace(v,e,r,n,i,a,o)),this._walk(e,function(w){"object"===ee(e[w])&&d(u._trace(t.slice(),e[w],ce(r,w),e,w,a,!0))});else{if("^"===f)return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:v,isParentSelector:!0};if("~"===f)return c={path:ce(r,f),value:i,parent:n,parentProperty:null},this._handleCallback(c,a,"property"),c;if("$"===f)d(this._trace(v,e,r,null,null,a,o));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(f))d(this._slice(f,v,e,r,n,i,a));else if(0===f.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var S=f.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(e,function(w){u._eval(S,e[w],w,r,n,i)&&d(u._trace(v,e[w],ce(r,w),e,w,a,!0))})}else if("("===f[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");d(this._trace(Xr(this._eval(f,e,r[r.length-1],r.slice(0,-1),n,i),v),e,r,n,i,a,o))}else if("@"===f[0]){var y=!1,I=f.slice(1,-2);switch(I){case"scalar":(!e||!["object","function"].includes(ee(e)))&&(y=!0);break;case"boolean":case"string":case"undefined":case"function":ee(e)===I&&(y=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(y=!0);break;case"number":Number.isFinite(e)&&(y=!0);break;case"nonFinite":"number"==typeof e&&!Number.isFinite(e)&&(y=!0);break;case"object":e&&ee(e)===I&&(y=!0);break;case"array":Array.isArray(e)&&(y=!0);break;case"other":y=this.currOtherTypeCallback(e,r,n,i);break;case"null":null===e&&(y=!0);break;default:throw new TypeError("Unknown value type "+I)}if(y)return this._handleCallback(c={path:r,value:e,parent:n,parentProperty:i},a,"value"),c}else if("`"===f[0]&&e&&B.call(e,f.slice(1))){var A=f.slice(1);d(this._trace(v,e[A],ce(r,A),e,A,a,o,!0))}else if(f.includes(",")){var Le,ne=function Us(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=zn(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&null!=r.return&&r.return()}finally{if(o)throw s}}}}(f.split(","));try{for(ne.s();!(Le=ne.n()).done;)d(this._trace(Xr(Le.value,v),e,r,n,i,a,!0))}catch(w){ne.e(w)}finally{ne.f()}}else!s&&e&&B.call(e,f)&&d(this._trace(v,e[f],ce(r,f),e,f,a,o,!0))}if(this._hasParentSelector)for(var Z=0;Z<h.length;Z++){var Oe=h[Z];if(Oe&&Oe.isParentSelector){var ue=this._trace(Oe.expr,e,Oe.path,n,i,a,o);if(Array.isArray(ue)){h[Z]=ue[0];for(var ng=ue.length,kn=1;kn<ng;kn++)Z++,h.splice(Z,0,ue[kn])}else h[Z]=ue}}return h},b.prototype._walk=function(t,e){if(Array.isArray(t))for(var r=t.length,n=0;n<r;n++)e(n);else t&&"object"===ee(t)&&Object.keys(t).forEach(function(i){e(i)})},b.prototype._slice=function(t,e,r,n,i,a,o){if(Array.isArray(r)){var s=r.length,u=t.split(":"),c=u[2]&&Number.parseInt(u[2])||1,f=u[0]&&Number.parseInt(u[0])||0,v=u[1]&&Number.parseInt(u[1])||s;f=f<0?Math.max(0,f+s):Math.min(s,f),v=v<0?Math.max(0,v+s):Math.min(s,v);for(var h=[],d=f;d<v;d+=c)this._trace(Xr(d,e),r,n,i,a,o,!0).forEach(function(y){h.push(y)});return h}},b.prototype._eval=function(t,e,r,n,i,a){this.currSandbox._$_parentProperty=a,this.currSandbox._$_parent=i,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;var o=t.includes("@path");o&&(this.currSandbox._$_path=b.toPathString(n.concat([r])));var s="script:"+t;if(!b.cache[s]){var u=t.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");o&&(u=u.replace(/@path/g,"_$_path")),b.cache[s]=new this.vm.Script(u)}try{return b.cache[s].runInNewContext(this.currSandbox)}catch(c){throw new Error("jsonPath: "+c.message+": "+t)}},b.cache={},b.toPathString=function(t){for(var e=t,r=e.length,n="$",i=1;i<r;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(n+=/^[\*0-9]+$/.test(e[i])?"["+e[i]+"]":"['"+e[i]+"']");return n},b.toPointer=function(t){for(var e=t,r=e.length,n="",i=1;i<r;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(n+="/"+e[i].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return n},b.toPathArray=function(t){var e=b.cache;if(e[t])return e[t].concat();var r=[],i=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(a,o){return"[#"+(r.push(o)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(a,o){return"['"+o.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(a,o){return";"+o.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(a){var o=a.match(/#([0-9]+)/);return o&&o[1]?r[o[1]]:a});return e[t]=i,e[t].concat()};var ks=function(){function t(e){Kn(this,t),this.code=e}return Vn(t,[{key:"runInNewContext",value:function(r){var n=this.code,i=Object.keys(r),a=[];!function(e,r,n){for(var i=e.length,a=0;a<i;a++)n(e[a])&&r.push(e.splice(a--,1)[0])}(i,a,function(f){return"function"==typeof r[f]});var o=i.map(function(f,v){return r[f]}),s=a.reduce(function(f,v){var h=r[v].toString();return/function/.test(h)||(h="function "+h),"var "+v+"="+h+";"+f},"");!/(["'])use strict\1/.test(n=s+n)&&!i.includes("arguments")&&(n="var arguments = undefined;"+n);var u=(n=n.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),c=u>-1?n.slice(0,u+1)+" return "+n.slice(u+1):" return "+n;return Be(Function,i.concat([c])).apply(void 0,function Fs(t){return function xs(t){if(Array.isArray(t))return Qr(t)}(t)||function Ls(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zn(t)||function js(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o))}}]),t}();b.prototype.vm={Script:ks};var Jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F=function(t){try{return!!t()}catch{return!0}},ar=!F(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),Qn=ar,Xn=Function.prototype,Zr=Xn.call,Ks=Qn&&Xn.bind.bind(Zr,Zr),C=Qn?Ks:function(t){return function(){return Zr.apply(t,arguments)}},Zn=C,Ws=Zn({}.toString),Vs=Zn("".slice),me=function(t){return Vs(Ws(t),8,-1)},zs=F,Js=me,qr=Object,Qs=C("".split),Xs=zs(function(){return!qr("z").propertyIsEnumerable(0)})?function(t){return"String"==Js(t)?Qs(t,""):qr(t)}:qr,ke=function(t){return null==t},Zs=ke,qs=TypeError,fe=function(t){if(Zs(t))throw qs("Can't call method on "+t);return t},el=Xs,rl=fe,Ye=function(t){return el(rl(t))},or=function(t){return t&&t.Math==Math&&t},N=or("object"==typeof globalThis&&globalThis)||or("object"==typeof window&&window)||or("object"==typeof self&&self)||or("object"==typeof Jn&&Jn)||function(){return this}()||Function("return this")(),sr={exports:{}},qn=N,tl=Object.defineProperty,et=function(t,e){try{tl(qn,t,{value:e,configurable:!0,writable:!0})}catch{qn[t]=e}return e},ei="__core-js_shared__",rt=N[ei]||et(ei,{}),ri=rt;(sr.exports=function(t,e){return ri[t]||(ri[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.27.2",mode:"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"});var Q,ur,ol=fe,sl=Object,tt=function(t){return sl(ol(t))},ul=tt,cl=C({}.hasOwnProperty),J=Object.hasOwn||function(e,r){return cl(ul(e),r)},fl=C,vl=0,hl=Math.random(),dl=fl(1..toString),ti=function(t){return"Symbol("+(void 0===t?"":t)+")_"+dl(++vl+hl,36)},lr=typeof navigator<"u"&&String(navigator.userAgent)||"",nt=lr,ii=N.process,ai=N.Deno,oi=ii&&ii.versions||ai&&ai.version,si=oi&&oi.v8;si&&(ur=(Q=si.split("."))[0]>0&&Q[0]<4?1:+(Q[0]+Q[1])),!ur&&nt&&(!(Q=nt.match(/Edge\/(\d+)/))||Q[1]>=74)&&(Q=nt.match(/Chrome\/(\d+)/))&&(ur=+Q[1]);var li=ur,ui=li,ci=!!Object.getOwnPropertySymbols&&!F(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ui&&ui<41}),fi=ci&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,vi=J,El=ti,Sl=ci,Ol=fi,$e=N.Symbol,it=(0,sr.exports)("wks"),_l=Ol?$e.for||$e:$e&&$e.withoutSetter||El,x=function(t){return vi(it,t)||(it[t]=Sl&&vi($e,t)?$e[t]:_l("Symbol."+t)),it[t]},at="object"==typeof document&&document.all,hi={all:at,IS_HTMLDDA:typeof at>"u"&&void 0!==at},ml=hi.all,T=hi.IS_HTMLDDA?function(t){return"function"==typeof t||t===ml}:function(t){return"function"==typeof t},pi=T,$l=hi.all,ie=hi.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:pi(t)||t===$l}:function(t){return"object"==typeof t?null!==t:pi(t)},Rl=ie,Tl=String,Al=TypeError,Y=function(t){if(Rl(t))return t;throw Al(Tl(t)+" is not an object")},yi={},X=!F(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),gi=X&&F(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),re={},Ei=ie,ot=N.document,Nl=Ei(ot)&&Ei(ot.createElement),cr=function(t){return Nl?ot.createElement(t):{}},xl=cr,Si=!X&&!F(function(){return 7!=Object.defineProperty(xl("div"),"a",{get:function(){return 7}}).a}),fr=Function.prototype.call,k=ar?fr.bind(fr):function(){return fr.apply(fr,arguments)},st=N,jl=T,Ul=function(t){return jl(t)?t:void 0},ve=function(t,e){return arguments.length<2?Ul(st[t]):st[t]&&st[t][e]},vr=C({}.isPrototypeOf),Bl=ve,kl=T,Yl=vr,Wl=Object,Oi=fi?function(t){return"symbol"==typeof t}:function(t){var e=Bl("Symbol");return kl(e)&&Yl(e.prototype,Wl(t))},Vl=String,hr=function(t){try{return Vl(t)}catch{return"Object"}},Hl=T,zl=hr,Jl=TypeError,he=function(t){if(Hl(t))return t;throw Jl(zl(t)+" is not a function")},Ql=he,Xl=ke,dr=function(t,e){var r=t[e];return Xl(r)?void 0:Ql(r)},lt=k,ut=T,ct=ie,Zl=TypeError,eu=k,_i=ie,bi=Oi,ru=dr,iu=TypeError,au=x("toPrimitive"),su=function(t,e){if(!_i(t)||bi(t))return t;var n,r=ru(t,au);if(r){if(void 0===e&&(e="default"),n=eu(r,t,e),!_i(n)||bi(n))return n;throw iu("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&ut(r=t.toString)&&!ct(n=lt(r,t))||ut(r=t.valueOf)&&!ct(n=lt(r,t))||"string"!==e&&ut(r=t.toString)&&!ct(n=lt(r,t)))return n;throw Zl("Can't convert object to primitive value")}(t,e)},lu=Oi,mi=function(t){var e=su(t,"string");return lu(e)?e:e+""},cu=Si,pr=Y,$i=mi,vu=TypeError,ft=Object.defineProperty,hu=Object.getOwnPropertyDescriptor,vt="enumerable",ht="configurable",dt="writable";re.f=X?gi?function(e,r,n){if(pr(e),r=$i(r),pr(n),"function"==typeof e&&"prototype"===r&&"value"in n&&dt in n&&!n[dt]){var i=hu(e,r);i&&i[dt]&&(e[r]=n.value,n={configurable:ht in n?n[ht]:i[ht],enumerable:vt in n?n[vt]:i[vt],writable:!1})}return ft(e,r,n)}:ft:function(e,r,n){if(pr(e),r=$i(r),pr(n),cu)try{return ft(e,r,n)}catch{}if("get"in n||"set"in n)throw vu("Accessors not supported");return"value"in n&&(e[r]=n.value),e};var du=Math.ceil,pu=Math.floor,Pu=Math.trunc||function(e){var r=+e;return(r>0?pu:du)(r)},yu=Pu,Pr=function(t){var e=+t;return e!=e||0===e?0:yu(e)},gu=Pr,Eu=Math.max,Su=Math.min,_u=Pr,bu=Math.min,yr=function(t){return t>0?bu(_u(t),9007199254740991):0},mu=yr,Ri=function(t){return mu(t.length)},$u=Ye,Tu=Ri,Ti=function(t){return function(e,r,n){var s,i=$u(e),a=Tu(i),o=function(t,e){var r=gu(t);return r<0?Eu(r+e,0):Su(r,e)}(n,a);if(t&&r!=r){for(;a>o;)if((s=i[o++])!=s)return!0}else for(;a>o;o++)if((t||o in i)&&i[o]===r)return t||o||0;return!t&&-1}},Ai={includes:Ti(!0),indexOf:Ti(!1)},pt={},Pt=J,Iu=Ye,wu=Ai.indexOf,Du=pt,Ii=C([].push),wi=function(t,e){var a,r=Iu(t),n=0,i=[];for(a in r)!Pt(Du,a)&&Pt(r,a)&&Ii(i,a);for(;e.length>n;)Pt(r,a=e[n++])&&(~wu(i,a)||Ii(i,a));return i},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Cu=wi,Nu=yt,Mu=Object.keys||function(e){return Cu(e,Nu)},Lu=re,ju=Y,Uu=Ye,Gu=Mu;yi.f=X&&!gi?Object.defineProperties:function(e,r){ju(e);for(var s,n=Uu(r),i=Gu(r),a=i.length,o=0;a>o;)Lu.f(e,s=i[o++],n[s]);return e};var gr,Di=ve("document","documentElement"),Yu=ti,Ci=(0,sr.exports)("keys"),gt=function(t){return Ci[t]||(Ci[t]=Yu(t))},Ku=Y,Wu=yi,Ni=yt,Vu=pt,Hu=Di,zu=cr,Et="prototype",xi=gt("IE_PROTO"),Ot=function(){},Li=function(t){return"<script>"+t+"<\/script>"},ji=function(t){t.write(Li("")),t.close();var e=t.parentWindow.Object;return t=null,e},Er=function(){try{gr=new ActiveXObject("htmlfile")}catch{}Er=typeof document<"u"?document.domain&&gr?ji(gr):function(){var r,t=zu("iframe");return t.style.display="none",Hu.appendChild(t),t.src=String("javascript:"),(r=t.contentWindow.document).open(),r.write(Li("document.F=Object")),r.close(),r.F}():ji(gr);for(var t=Ni.length;t--;)delete Er[Et][Ni[t]];return Er()};Vu[xi]=!0;var _t=Object.create||function(e,r){var n;return null!==e?(Ot[Et]=Ku(e),n=new Ot,Ot[Et]=null,n[xi]=e):n=Er(),void 0===r?n:Wu.f(n,r)},Zu=_t,qu=re.f,bt=x("unscopables"),mt=Array.prototype;null==mt[bt]&&qu(mt,bt,{configurable:!0,value:Zu(null)});var Sr,Ve,Or,Ui=function(t){mt[bt][t]=!0},Ke={},Gi=N.WeakMap,tc=T(Gi)&&/native code/.test(String(Gi)),$t=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ic=re,ac=$t,We=X?function(t,e,r){return ic.f(t,e,ac(1,r))}:function(t,e,r){return t[e]=r,t},sc=ie,lc=We,Rt=J,uc=gt,cc=pt,ki="Object already initialized",At=N.TypeError;if(tc||rt.state){var te=rt.state||(rt.state=new(0,N.WeakMap));te.get=te.get,te.has=te.has,te.set=te.set,Sr=function(t,e){if(te.has(t))throw At(ki);return e.facade=t,te.set(t,e),e},Ve=function(t){return te.get(t)||{}},Or=function(t){return te.has(t)}}else{var Re=uc("state");cc[Re]=!0,Sr=function(t,e){if(Rt(t,Re))throw At(ki);return e.facade=t,lc(t,Re,e),e},Ve=function(t){return Rt(t,Re)?t[Re]:{}},Or=function(t){return Rt(t,Re)}}var _r={set:Sr,get:Ve,has:Or,enforce:function(t){return Or(t)?Ve(t):Sr(t,{})},getterFor:function(t){return function(e){var r;if(!sc(e)||(r=Ve(e)).type!==t)throw At("Incompatible receiver, "+t+" required");return r}}},Te={},Yi={},Ki={}.propertyIsEnumerable,Wi=Object.getOwnPropertyDescriptor,dc=Wi&&!Ki.call({1:2},1);Yi.f=dc?function(e){var r=Wi(this,e);return!!r&&r.enumerable}:Ki;var Pc=k,yc=Yi,gc=$t,Ec=Ye,Sc=mi,Oc=J,_c=Si,Vi=Object.getOwnPropertyDescriptor;Te.f=X?Vi:function(e,r){if(e=Ec(e),r=Sc(r),_c)try{return Vi(e,r)}catch{}if(Oc(e,r))return gc(!Pc(yc.f,e,r),e[r])};var Hi={exports:{}},It=X,zi=Function.prototype,mc=It&&Object.getOwnPropertyDescriptor,wt=J(zi,"name"),Ji={EXISTS:wt,PROPER:wt&&"something"===function(){}.name,CONFIGURABLE:wt&&(!It||It&&mc(zi,"name").configurable)},Ac=T,Dt=rt,Ic=C(Function.toString);Ac(Dt.inspectSource)||(Dt.inspectSource=function(t){return Ic(t)});var Ct=Dt.inspectSource,Nt=C,wc=F,Dc=T,br=J,Mt=X,Cc=Ji.CONFIGURABLE,Nc=Ct,Mc=_r.enforce,Fc=_r.get,Xi=String,mr=Object.defineProperty,xc=Nt("".slice),Lc=Nt("".replace),jc=Nt([].join),Uc=Mt&&!wc(function(){return 8!==mr(function(){},"length",{value:8}).length}),Gc=String(String).split("String"),Bc=Hi.exports=function(t,e,r){"Symbol("===xc(Xi(e),0,7)&&(e="["+Lc(Xi(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!br(t,"name")||Cc&&t.name!==e)&&(Mt?mr(t,"name",{value:e,configurable:!0}):t.name=e),Uc&&r&&br(r,"arity")&&t.length!==r.arity&&mr(t,"length",{value:r.arity});try{r&&br(r,"constructor")&&r.constructor?Mt&&mr(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var n=Mc(t);return br(n,"source")||(n.source=jc(Gc,"string"==typeof e?e:"")),t};Function.prototype.toString=Bc(function(){return Dc(this)&&Fc(this).source||Nc(this)},"toString");var kc=T,Yc=re,Kc=Hi.exports,Wc=et,Ae=function(t,e,r,n){n||(n={});var i=n.enumerable,a=void 0!==n.name?n.name:e;if(kc(r)&&Kc(r,a,n),n.global)i?t[e]=r:Wc(e,r);else{try{n.unsafe?t[e]&&(i=!0):delete t[e]}catch{}i?t[e]=r:Yc.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},Zi={},Vc=wi,zc=yt.concat("length","prototype");Zi.f=Object.getOwnPropertyNames||function(e){return Vc(e,zc)};var qi={};qi.f=Object.getOwnPropertySymbols;var de,jt,Ut,Jc=ve,Xc=Zi,Zc=qi,qc=Y,ef=C([].concat),rf=Jc("Reflect","ownKeys")||function(e){var r=Xc.f(qc(e)),n=Zc.f;return n?ef(r,n(e)):r},ea=J,tf=rf,nf=Te,af=re,ra=function(t,e,r){for(var n=tf(e),i=af.f,a=nf.f,o=0;o<n.length;o++){var s=n[o];!ea(t,s)&&(!r||!ea(r,s))&&i(t,s,a(e,s))}},of=F,sf=T,lf=/#|\.prototype\./,He=function(t,e){var r=cf[uf(t)];return r==vf||r!=ff&&(sf(e)?of(e):!!e)},uf=He.normalize=function(t){return String(t).replace(lf,".").toLowerCase()},cf=He.data={},ff=He.NATIVE="N",vf=He.POLYFILL="P",ta=He,Ft=N,hf=Te.f,df=We,pf=Ae,Pf=et,yf=ra,gf=ta,K=function(t,e){var o,s,u,c,f,r=t.target,n=t.global,i=t.stat;if(o=n?Ft:i?Ft[r]||Pf(r,{}):(Ft[r]||{}).prototype)for(s in e){if(c=e[s],u=t.dontCallGetSet?(f=hf(o,s))&&f.value:o[s],!gf(n?s:r+(i?".":"#")+s,t.forced)&&void 0!==u){if(typeof c==typeof u)continue;yf(c,u)}(t.sham||u&&u.sham)&&df(c,"sham",!0),pf(o,s,c,t)}},Sf=!F(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Of=J,_f=T,bf=tt,$f=Sf,na=gt("IE_PROTO"),xt=Object,Rf=xt.prototype,ia=$f?xt.getPrototypeOf:function(t){var e=bf(t);if(Of(e,na))return e[na];var r=e.constructor;return _f(r)&&e instanceof r?r.prototype:e instanceof xt?Rf:null},Tf=F,Af=T,If=ie,aa=ia,wf=Ae,Lt=x("iterator"),oa=!1;[].keys&&("next"in(Ut=[].keys())?(jt=aa(aa(Ut)))!==Object.prototype&&(de=jt):oa=!0);var Cf=!If(de)||Tf(function(){var t={};return de[Lt].call(t)!==t});Cf&&(de={}),Af(de[Lt])||wf(de,Lt,function(){return this});var sa={IteratorPrototype:de,BUGGY_SAFARI_ITERATORS:oa},Nf=re.f,Mf=J,la=x("toStringTag"),Gt=function(t,e,r){t&&!r&&(t=t.prototype),t&&!Mf(t,la)&&Nf(t,la,{configurable:!0,value:e})},xf=sa.IteratorPrototype,Lf=_t,jf=$t,Uf=Gt,Gf=Ke,Bf=function(){return this},Yf=T,Kf=String,Wf=TypeError,Hf=C,zf=Y,ua=Object.setPrototypeOf||("__proto__"in{}?function(){var r,t=!1,e={};try{(r=Hf(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),t=e instanceof Array}catch{}return function(i,a){return zf(i),function(t){if("object"==typeof t||Yf(t))return t;throw Wf("Can't set "+Kf(t)+" as a prototype")}(a),t?r(i,a):i.__proto__=a,i}}():void 0),Qf=K,Xf=k,Zf=T,fa=ia,va=ua,ev=Gt,rv=We,Bt=Ae,nv=Ke,iv=Ji.PROPER,av=Ji.CONFIGURABLE,da=sa.IteratorPrototype,$r=sa.BUGGY_SAFARI_ITERATORS,ze=x("iterator"),Je="values",Pa="entries",ov=function(){return this},uv=Ye,kt=Ui,ya=Ke,cv=re.f,Rr=function(t,e){return{value:t,done:e}},vv=X,Ea="Array Iterator",hv=_r.set,dv=_r.getterFor(Ea),pv=function(t,e,r,n,i,a,o){!function(t,e,r,n){var i=e+" Iterator";t.prototype=Lf(xf,{next:jf(+!n,r)}),Uf(t,i,!1),Gf[i]=Bf}(r,e,n);var S,y,I,s=function(A){if(A===i&&h)return h;if(!$r&&A in f)return f[A];switch(A){case"keys":case Je:case Pa:return function(){return new r(this,A)}}return function(){return new r(this)}},u=e+" Iterator",c=!1,f=t.prototype,v=f[ze]||f["@@iterator"]||i&&f[i],h=!$r&&v||s(i),d="Array"==e&&f.entries||v;if(d&&(S=fa(d.call(new t)))!==Object.prototype&&S.next&&(fa(S)!==da&&(va?va(S,da):Zf(S[ze])||Bt(S,ze,ov)),ev(S,u,!0)),iv&&i==Je&&v&&v.name!==Je&&(av?rv(f,"name",Je):(c=!0,h=function(){return Xf(v,this)})),i)if(y={values:s(Je),keys:a?h:s("keys"),entries:s(Pa)},o)for(I in y)($r||c||!(I in f))&&Bt(f,I,y[I]);else Qf({target:e,proto:!0,forced:$r||c},y);return f[ze]!==h&&Bt(f,ze,h,{name:i}),nv[e]=h,y}(Array,"Array",function(t,e){hv(this,{type:Ea,target:uv(t),index:0,kind:e})},function(){var t=dv(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Rr(void 0,!0)):Rr("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)},"values"),Sa=ya.Arguments=ya.Array;if(kt("keys"),kt("values"),kt("entries"),vv&&"values"!==Sa.name)try{cv(Sa,"name",{value:"values"})}catch{}var Yt=cr("span").classList,Oa=Yt&&Yt.constructor&&Yt.constructor.prototype,_a=N,ba={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ev=Oa===Object.prototype?void 0:Oa,Qe=pv,Kt=We,ma=x,Wt=ma("iterator"),$a=ma("toStringTag"),Vt=Qe.values,Ra=function(t,e){if(t){if(t[Wt]!==Vt)try{Kt(t,Wt,Vt)}catch{t[Wt]=Vt}if(t[$a]||Kt(t,$a,e),ba[e])for(var r in Qe)if(t[r]!==Qe[r])try{Kt(t,r,Qe[r])}catch{t[r]=Qe[r]}}};for(var Ht in ba)Ra(_a[Ht]&&_a[Ht].prototype,Ht);Ra(Ev,"DOMTokenList");var Ta={};Ta[x("toStringTag")]="z";var bv="[object z]"===String(Ta),mv=T,Tr=me,Rv=x("toStringTag"),Tv=Object,Av="Arguments"==Tr(function(){return arguments}()),zt=bv?Tr:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch{}}(e=Tv(t),Rv))?r:Av?Tr(e):"Object"==(n=Tr(e))&&mv(e.callee)?"Arguments":n},wv=zt,Dv=String,pe=function(t){if("Symbol"===wv(t))throw TypeError("Cannot convert a Symbol value to a string");return Dv(t)},Cv=K,Ar=C,Fv=J,Lv=vr,jv=pe,Uv=re.f,Gv=ra,ae=N.Symbol,Pe=ae&&ae.prototype;if(X&&T(ae)&&(!("description"in Pe)||void 0!==ae().description)){var Aa={},Ir=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:jv(arguments[0]),r=Lv(Pe,this)?new ae(e):void 0===e?ae():ae(e);return""===e&&(Aa[r]=!0),r};Gv(Ir,ae),Ir.prototype=Pe,Pe.constructor=Ir;var Bv="Symbol(test)"==String(ae("test")),kv=Ar(Pe.valueOf),Yv=Ar(Pe.toString),Kv=/^Symbol\((.*)\)[^)]+$/,Wv=Ar("".replace),Vv=Ar("".slice);Uv(Pe,"description",{configurable:!0,get:function(){var e=kv(this);if(Fv(Aa,e))return"";var r=Yv(e),n=Bv?Vv(r,7,-1):Wv(r,Kv,"$1");return""===n?void 0:n}}),Cv({global:!0,constructor:!0,forced:!0},{Symbol:Ir})}var t,e,Hv=Y,Jt=F,Qt=N.RegExp,Xt=Jt(function(){var t=Qt("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),Qv=Xt||Jt(function(){return!Qt("a","y").sticky}),Xv=Xt||Jt(function(){var t=Qt("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),Zv={BROKEN_CARET:Xv,MISSED_STICKY:Qv,UNSUPPORTED_Y:Xt},rh=N.RegExp,th=F(function(){var t=rh(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}),ah=N.RegExp,oh=F(function(){var t=ah("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),Ie=k,wr=C,sh=pe,lh=function(){var t=Hv(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},uh=Zv,fh=_t,vh=_r.get,hh=th,dh=oh,ph=(0,sr.exports)("native-string-replace",String.prototype.replace),Dr=RegExp.prototype.exec,Zt=Dr,Ph=wr("".charAt),yh=wr("".indexOf),gh=wr("".replace),qt=wr("".slice),en=(e=/b*/g,Ie(Dr,t=/a/,"a"),Ie(Dr,e,"a"),0!==t.lastIndex||0!==e.lastIndex),Ia=uh.BROKEN_CARET,rn=void 0!==/()??/.exec("")[1];(en||rn||Ia||hh||dh)&&(Zt=function(e){var o,s,u,c,f,v,h,r=this,n=vh(r),i=sh(e),a=n.raw;if(a)return a.lastIndex=r.lastIndex,o=Ie(Zt,a,i),r.lastIndex=a.lastIndex,o;var d=n.groups,S=Ia&&r.sticky,y=Ie(lh,r),I=r.source,A=0,m=i;if(S&&(y=gh(y,"y",""),-1===yh(y,"g")&&(y+="g"),m=qt(i,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&"\n"!==Ph(i,r.lastIndex-1))&&(I="(?: "+I+")",m=" "+m,A++),s=new RegExp("^(?:"+I+")",y)),rn&&(s=new RegExp("^"+I+"$(?!\\s)",y)),en&&(u=r.lastIndex),c=Ie(Dr,S?s:r,m),S?c?(c.input=qt(c.input,A),c[0]=qt(c[0],A),c.index=r.lastIndex,r.lastIndex+=c[0].length):r.lastIndex=0:en&&c&&(r.lastIndex=r.global?c.index+c[0].length:u),rn&&c&&c.length>1&&Ie(ph,c[0],s,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(c[f]=void 0)}),c&&d)for(c.groups=v=fh(null),f=0;f<d.length;f++)v[(h=d[f])[0]]=c[h[1]];return c});var tn=Zt;K({target:"RegExp",proto:!0,forced:/./.exec!==tn},{exec:tn});var Da=Function.prototype,Ca=Da.apply,Na=Da.call,Ma="object"==typeof Reflect&&Reflect.apply||(ar?Na.bind(Ca):function(){return Na.apply(Ca,arguments)}),_h=me,bh=C,Cr=function(t){if("Function"===_h(t))return bh(t)},Fa=Cr,xa=Ae,mh=tn,La=F,ja=x,$h=We,Rh=ja("species"),nn=RegExp.prototype,an=C,Ah=Pr,Ih=pe,wh=fe,Dh=an("".charAt),Ua=an("".charCodeAt),Ch=an("".slice),Ga=function(t){return function(e,r){var o,s,n=Ih(wh(e)),i=Ah(r),a=n.length;return i<0||i>=a?t?"":void 0:(o=Ua(n,i))<55296||o>56319||i+1===a||(s=Ua(n,i+1))<56320||s>57343?t?Dh(n,i):o:t?Ch(n,i,i+2):s-56320+(o-55296<<10)+65536}},Mh=(Ga(!1),Ga(!0)),on=C,xh=tt,Lh=Math.floor,sn=on("".charAt),jh=on("".replace),ln=on("".slice),Uh=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Gh=/\$([$&'`]|\d{1,2})/g,Ba=k,kh=Y,Yh=T,Kh=me,Wh=tn,Vh=TypeError,zh=Ma,ka=k,Nr=C,Qh=F,Xh=Y,Zh=T,qh=ke,ed=Pr,rd=yr,we=pe,td=fe,nd=function(t,e,r){return e+(r?Mh(t,e).length:1)},id=dr,ad=function(t,e,r,n,i,a){var o=r+t.length,s=n.length,u=Gh;return void 0!==i&&(i=xh(i),u=Uh),jh(a,u,function(c,f){var v;switch(sn(f,0)){case"$":return"$";case"&":return t;case"`":return ln(e,0,r);case"'":return ln(e,o);case"<":v=i[ln(f,1,-1)];break;default:var h=+f;if(0===h)return c;if(h>s){var d=Lh(h/10);return 0===d?c:d<=s?void 0===n[d-1]?sn(f,1):n[d-1]+sn(f,1):c}v=n[h-1]}return void 0===v?"":v})},od=function(t,e){var r=t.exec;if(Yh(r)){var n=Ba(r,t,e);return null!==n&&kh(n),n}if("RegExp"===Kh(t))return Ba(Wh,t,e);throw Vh("RegExp#exec called on incompatible receiver")},un=x("replace"),ld=Math.max,ud=Math.min,cd=Nr([].concat),cn=Nr([].push),Ya=Nr("".indexOf),Ka=Nr("".slice),fd=function(t){return void 0===t?t:String(t)},vd="$0"==="a".replace(/./,"$0"),Wa=!!/./[un]&&""===/./[un]("a","$0"),hd=!Qh(function(){var t=/./;return t.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(t,"$<a>")});!function(t,e,r,n){var i=ja(t),a=!La(function(){var c={};return c[i]=function(){return 7},7!=""[t](c)}),o=a&&!La(function(){var c=!1,f=/a/;return"split"===t&&((f={}).constructor={},f.constructor[Rh]=function(){return f},f.flags="",f[i]=/./[i]),f.exec=function(){return c=!0,null},f[i](""),!c});if(!a||!o||r){var s=Fa(/./[i]),u=e(i,""[t],function(c,f,v,h,d){var S=Fa(c),y=f.exec;return y===mh||y===nn.exec?a&&!d?{done:!0,value:s(f,v,h)}:{done:!0,value:S(v,f,h)}:{done:!1}});xa(String.prototype,t,u[0]),xa(nn,i,u[1])}n&&$h(nn[i],"sham",!0)}("replace",function(t,e,r){var n=Wa?"$":"$0";return[function(a,o){var s=td(this),u=qh(a)?void 0:id(a,un);return u?ka(u,a,s,o):ka(e,we(s),a,o)},function(i,a){var o=Xh(this),s=we(i);if("string"==typeof a&&-1===Ya(a,n)&&-1===Ya(a,"$<")){var u=r(e,o,s,a);if(u.done)return u.value}var c=Zh(a);c||(a=we(a));var f=o.global;if(f){var v=o.unicode;o.lastIndex=0}for(var h=[];;){var d=od(o,s);if(null===d||(cn(h,d),!f))break;""===we(d[0])&&(o.lastIndex=nd(s,rd(o.lastIndex),v))}for(var y="",I=0,A=0;A<h.length;A++){for(var m=we((d=h[A])[0]),ne=ld(ud(ed(d.index),s.length),0),Le=[],ir=1;ir<d.length;ir++)cn(Le,fd(d[ir]));var Z=d.groups;if(c){var Oe=cd([m],Le,ne,s);void 0!==Z&&cn(Oe,Z);var ue=we(zh(a,void 0,Oe))}else ue=ad(m,s,ne,Le,Z,a);ne>=I&&(y+=Ka(s,I,ne)+ue,I=ne+m.length)}return y+Ka(s,I)}]},!hd||!vd||Wa);class ye{constructor(e,r){this.array=!1,this.readOnly=!1,this.hidden=!1,this.parent=e,this.relativeId=r}isArray(){return this.array}setArray(e){this.array=e}isEnum(){return!1}isObject(){return!1}isReference(){return!1}isValue(){return!1}isRoot(){return!1}isHidden(){return this.hidden}setHidden(e){this.hidden=e}isReadonly(){return this.readOnly}setReadonly(e){this.readOnly=e}static generateItem(e,r,n){let a,i=Array.isArray(e);if(i)return console.error("arrays are not supported",e),e;if(i=!1,e.type)switch(e.type){case"object":a=new Xe(e,r,n);break;case"array":a=this.generateItem(e.items,r,n),i=!0;break;default:a=new Ja(e,r,n)}else if(e.enum)a=new za(e,r,n);else{if(!e.$ref)return e;a=new Qa(e,r,n)}return!0===e.readOnly&&a.setReadonly(!0),!0===e.writeOnly&&a.setHidden(!0),a.setArray(i),a}static isObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}static goto(e,r){let n=e;return r.split("/").forEach(i=>{"#"!==i&&""!=i&&(n=n?.getChild(i)),n||console.error("Cannot find "+i+" of "+r+" in the following item ",e)}),n}upsertWith(e){return!1}getParent(){return this.parent}getChild(e){}getChildren(){return(new Map).entries()}updateWith(e){}allProperties(){return[].values()}getProperties(e){}hasProperties(e){return!1}getRelativeId(){return this.relativeId}setRelativeId(e){this.relativeId=e}getTargetPath(){return this.targetPath}setTargetPath(e){this.targetPath=e}isPossibleDynamicProperty(e){const r=this.getChildren();for(const n of r){const i=n[1].allProperties();for(const a of i)if(a[1].getChild(e))return a[1]}}getAllPossibleDynamicProperties(){const e=this.getChildren(),r=new Map;for(const n of e){const i=n[1].allProperties();for(const a of i)for(const o of a[1].getChildren())r.has(o[0])&&console.warn("Dynamic Property "+o[0]+" is being defined by multiple children."),r.set(o[0],o[1])}return r.entries()}getChildrenAndPossibleProperties(){return Va(this.getChildren(),this.getAllPossibleDynamicProperties())}}function*Va(...t){for(let e of t){let r;for(e=e[Symbol.iterator]();r=e.next(),!r.done;)yield r.value}}class Xe extends ye{constructor(e,r,n){super(n,r),this.children=new Map,e&&this.readJson(e)}readJson(e){const r=e.properties;if(r)for(const n in r)this.children.set(n,ye.generateItem(r[n],n,this))}isEnum(){return!1}isObject(){return!0}isReference(){return!1}isValue(){return!1}isRoot(){return!1}upsertWith(e){const r=this.getChild(e.location.id);if(r)r.updateWith(e);else if(null!=e.location.id){const n=ye.generateItem(e.update,e.location.id,this);if(e.location.after){const i=new Map;this.children.forEach((a,o)=>{i.set(o,a),o===e.location.after&&null!=e.location.id&&i.set(e.location.id,n)}),this.children=i}else this.children.set(e.location.id,n);n.updateWith(e)}return!0}updateWith(e){super.updateWith(e)}getChild(e){if(e)return this.children.get(e)}getChildren(){return this.children.entries()}}class Ha extends Xe{constructor(e){super(e,void 0)}readJson(e){super.readJson(e);const r=e.$defs;r&&this.children.set("$defs",new Xe({properties:r},"$defs",this))}isEnum(){return!1}isObject(){return!0}isReference(){return!1}isValue(){return!1}isRoot(){return!0}}class za extends ye{constructor(e,r,n){super(n,r),this.values=new Array,this.properties=new Map,this.updateValues(e.enum,this.values),this.targetPath=e.format}isEnum(){return!0}isObject(){return!1}isReference(){return!1}isValue(){return!1}isRoot(){return!1}getValues(){return this.values}updateWith(e){super.updateWith(e),this.updateValues(e.update.enum,this.values,e)}updateValues(e,r,n){e.forEach(i=>{if("string"==typeof i){if(r.find(a=>a.getValue()===i)||r.push(new fn(i)),n?.props){const a=new Xa(n,this.relativeId+"="+i,this);a.isEmpty()||this.properties.set(i,a)}}else for(const a in i)if(i.hasOwnProperty(a)){let o=r.find(s=>s.getValue()===i);o||(o=new fn(a),r.push(o)),o.getChildren()||o.setChildren([]),this.updateValues(i[a].enum,o.getChildren(),n)}})}allProperties(){return this.properties.entries()}getProperties(e){return this.properties.get(e)}hasProperties(e){return this.properties.has(e)}}class fn{constructor(e,r){this._children=new Array,this._value=e,this._label=r||e}getLabel(){return this._label?this._label:this._value}setLabel(e){this._label=e}getValue(){return this._value}setValue(e){this._value=e}getChildren(){return this._children}setChildren(e){this._children=e}}class Ja extends ye{constructor(e,r,n){super(n,r),this.type=e.type,this.targetPath=e.format}isValue(){return!0}getType(){return this.type}}class Qa extends ye{constructor(e,r,n){super(n,r),this.resolvedRef=new Map,this.ref=e.$ref}isReference(){return!0}getReference(){return this.ref}resolveReference(e){this.resolvedRef.set("",e)}getChildren(){return this.resolvedRef.entries()}}class Xa extends Xe{constructor(e,r,n){super({type:"object",properties:e.props},r,n),this.replace=!!e.replace&&e.replace,this.posAfter=e.location.after}isEmpty(){return 0==this.children.size}isReplace(){return this.replace}getPosAfter(){return this.posAfter}}var dd=ie,pd=me,yd=x("match"),Sd=TypeError,vn=function(t){if(function(t){var e;return dd(t)&&(void 0!==(e=t[yd])?!!e:"RegExp"==pd(t))}(t))throw Sd("The method doesn't accept regular expressions");return t},_d=x("match"),hn=function(t){var e=/./;try{"/./"[t](e)}catch{try{return e[_d]=!1,"/./"[t](e)}catch{}}return!1},bd=K,Za=Cr,md=Te.f,$d=yr,qa=pe,Rd=vn,Td=fe,Ad=hn,eo=Za("".startsWith),Id=Za("".slice),wd=Math.min,ro=Ad("startsWith"),Dd=!ro&&!!function(){var t=md(String.prototype,"startsWith");return t&&!t.writable}();bd({target:"String",proto:!0,forced:!Dd&&!ro},{startsWith:function(e){var r=qa(Td(this));Rd(e);var n=$d(wd(arguments.length>1?arguments[1]:void 0,r.length)),i=qa(e);return eo?eo(r,i,n):Id(r,n,n+i.length)===i}});class l{}l.ROOT="creation",l.APP_NAME_NODE="name",l.APP_TYPE_NODE="type",l.APP_TYPE=l.ROOT+"/"+l.APP_TYPE_NODE,l.APP_NAME=l.ROOT+"/"+l.APP_NAME_NODE,l.APP_ENTITIES_NODE="entities",l.APP_ENTITIES=l.ROOT+"/"+l.APP_ENTITIES_NODE,l.APP_ENTITIES_FROM_NODE="from",l.APP_ENTITIES_FROM=l.APP_ENTITIES+"/"+l.APP_ENTITIES_FROM_NODE,l.APP_ENTITIES_NAME_NODE="name",l.APP_ENTITIES_NAME=l.APP_ENTITIES+"/"+l.APP_ENTITIES_NAME_NODE,l.APP_FIELDS_NODE="fields",l.APP_FIELDS=l.APP_ENTITIES+"/"+l.APP_FIELDS_NODE,l.APP_FIELDS_NAME_NODE="name",l.APP_FIELDS_NAME=l.APP_FIELDS+"/"+l.APP_FIELDS_NAME_NODE,l.APP_FIELDS_TYPE_NODE="type",l.APP_FIELDS_TYPE=l.APP_FIELDS+"/"+l.APP_FIELDS_TYPE_NODE,l.APP_SHARING_NODE="sharing",l.APP_SHARING=l.ROOT+"/"+l.APP_SHARING_NODE,l.APP_SHARING_WITH_NODE="with",l.APP_SHARING_WITH=l.APP_SHARING+"/"+l.APP_SHARING_WITH_NODE,l.APP_REPORTS_NODE="reports",l.APP_REPORTS=l.ROOT+"/"+l.APP_REPORTS_NODE,l.APP_REPORTS_TITLE_NODE="title",l.APP_REPORTS_TITLE=l.APP_REPORTS+"/"+l.APP_REPORTS_TITLE_NODE,l.APP_REPORTS_FOR_NODE="for",l.APP_REPORTS_FOR=l.APP_REPORTS+"/"+l.APP_REPORTS_FOR_NODE,l.APP_REPORTS_GROUP_NODE="groupedBy",l.APP_REPORTS_GROUP=l.APP_REPORTS+"/"+l.APP_REPORTS_GROUP_NODE,l.APP_REPORTS_SORT_NODE="sortedBy",l.APP_REPORTS_SORT=l.APP_REPORTS+"/"+l.APP_REPORTS_SORT_NODE,l.APP_REPORTS_DISPLAY_NODE="as",l.APP_REPORTS_DISPLAY=l.APP_REPORTS+"/"+l.APP_REPORTS_DISPLAY_NODE,l.APP_REPORTS_GROUP_LABEL_NODE="label",l.APP_REPORTS_GROUP_LABEL=l.APP_REPORTS_GROUP+"/"+l.APP_REPORTS_GROUP_LABEL_NODE,l.APP_REPORTS_GROUP_BY_NODE="by",l.APP_REPORTS_GROUP_BY=l.APP_REPORTS_GROUP+"/"+l.APP_REPORTS_GROUP_BY_NODE,l.APP_REPORTS_GROUP_AGGREGATE_NODE="display",l.APP_REPORTS_GROUP_AGGREGATE=l.APP_REPORTS_GROUP+"/"+l.APP_REPORTS_GROUP_AGGREGATE_NODE,l.APP_REPORTS_GROUP_AGGREGATE_LABEL_NODE="label",l.APP_REPORTS_GROUP_AGGREGATE_LABEL=l.APP_REPORTS_GROUP_AGGREGATE+"/"+l.APP_REPORTS_GROUP_AGGREGATE_LABEL_NODE,l.APP_REPORTS_GROUP_AGGREGATE_OPERATION_NODE="operation",l.APP_REPORTS_GROUP_AGGREGATE_OPERATION=l.APP_REPORTS_GROUP_AGGREGATE+"/"+l.APP_REPORTS_GROUP_AGGREGATE_OPERATION_NODE,l.APP_REPORTS_GROUP_AGGREGATE_OF_NODE="of",l.APP_REPORTS_GROUP_AGGREGATE_OF=l.APP_REPORTS_GROUP_AGGREGATE+"/"+l.APP_REPORTS_GROUP_AGGREGATE_OF_NODE,l.APP_REPORTS_SORT_BY_NODE="by",l.APP_REPORTS_SORT_BY=l.APP_REPORTS_SORT+"/"+l.APP_REPORTS_SORT_BY_NODE,l.APP_REPORTS_DISPLAY_TITLE_NODE="title",l.APP_REPORTS_DISPLAY_TITLE=l.APP_REPORTS_DISPLAY+"/"+l.APP_REPORTS_DISPLAY_TITLE_NODE,l.APP_REPORTS_DISPLAY_TYPE_NODE="type",l.APP_REPORTS_DISPLAY_TYPE=l.APP_REPORTS_DISPLAY+"/"+l.APP_REPORTS_DISPLAY_TYPE_NODE,l.APP_REPORTS_DISPLAY_OF_NODE="of",l.APP_REPORTS_DISPLAY_OF=l.APP_REPORTS_DISPLAY+"/"+l.APP_REPORTS_DISPLAY_OF_NODE,l.APP_REPORTS_DISPLAY_BY_NODE="by",l.APP_REPORTS_DISPLAY_BY=l.APP_REPORTS_DISPLAY+"/"+l.APP_REPORTS_DISPLAY_BY_NODE,l.APP_SOURCES_NODE="sources",l.APP_SOURCES=l.ROOT+"/"+l.APP_SOURCES_NODE,l.APP_SOURCES_NAME_NODE="name",l.APP_SOURCES_NAME=l.ROOT+"/"+l.APP_SOURCES_NODE+"/"+l.APP_SOURCES_NAME_NODE,l.APP_SOURCES_TYPE_NODE="type",l.APP_SOURCES_TYPE=l.ROOT+"/"+l.APP_SOURCES_NODE+"/"+l.APP_SOURCES_TYPE_NODE,l.APP_SOURCES_URL_NODE="url",l.APP_SOURCES_URL=l.ROOT+"/"+l.APP_SOURCES_NODE+"/"+l.APP_SOURCES_URL_NODE,l.APP_SCREENS_NODE="screens",l.APP_SCREENS=l.ROOT+"/"+l.APP_SCREENS_NODE,l.APP_SCREENS_NAME_NODE="name",l.APP_SCREENS_NAME=l.APP_SCREENS+"/"+l.APP_SCREENS_NAME_NODE,l.APP_SCREENS_LAYOUT_NODE="layout",l.APP_SCREENS_LAYOUT=l.APP_SCREENS+"/"+l.APP_SCREENS_LAYOUT_NODE,l.APP_COMPONENTS_NODE="components",l.APP_COMPONENTS=l.APP_SCREENS+"/"+l.APP_COMPONENTS_NODE,l.APP_COMPONENTS_TYPE_NODE="type",l.APP_COMPONENTS_TYPE=l.APP_COMPONENTS+"/"+l.APP_COMPONENTS_TYPE_NODE,l.APP_COMPONENTS_ENTITY_NODE="entity",l.APP_COMPONENTS_ENTITY=l.APP_COMPONENTS+"/"+l.APP_COMPONENTS_ENTITY_NODE;class Mr{}Mr.ROOT="/properties/"+l.ROOT,Mr.defaultv1={$id:"https://dont-code.net/v1/dont-code-schema.json",$schema:"https://json-schema.org/draft/2020-12/schema",description:"JSON Schema v1 for dont-code",type:"object",required:["creation"],properties:{creation:{type:"object",properties:{type:{enum:["Application"]},name:{type:"string"},entities:{type:"array",items:{$ref:"#/$defs/entity"}},sharing:{$ref:"#/$defs/sharing"},reports:{type:"array",items:{$ref:"#/$defs/report"}},sources:{type:"array",items:{$ref:"#/$defs/source"}},screens:{type:"array",items:{$ref:"#/$defs/screen"}}},additionalProperties:!1}},$defs:{entity:{type:"object",properties:{from:{type:"string",format:"$.creation.sources.name"},name:{type:"string"},fields:{type:"array",items:{$ref:"#/$defs/field"}}},additionalProperties:!1},field:{type:"object",properties:{name:{type:"string"},type:{enum:["Text","Number","Boolean",{Time:{enum:["Date","Date & Time","Time"]}},{Money:{enum:["Dollar","Euro","Other currency"]},Web:{enum:["Website (url)","Image"]}},{Special:{enum:["Reference"]}}]}},additionalProperties:!1},sharing:{type:"object",properties:{with:{enum:["No-one"]}},additionalProperties:!1},source:{type:"object",properties:{name:{type:"string"},type:{enum:["Unknown"]}}},report:{type:"object",properties:{title:{type:"string"},for:{type:"string",format:"$.creation.entities.name"},groupedBy:{$ref:"#/$defs/report-group"},sortedBy:{$ref:"#/$defs/report-sort"},as:{type:"array",items:{$ref:"#/$defs/report-display"}}},additionalProperties:!1},"report-group":{type:"object",properties:{by:{type:"string",format:".fields.name"},label:{type:"string"},display:{$ref:"#/$defs/report-group-aggregate"}},additionalProperties:!1},"report-group-aggregate":{type:"object",properties:{operation:{enum:["Count","Sum","Average","Minimum","Maximum"]},of:{type:"string",format:".@parent.fields.name"},label:{type:"string"}},additionalProperties:!1},"report-sort":{type:"object",properties:{by:{type:"string",format:".fields.name"}},additionalProperties:!1},"report-display":{type:"object",properties:{type:{enum:["Table","Bar","Line","Pie"]},of:{type:"string",format:".@parent.fields.name"},by:{type:"string",format:".@parent.fields.name"},title:{type:"string"}},additionalProperties:!1},screen:{type:"object",properties:{name:{type:"string"},layout:{enum:["Flow","Grid"]},components:{type:"array",items:{$ref:"#/$defs/component"}}},additionalProperties:!1},component:{type:"object",properties:{type:{enum:["List","Edit","View"]},entity:{type:"string",format:"$.creation.entities.name"}},additionalProperties:!1}}};class M{constructor(e,r,n,i,a,o){this.position=e,this.positionInSchema=r,this.containerPosition=n,this.containerPositionInSchema=i,this.lastElement=a||"",this.isProperty=o,this.fillMissingElements()}fillMissingElements(e){var r,n,i;if(null==this.position||null==this.positionInSchema)throw new Error("Cannot fill Elements for an empty position");null==this.containerPosition&&(this.containerPosition=null!==(r=M.parentPosition(this.position))&&void 0!==r?r:void 0),null==this.containerPositionInSchema&&(this.containerPositionInSchema=null!==(n=M.parentPosition(this.positionInSchema))&&void 0!==n?n:void 0),(null==this.lastElement||0==this.lastElement.length)&&(this.lastElement=null!==(i=M.lastElementOf(this.position))&&void 0!==i?i:this.position),null==this.isProperty&&e&&(this.isProperty=!this.containerPositionInSchema||null!=e.locateItem(this.containerPositionInSchema,!0).getChild(this.lastElement))}static lastElementOf(e){return null==e?e:e.substring(e.lastIndexOf("/")+1)}static nextItemAndPosition(e,r){let n=e.indexOf("/",r);n===r&&(n=e.indexOf("/",r+=1)),-1!==n?n-=1:n=n===r?-1:e.length-1;let i=null;return-1!==n&&(i=e.substring(r,n+1)),{pos:n,value:i}}calculateKeyOrContainer(){var e;return!0===this.isProperty?this.lastElement:null!==(e=M.lastElementOf(this.containerPosition))&&void 0!==e?e:""}calculateItemIdOrContainer(){var e;return!1===this.isProperty?this.lastElement:null!==(e=M.lastElementOf(this.containerPosition))&&void 0!==e?e:""}isSubItemOf(e){return e.position===this.containerPosition?this.lastElement:null}isUnderSubItemOf(e){if(this.positionInSchema.startsWith(e.positionInSchema)){const r=this.positionInSchema.indexOf("/",e.positionInSchema.length+1);return-1==r?this.positionInSchema.substring(e.positionInSchema.length+1):this.positionInSchema.substring(e.positionInSchema.length+1,r)}return null}subItemOrPropertyPointer(e,r){return r?this.subPropertyPointer(e):this.subItemPointer(e)}subPropertyPointer(e){return new M(""===this.position?e:this.position+"/"+e,""===this.positionInSchema?e:this.positionInSchema+"/"+e,this.position,this.positionInSchema,e,!0)}subItemPointer(e){return new M(""===this.position?e:this.position+"/"+e,this.positionInSchema,this.position,this.containerPositionInSchema,e,!1)}safeParentPointer(e){const r=this.parentPointer(e);if(void 0===r)throw new Error("No parent position for pointer "+this.position);return r}parentPointer(e){if(null==this.containerPosition||null==this.containerPositionInSchema)return;const r=new M(this.containerPosition,this.containerPositionInSchema);return null!=e&&r.fillMissingElements(e),r}static parentPosition(e){if(null==e||0===e.length)return null;const r=e.lastIndexOf("/");return-1==r?"":e.substring(0,r)}static splitPosition(e){if(null==e||0===e.length)return null;const r=e.lastIndexOf("/");return-1==r?{parent:"",element:e}:{parent:e.substring(0,r),element:e.substring(r+1)}}}class to{constructor(){this.reset()}getSchema(){return this.currentSchema}convertSchemaToMap(e){return new Ha(e)}registerChanges(e){e["schema-updates"]&&e["schema-updates"].forEach(n=>{n.changes.forEach(a=>{if(a.location.id){const o=this.locateItem(a.location.parent);if(!o)throw"Cannot find parent element: "+a.location.parent;o.upsertWith(a)}})})}locateItem(e,r){const n=e.split("/");let i=this.currentSchema;return n.forEach(a=>{if(!i)throw console.error("Could not find subItem "+a+" of "+e),new Error("Could not find subItem "+a+" of "+e);if(a&&a.length>0&&"#"!==a){if(i.isReference()&&(i=this.resolveReference(i)),!i)throw console.error("Could not find reference "+i?.getReference()+" of "+e),new Error("Could not find reference "+i?.getReference()+" of "+e);i=i.getChild(a)}}),r&&i.isReference()&&(i=this.resolveReference(i)),i}resolveReference(e){return this.locateItem(e.getReference())}generateParentPointer(e){if(null!=e.containerPosition)return this.generateSchemaPointer(e.containerPosition)}generateSchemaPointer(e){let r;const n=e,i=n.split("/");if(0===i.length||0===i[0].length)return r=new M(e,e),r;r=new M(e,"");let a=this.currentSchema,o=!1;return i.forEach(s=>{var u;if(o)r.isProperty=!1,o=!1;else{let c=null!==(u=a.getChild(s))&&void 0!==u?u:a.isPossibleDynamicProperty(s);if(!c)throw new Error("Cannot parse '"+n+"' from the schema as "+s+" is not a child of "+a.getRelativeId());if(r.isProperty=!0,r.containerPositionInSchema=r.positionInSchema,r.positionInSchema=null!==r.positionInSchema&&r.positionInSchema.length>0?r.positionInSchema+"/"+s:s,o=!!c.isArray(),c.isReference()&&(c=this.resolveReference(c)),null==c)throw new Error("Cannot parse '"+n+"' from the schema as "+c+" is reference an unknown element");a=c}}),r.containerPositionInSchema=r.positionInSchema.substring(0,r.positionInSchema.lastIndexOf("/")),r.containerPosition=r.position.substring(0,r.position.lastIndexOf("/")),r.lastElement=i[i.length-1],r}generateSubSchemaPointer(e,r){return this.locateItem(e.positionInSchema,!0).getChild(r)?e.subPropertyPointer(r):e.subItemPointer(r)}reset(){this.readSchema=Mr.defaultv1,this.currentSchema=this.convertSchemaToMap(this.readSchema)}}class no{constructor(){this.plugins=new Map}registerPlugin(e,r,n){const i=e.getConfiguration(),a=i.plugin.id+"-v"+i.plugin.version;null==this.plugins.get(a)?(console.debug("Setting up",a),r.registerChanges(i),n.registerHandlers(i),this.plugins.set(a,new Cd(e))):console.debug("Plugin "+a+" already registered, skipping it")}initPlugins(e){this.plugins.forEach(r=>{var n;if(!1===r.initCalled)try{const i=null===(n=r.plugin.getConfiguration())||void 0===n?void 0:n["definition-updates"];e.getChangeManager().applyPluginConfigUpdates(i),r.plugin.pluginInit(e),r.initCalled=!0}catch(i){console.error("Error calling "+r.plugin+" init method:",i)}})}reset(){this.plugins.clear()}}class Cd{constructor(e,r){this.plugin=e,this.initCalled=null!=r&&r}}var Nd=K,io=Cr,Md=Te.f,Fd=yr,ao=pe,xd=vn,Ld=fe,jd=hn,oo=io("".endsWith),Ud=io("".slice),Gd=Math.min,so=jd("endsWith"),Bd=!so&&!!function(){var t=Md(String.prototype,"endsWith");return t&&!t.writable}();Nd({target:"String",proto:!0,forced:!Bd&&!so},{endsWith:function(e){var r=ao(Ld(this));xd(e);var n=arguments.length>1?arguments[1]:void 0,i=r.length,a=void 0===n?i:Gd(Fd(n),i),o=ao(e);return oo?oo(r,o,a):Ud(r,a-o.length,a)===o}});class lo{constructor(){this.reset()}reset(){this.handlersPerLocations=new Map,this.globalHandlersPerLocations=new Map,this.actionHandlersPerLocation=new Map,this.globalHandlers=new j.t}registerHandlers(e){if(e["preview-handlers"]&&e["preview-handlers"].forEach(r=>{let n=this.handlersPerLocations.get(r.location.parent);n||(n=new Array,this.handlersPerLocations.set(r.location.parent,n)),n.push(r)}),e["global-handlers"]&&e["global-handlers"].forEach(r=>{let n=this.handlersPerLocations.get(r.location.parent);n||(n=new Array,this.handlersPerLocations.set(r.location.parent,n)),n.push(r),n=this.globalHandlersPerLocations.get(r.location.parent),n||(n=new Array,this.globalHandlersPerLocations.set(r.location.parent,n)),n.push(r),this.globalHandlers.next(r)}),e["action-handlers"])for(const r of e["action-handlers"]){let n=this.actionHandlersPerLocation.get({position:r.location.parent,context:r["action-context"]});n||(n=new Array,this.actionHandlersPerLocation.set({position:r.location.parent,context:r["action-context"]},n)),n.push(r)}}getGlobalHandlers(){return this.globalHandlersPerLocations}receiveGlobalHandlers(){return this.globalHandlers}retrieveHandlerConfig(e,r){const n=this.handlersPerLocations.get(e);let i=null,a=!1;if(n)n.forEach(o=>{if(o.location.values)if(r){let s=r;o.location.id&&(s=r[o.location.id]),this.extractValuesAsArray(o.location.values).forEach(u=>{u!==s||(i=o)})}else a=!0;else null===i&&(i=o)});else if("string"==typeof r&&e.lastIndexOf("/")>0){e.endsWith("/")&&(e=e.substring(0,e.length-1));const s={};return s[e.substring(e.lastIndexOf("/")+1)]=r,this.retrieveHandlerConfig(e.substring(0,e.lastIndexOf("/")),s)}if(null===i&&a)throw new Error("Content must be provided in order to select an handler for position "+e);return i}retrieveActionHandlers(e,r,n){return this.actionHandlersPerLocation.get({position:e,context:r})??[]}extractValuesAsArray(e){const r=new Array;return this.extractValuesToArray(e,r),r}extractValuesToArray(e,r){if(Array.isArray(e))e.forEach(n=>{"string"==typeof n?r.push(n):this.extractValuesToArray(n,r)});else for(const n in e)e.hasOwnProperty(n)&&this.extractValuesToArray(e[n],r)}}class uo{constructor(e,r){this.modelMgr=e,this.providerByPosition=new Map,this.providerByType=new Map,this._default=r,this.reset()}reset(){this.providerByPosition.clear(),this.providerByType.clear()}getProvider(e){var r;if(null==e)return this._default;{let n=null;const i=null===(r=this.modelMgr.findTargetOfProperty(l.APP_ENTITIES_FROM_NODE,e))||void 0===r?void 0:r.value;return i&&(n=this.providerByType.get(i.type)),n||(n=this.providerByPosition.get(e)),n??this._default}}getProviderSafe(e){const r=this.getProvider(e);if(null==r)throw new Error("Trying to get an undefined or null provider");return r}getDefaultProvider(){return this.getProvider()}getDefaultProviderSafe(){return this.getProviderSafe()}setProvider(e,r){null==r?this._default=e:this.providerByPosition.set(r,e)}setProviderForSourceType(e,r){this.providerByType.set(r,e)}setDefaultProvider(e){this.setProvider(e)}removeProvider(e){null==e?this._default=void 0:this.providerByPosition.delete(e)}removeProviderForSourceType(e){this.providerByType.delete(e)}removeDefaultProvider(){this.removeProvider()}storeEntity(e,r){return this.getProviderSafe(e).storeEntity(e,r)}loadEntity(e,r){return this.getProviderSafe(e).loadEntity(e,r)}deleteEntity(e,r){return this.getProviderSafe(e).deleteEntity(e,r)}searchEntities(e,...r){return this.getProviderSafe(e).searchEntities(e,...r)}canStoreDocument(e){var r;return(null===(r=this.getProvider(e))||void 0===r?void 0:r.canStoreDocument(e))||!1}storeDocuments(e,r){return this.getProviderSafe(r).storeDocuments(e,r)}}var se=(()=>(function(t){t.EQUALS="=",t.LESS_THAN="<",t.LESS_THAN_EQUAL="<="}(se||(se={})),se))();class kd{constructor(e,r,n){this.name=e,this.value=r,this.operator=n||se.EQUALS}}var Kd=Ai.includes,Vd=Ui;K({target:"Array",proto:!0,forced:F(function(){return!Array(1).includes()})},{includes:function(e){return Kd(this,e,arguments.length>1?arguments[1]:void 0)}}),Vd("includes");var zd=K,Qd=vn,Xd=fe,co=pe,Zd=hn,qd=C("".indexOf);zd({target:"String",proto:!0,forced:!Zd("includes")},{includes:function(e){return!!~qd(co(Xd(this)),co(Qd(e)),arguments.length>1?arguments[1]:void 0)}});class z{constructor(e,r,n,i,a,o){if(this.type=e,this.position=r,"/"===r)throw new Error("Root position is defined by empty string and not slash anymore");this.value=n,this.pointer=i,this.beforeKey=a,this.oldPosition=o}getSafeParentPosition(){const e=this.getParentPosition();if(null==e)throw new Error("No Parent position for root changes.");return e}getParentPosition(){var e;return null!=this.pointer?null!==(e=this.pointer.containerPosition)&&void 0!==e?e:null:M.parentPosition(this.position)}}var g=(()=>(function(t){t.ADD="ADD",t.UPDATE="UPDATE",t.DELETE="DELETE",t.MOVE="MOVE",t.RESET="RESET"}(g||(g={})),g))();class W{constructor(e){this.schemaMgr=e,this.reset()}reset(){this.content=void 0}getContent(){return this.content}resetContent(e){this.content=e}static isHidden(e){return 1==e?.$hidden}static isReadonly(e){return 1==e?.$readOnly}applyChange(e){var r,n;let i=null!==(r=e.pointer)&&void 0!==r?r:this.schemaMgr.generateSchemaPointer(e.position);e.pointer=i;const o=null===(n=e.pointer)||void 0===n?void 0:n.lastElement;null!=i.containerPosition&&null!=o&&(i=this.schemaMgr.generateParentPointer(i));const s=new dn;s.isRoot=!0,s.name=i.position;let u=s,c=this.findAtPosition(i.position);if(null==c){if(e.type===g.DELETE)return[];{c=this.findAtPosition(i.position,!0,s);let f=i.position;for(;u.subChanges.length>0;)f=f.substring(0,f.lastIndexOf("/")),u=u.subChanges[0];s.name=f}}return this.applyChangeRecursive(e,c,e.value,e.pointer,u),this.generateChanges(e,s,this.schemaMgr.generateSchemaPointer(s.name))}applyChangeRecursive(e,r,n,i,a,o){if(null==e.pointer)throw new Error("Cannot apply a change without a pointer at position "+e.position);null==o&&(o=e.oldPosition);const s=i.lastElement;if(s||0===s.length){const u=0===s.length?r:r[s];switch(e.type){case g.ADD:case g.UPDATE:case g.RESET:{let c;e.type===g.RESET&&e.position===i.position?"object"==typeof n&&this.isTheSameForParent(u,n)?c=a.createSubChange(void 0,s,null):("object"==typeof n||u!==n)&&(c=a.createSubChange(g.RESET,s,n)):null==u?c=a.createSubChange(g.ADD,s,n):"object"==typeof n&&this.isTheSameForParent(u,n)?c=a.createSubChange(void 0,s,null):("object"==typeof n||u!==n)&&(c=a.createSubChange(g.UPDATE,s,n)),c&&this.compareRecursiveIfNeeded(e,u,n,i,c),s.length>0&&this.insertProperty(r,s,n,e.beforeKey)}break;case g.DELETE:if(r[s]){const c=a.createSubChange(g.DELETE,s,null);this.compareRecursiveIfNeeded(e,r[s],n,i,c),delete r[s]}break;case g.MOVE:if(e.position===i.position){if(null==o)throw new Error("Cannot process MOVE change without oldPosition"+e.position);if(null==n&&(n=this.findAtPosition(o)),n){const c=a.createSubChange(g.MOVE,s,n,o);if(e.position!==o){this.compareRecursiveIfNeeded(e,null,n,i,c,o),this.insertProperty(r,s,n,e.beforeKey);const f=M.splitPosition(o);delete this.findAtPosition(f.parent)[f.element]}else this.compareRecursiveIfNeeded(e,null,n,i,c,o),this.insertProperty(r,s,n,e.beforeKey)}}else{const c=a.createSubChange(g.MOVE,s,null,o);this.compareRecursiveIfNeeded(e,r,n,i,c,o)}break;default:throw new Error("No support for change of type "+e.type)}}else this.compareRecursiveIfNeeded(e,r,n,i,a,o)}isTheSameForParent(e,r){if(r===e)return!0;if(null==r||null==e)return!1;if("object"==typeof e&&"object"==typeof r){const n=Object.keys(e),i=Object.keys(r);return n.length===i.length&&n.every((a,o)=>a===i[o])}return e===r}compareRecursiveIfNeeded(e,r,n,i,a,o){(null==r||"object"!=typeof r)&&(r={}),(null==n||"object"!=typeof n)&&(n={});const s=new Set;for(const u in r){const c=this.schemaMgr.generateSubSchemaPointer(i,u),f=c.position;s.add(u),n.hasOwnProperty(u)?this.applyChangeRecursive(e,r,n[u],c,a,o):this.applyChangeRecursive(new z(g.DELETE,f,null,c),r,null,c,a,o)}for(const u in n)if(e.type===g.MOVE){const c=this.schemaMgr.generateSubSchemaPointer(i,u);this.applyChangeRecursive(e,r,n[u],c,a,o+"/"+u)}else if(!s.has(u)){const c=this.schemaMgr.generateSubSchemaPointer(i,u);this.applyChangeRecursive(new z(g.ADD,c.position,n[u],c),r,n[u],c,a)}}generateChanges(e,r,n,i){if(null==i&&(i=new Array),null==e.pointer)throw new Error("Cannot generate changes without the pointer");if(null==n&&(n=e.pointer),null!=r.type)if(r.type===g.MOVE){if(null==r.oldPosition)throw new Error("A Move Change must have an oldPosition set "+n.position);r.oldPosition!==n.position&&e.position===n.position&&i.push(new z(g.UPDATE,M.parentPosition(r.oldPosition),r.value)),i.push(new z(g.MOVE,n.position,r.value,n,void 0,r.oldPosition))}else i.push(new z(r.type,n.position,r.value,n));else for(let a=0;a<r.subChanges.length;a++){const o=r.subChanges[a];if(null!=o.type&&o.type!==g.UPDATE&&o.name.length>0){i.push(new z(g.UPDATE,n.position,this.findAtPosition(n.position),n));break}}for(let a=0;a<r.subChanges.length;a++){const o=r.subChanges[a];this.generateChanges(e,o,this.schemaMgr.generateSubSchemaPointer(n,o.name),i)}return i}generateNextKeyForPosition(e,r=!1){const n=this.findAtPosition(e,r);if(null==n)throw new Error("No element at position "+e);return W.generateNextKey(n)}static generateNextKey(e){let r;r=null!=e.size?e:new Set(Object.keys(e));let n=r.size,i=!1;const a=W.POSSIBLE_CHARS_FOR_ARRAY_KEYS_LENGTH;let o;do{o="";do{const s=Math.trunc(n/a);o=W.POSSIBLE_CHARS_FOR_ARRAY_KEYS[n%a].concat(o),n=s-1}while(n>=0);i=r.has(o),n++}while(i);return o}findAtPosition(e,r,n){const i=e.split("/");if(null==this.content){if(!r)return null;this.content={}}let a=this.content,o="";return i.forEach(s=>{if(""===s||null===a)return a;if(o=0===o.length?s:o+"/"+s,!a[s]){if(!r)return a=null,null;a[s]={},n&&(n=n.createSubChange(g.ADD,s,{}))}a=a[s]}),a}queryModelToArray(e,r){let n=this.content;return r&&(n=this.findAtPosition(r,!1)),b({path:e,json:n,resultType:"value",wrap:!1,flatten:!0})}queryModelToSingle(e,r){var n;let i=this.content;r&&(i=this.findAtPosition(r,!1));let a=b({path:e,json:i,resultType:"all",wrap:!1});if(Array.isArray(a)){if(!(a.length<=1))throw new Error("Multiple results returned by queryModelToSingle with path "+e);a=a[0]}return!(null===(n=a?.pointer)||void 0===n)&&n.startsWith("/")&&(a.pointer=a.pointer.substring(1)),null!=a&&(delete a.path,delete a.parent,delete a.parentProperty),a}findAllPossibleTargetsOfProperty(e,r,n){if(null==n){const a=this.schemaMgr.generateSchemaPointer(r);n=this.schemaMgr.locateItem(a.subPropertyPointer(e).positionInSchema,!0)}const i=n?.getTargetPath();if(n&&i){const a=i.lastIndexOf(".");return this.queryModelToArray(i.substring(0,a)+".*")}throw new Error("No Schema or no format definition for "+r+"/"+e)}findTargetOfProperty(e,r,n){const i=this.findAtPosition(r,!1);if(i&&i[e]){if(null==n){const o=this.schemaMgr.generateSchemaPointer(r);n=this.schemaMgr.locateItem(o.subPropertyPointer(e).positionInSchema,!0)}const a=n?.getTargetPath();if(n&&a){const o=a.lastIndexOf("."),s=a.substring(0,o)+"[?(@['"+a.substring(o+1)+"']===\""+i[e]+'")]';return this.queryModelToSingle(s)}throw new Error("No Schema or no format definition for "+r+"/"+e)}return null}insertProperty(e,r,n,i){if(i){const a=Object.keys(e);for(const o of a)if(o!==r){const s=e[o];delete e[o],o===i&&(void 0!==e[r]&&delete e[r],e[r]=n),e[o]=s}}else void 0!==e[r]&&delete e[r],e[r]=n}convertToChange(e){let r=this.schemaMgr.generateSchemaPointer(e.location.parent);return this.schemaMgr.locateItem(r.positionInSchema,!1).isArray()?r=r.subItemPointer(null==e.location.id||"*"===e.location.id?this.generateNextKeyForPosition(r.position,!0):e.location.id):null!=e.location.id&&(r=r.subItemPointer(e.location.id)),new z(g.ADD,r.position,e.update,r,e.location.after)}guessNamePropertyOfElement(e,r){if(null==r){if(null==e)throw new Error("Either position or model must be provided");if(null==(r=this.findAtPosition(e,!1)))throw new Error("Position "+e+" does not exist in model")}null!=r.fields&&Array.isArray(r.fields)&&(r=r.fields);const n={score:-1,field:null};for(const i in r)if(W.scoreFieldAsName(r[i].name,r[i].type,n))break;return n.score>0?n.field:null}static guessNamePropertyOfObject(e){const r={score:-1,field:null};for(const n in e)W.scoreFieldAsName(n,"Text",r);return r.score>0?r.field:null}static guessNamePropertyFromList(...e){const r={score:-1,field:null};for(const n of e)W.scoreFieldAsName(n,"Text",r);return r.score>0?r.field:null}static scoreFieldAsName(e,r,n){if(null==e)return!1;const i=e.toLowerCase();for(const[a,o]of this.NAME_PROPERTY_NAMES)if(i===a){const s=o??0;if(n.score<s&&(n.score=s,n.field=e,100==n.score))return!0}else if(i.includes(a)){const s=(o??0)/2;n.score<s&&(n.score=s,n.field=e)}return"Text"==r&&n.score<20&&(n.score=20,n.field=e),n.score>0}extractValue(e,r,n,i){if(null==e)return e;if(!r.parsed)if(r.parsed=!0,"object"!=typeof e){if(null==e)return r.parsed=!1,e;r.direct=!0}else{if(Array.isArray(e)){if(r.array=!0,console.debug("Getting an array as a value for a graph ",e),!(e.length>0))return r.parsed=!1,e;e=e[0]}if(e instanceof Date)return r.direct=!0,e;if(void 0!==e.value)r.subValue="value";else if(void 0!==e.amount)r.subValue="amount";else{let a=null;for(const o in e)null==a&&(a=o),null!=e[o]&&"object"!=typeof e[o]&&(r.subValue=o);null==r.subValue&&(r.subValue=a),console.warn("Guessed value key of "+r.subValue+" for object.",e)}}if(r.direct)return e;if(r.array){if(!(e.length>0))return e;e=e[0]}return null!=r.subValue?e[r.subValue]:e}}W.POSSIBLE_CHARS_FOR_ARRAY_KEYS="abcdefghijklmnopqrstuvxyz",W.POSSIBLE_CHARS_FOR_ARRAY_KEYS_LENGTH=W.POSSIBLE_CHARS_FOR_ARRAY_KEYS.length,W.NAME_PROPERTY_NAMES=new Map([["name",100],["nom",100],["title",80],["titre",80],["lastname",80],["label",70],["libell\xe9",70]]);class ep{constructor(){this.parsed=!1,this.array=!1,this.direct=!1,this.subValue=null}}class dn{constructor(e,r,n,i){this.name="",this.subChanges=new Array,this.isRoot=!1,e&&(this.type=e),r&&(this.name=r),this.oldPosition=i,this.value=n}createSubChange(e,r,n,i){const a=new dn(e,r,n,i);return this.subChanges.push(a),a}}class rp{}class fo{constructor(e,r){this.schemaManager=e,this.modelManager=r,this.listeners=new Map,this.listenerCachePerPosition=new Map,this.reset()}reset(){null!=this.receivedChanges&&this.receivedChanges.complete(),this.receivedChanges=new U.x,this.listeners.clear(),this.listenerCachePerPosition.clear()}isInterestedIn(e,r,n){let i=!1;if("?"===e[e.length-1]&&(i=!0,e=e.substring(0,e.length-1)),"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),null!=n.position&&n.position.startsWith(e)){let a=M.nextItemAndPosition(n.position,e.length+1);const o=a.value;return r?o===r||(a=M.nextItemAndPosition(n.position,a.pos+1),a.value===r):!i||null!=o&&(a=M.nextItemAndPosition(n.position,a.pos+1),""===a.value)}return!1}createNewListener(e,r){const n={position:e,property:r};let i=this.listeners.get(n);i||(i=new j.t(1),this.listeners.set(n,i),this.listenerCachePerPosition.clear());const a=this.cleanPosition(e),o=this.modelManager.findAtPosition(a,!1);if(null!=o){let s=new z(g.RESET,a,o,this.schemaManager.generateSchemaPointer(a));if(this.isInterestedIn(e,r,s))i.next(s);else if(null!=r)for(const u in o)s=new z(g.RESET,a+"/"+u,o[u],this.schemaManager.generateSchemaPointer(a+"/"+u)),this.isInterestedIn(e,r,s)?i.next(s):null!=r&&null!=o[u][r]&&(s=new z(g.RESET,a+"/"+u+"/"+r,o[u][r],this.schemaManager.generateSchemaPointer(a+"/"+u+"/"+r)),this.isInterestedIn(e,r,s)&&i.next(s))}return i}addToListenerCache(e,r){let n=this.listenerCachePerPosition.get(e);n||(n=new Array,this.listenerCachePerPosition.set(e,n)),n.push(r)}getJsonAt(e){return this.modelManager.findAtPosition(e,!1)}applyPluginConfigUpdates(e){if(null!=e)for(const r of e)this.pushChange(this.modelManager.convertToChange(r))}pushChange(e){const r=this.modelManager.applyChange(e);this.manageChangeInternally(e),r.forEach(n=>{(n.type!==e.type||n.position!==e.position)&&this.manageChangeInternally(n)})}manageChangeInternally(e){e.pointer||(e.pointer=this.calculatePointerFor(e.position)),this.receivedChanges.next(e),this.findAndNotify(e,new Map)}findAndNotify(e,r){var n;this.listenerCachePerPosition.get(e.position)||this.listeners.forEach((a,o)=>{this.isInterestedIn(o.position,o.property,e)&&this.addToListenerCache(e.position,a)});const i=this.listenerCachePerPosition.get(e.position);if(null!=i)for(const a of i){let o=!0;const s=r.get(a);if(s)for(const u of s)e.position.startsWith(u)&&(o=!1);else r.set(a,new Array);o&&(a.next(e),null===(n=r.get(a))||void 0===n||n.push(e.position))}}receiveCommands(e,r){return e?this.createNewListener(e,r):this.receivedChanges}getSchemaManager(){return this.schemaManager}calculatePointerFor(e){return this.schemaManager.generateSchemaPointer(e)}close(){this.receivedChanges.complete()}cleanPosition(e){return(e=e.endsWith("?")?e.substring(0,e.length-1):e).endsWith("/")?e.substring(0,e.length-1):e}}class vo{constructor(){console.debug("Init core"),this.schemaManager=new to,this.pluginManager=new no,this.previewManager=new lo,this.modelManager=new W(this.schemaManager),this.changeManager=new fo(this.schemaManager,this.modelManager),this.storeManager=new uo(this.modelManager)}reset(){return this.schemaManager.reset(),this.pluginManager.reset(),this.previewManager.reset(),this.modelManager.reset(),this.changeManager.reset(),this.storeManager.reset(),this}registerPlugin(e){this.pluginManager.registerPlugin(e,this.schemaManager,this.previewManager)}initPlugins(){this.pluginManager.initPlugins(this)}getSchemaUri(){return"schemas/v1/dont-code-schema.json"}getSchemaManager(){return this.schemaManager}getPreviewManager(){return this.previewManager}getStoreManager(){return this.storeManager}getModelManager(){return this.modelManager}getChangeManager(){return this.changeManager}}class tp{constructor(e,r,n){this.type=e,this.sessionId=r,this.change=n}}var Fr=(()=>(function(t){t.INIT="INIT",t.CHANGE="CHANGE"}(Fr||(Fr={})),Fr))();class np{}var xr=typeof process<"u"&&"process"==me(process),ap=ve,op=re,lp=X,ho=x("species"),cp=vr,fp=TypeError,hp=C,dp=F,po=T,pp=zt,yp=Ct,Po=function(){},gp=[],yo=ve("Reflect","construct"),pn=/^\s*(?:class|function)\b/,Ep=hp(pn.exec),Sp=!pn.exec(Po),Ze=function(e){if(!po(e))return!1;try{return yo(Po,gp,e),!0}catch{return!1}},go=function(e){if(!po(e))return!1;switch(pp(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Sp||!!Ep(pn,yp(e))}catch{return!0}};go.sham=!0;var er,ge,On,_n,Op=!yo||dp(function(){var t;return Ze(Ze.call)||!Ze(Object)||!Ze(function(){t=!0})||t})?go:Ze,_p=Op,bp=hr,mp=TypeError,Eo=Y,Tp=ke,Ip=x("species"),Dp=he,Cp=ar,Np=Cr(Cr.bind),Pn=function(t,e){return Dp(t),void 0===e?t:Cp?Np(t,e):function(){return t.apply(e,arguments)}},Fp=C([].slice),xp=TypeError,Oo=/(?:ipad|iphone|ipod).*applewebkit/i.test(lr),V=N,Up=Ma,Gp=Pn,_o=T,Bp=J,bo=F,mo=Di,kp=Fp,$o=cr,Yp=function(t,e){if(t<e)throw xp("Not enough arguments");return t},Kp=Oo,Wp=xr,yn=V.setImmediate,gn=V.clearImmediate,Vp=V.process,En=V.Dispatch,Hp=V.Function,Ro=V.MessageChannel,zp=V.String,Sn=0,qe={},To="onreadystatechange";bo(function(){er=V.location});var bn=function(t){if(Bp(qe,t)){var e=qe[t];delete qe[t],e()}},mn=function(t){return function(){bn(t)}},Ao=function(t){bn(t.data)},Io=function(t){V.postMessage(zp(t),er.protocol+"//"+er.host)};(!yn||!gn)&&(yn=function(e){Yp(arguments.length,1);var r=_o(e)?e:Hp(e),n=kp(arguments,1);return qe[++Sn]=function(){Up(r,void 0,n)},ge(Sn),Sn},gn=function(e){delete qe[e]},Wp?ge=function(t){Vp.nextTick(mn(t))}:En&&En.now?ge=function(t){En.now(mn(t))}:Ro&&!Kp?(_n=(On=new Ro).port2,On.port1.onmessage=Ao,ge=Gp(_n.postMessage,_n)):V.addEventListener&&_o(V.postMessage)&&!V.importScripts&&er&&"file:"!==er.protocol&&!bo(Io)?(ge=Io,V.addEventListener("message",Ao,!1)):ge=To in $o("script")?function(t){mo.appendChild($o("script"))[To]=function(){mo.removeChild(this),bn(t)}}:function(t){setTimeout(mn(t),0)});var wo={set:yn,clear:gn},Do=function(){this.head=null,this.tail=null};Do.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var De,An,In,jr,jo,Co=Do,Qp=/ipad|iphone|ipod/i.test(lr)&&typeof Pebble<"u",Zp=/web0s(?!.*chrome)/i.test(lr),Ee=N,No=Pn,$n=wo.set,eP=Co,rP=Oo,tP=Qp,nP=Zp,Rn=xr,Mo=Ee.MutationObserver||Ee.WebKitMutationObserver,Fo=Ee.document,xo=Ee.process,Lr=Ee.Promise,Lo=(0,Te.f)(Ee,"queueMicrotask"),Tn=Lo&&Lo.value;if(!Tn){var Ur=new eP,Gr=function(){var t,e;for(Rn&&(t=xo.domain)&&t.exit();e=Ur.get();)try{e()}catch(r){throw Ur.head&&De(),r}t&&t.enter()};rP||Rn||nP||!Mo||!Fo?!tP&&Lr&&Lr.resolve?((jr=Lr.resolve(void 0)).constructor=Lr,jo=No(jr.then,jr),De=function(){jo(Gr)}):Rn?De=function(){xo.nextTick(Gr)}:($n=No($n,Ee),De=function(){$n(Gr)}):(An=!0,In=Fo.createTextNode(""),new Mo(Gr).observe(In,{characterData:!0}),De=function(){In.data=An=!An}),Tn=function(t){Ur.head||De(),Ur.add(t)}}var iP=Tn,wn=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}},Br=N.Promise,Uo="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,uP=!Uo&&!xr&&"object"==typeof window&&"object"==typeof document,cP=N,rr=Br,fP=T,vP=ta,hP=Ct,pP=uP,PP=Uo,Dn=li,yP=x("species"),Cn=!1,Go=fP(cP.PromiseRejectionEvent),gP=vP("Promise",function(){var t=hP(rr),e=t!==String(rr);if(!e&&66===Dn)return!0;if(!Dn||Dn<51||!/native code/.test(t)){var r=new rr(function(a){a(1)}),n=function(a){a(function(){},function(){})};if((r.constructor={})[yP]=n,!(Cn=r.then(function(){})instanceof n))return!0}return!e&&(pP||PP)&&!Go}),tr={CONSTRUCTOR:gP,REJECTION_EVENT:Go,SUBCLASSING:Cn},Ce={},Bo=he,EP=TypeError,SP=function(t){var e,r;this.promise=new t(function(n,i){if(void 0!==e||void 0!==r)throw EP("Bad Promise constructor");e=n,r=i}),this.resolve=Bo(e),this.reject=Bo(r)};Ce.f=function(t){return new SP(t)};var Hr,qo,es,OP=K,kr=xr,le=N,Ne=k,ko=Ae,Yo=ua,_P=Gt,mP=he,Yr=T,$P=ie,TP=function(t,e){var n,r=Eo(t).constructor;return void 0===r||Tp(n=Eo(r)[Ip])?e:function(t){if(_p(t))return t;throw mp(bp(t)+" is not a constructor")}(n)},Ko=wo.set,Nn=iP,IP=wn,wP=Co,Wo=_r,Kr=Br,Vo=Ce,Wr="Promise",Ho=tr.CONSTRUCTOR,DP=tr.REJECTION_EVENT,CP=tr.SUBCLASSING,Fn=Wo.getterFor(Wr),NP=Wo.set,Me=Kr&&Kr.prototype,Se=Kr,Vr=Me,zo=le.TypeError,xn=le.document,Ln=le.process,jn=Vo.f,MP=jn,FP=!!(xn&&xn.createEvent&&le.dispatchEvent),Jo="unhandledrejection",rs=function(t){var e;return!(!$P(t)||!Yr(e=t.then))&&e},ts=function(t,e){var u,c,f,r=e.value,n=1==e.state,i=n?t.ok:t.fail,a=t.resolve,o=t.reject,s=t.domain;try{i?(n||(2===e.rejection&&GP(e),e.rejection=1),!0===i?u=r:(s&&s.enter(),u=i(r),s&&(s.exit(),f=!0)),u===t.promise?o(zo("Promise-chain cycle")):(c=rs(u))?Ne(c,u,a,o):a(u)):o(r)}catch(v){s&&!f&&s.exit(),o(v)}},ns=function(t,e){t.notified||(t.notified=!0,Nn(function(){for(var n,r=t.reactions;n=r.get();)ts(n,t);t.notified=!1,e&&!t.rejection&&UP(t)}))},is=function(t,e,r){var n,i;FP?((n=xn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),le.dispatchEvent(n)):n={promise:e,reason:r},!DP&&(i=le["on"+t])?i(n):t===Jo&&function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch{}}("Unhandled promise rejection",r)},UP=function(t){Ne(Ko,le,function(){var i,e=t.facade,r=t.value;if(as(t)&&(i=IP(function(){kr?Ln.emit("unhandledRejection",r,e):is(Jo,e,r)}),t.rejection=kr||as(t)?2:1,i.error))throw i.value})},as=function(t){return 1!==t.rejection&&!t.parent},GP=function(t){Ne(Ko,le,function(){var e=t.facade;kr?Ln.emit("rejectionHandled",e):is("rejectionhandled",e,t.value)})},Fe=function(t,e,r){return function(n){t(e,n,r)}},xe=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,ns(t,!0))},Gn=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw zo("Promise can't be resolved itself");var n=rs(e);n?Nn(function(){var i={done:!1};try{Ne(n,e,Fe(Gn,i,t),Fe(xe,i,t))}catch(a){xe(i,a,t)}}):(t.value=e,t.state=1,ns(t,!1))}catch(i){xe({done:!1},i,t)}}};if(Ho&&(Se=function(e){(function(t,e){if(cp(e,t))return t;throw fp("Incorrect invocation")})(this,Vr),mP(e),Ne(Hr,this);var r=Fn(this);try{e(Fe(Gn,r),Fe(xe,r))}catch(n){xe(r,n)}},(Hr=function(e){NP(this,{type:Wr,done:!1,notified:!1,parent:!1,reactions:new wP,rejection:!1,state:0,value:void 0})}).prototype=ko(Vr=Se.prototype,"then",function(e,r){var n=Fn(this),i=jn(TP(this,Se));return n.parent=!0,i.ok=!Yr(e)||e,i.fail=Yr(r)&&r,i.domain=kr?Ln.domain:void 0,0==n.state?n.reactions.add(i):Nn(function(){ts(i,n)}),i.promise}),qo=function(){var t=new Hr,e=Fn(t);this.promise=t,this.resolve=Fe(Gn,e),this.reject=Fe(xe,e)},Vo.f=jn=function(t){return t===Se||void 0===t?new qo(t):MP(t)},Yr(Kr)&&Me!==Object.prototype)){es=Me.then,CP||ko(Me,"then",function(e,r){var n=this;return new Se(function(i,a){Ne(es,n,i,a)}).then(e,r)},{unsafe:!0});try{delete Me.constructor}catch{}Yo&&Yo(Me,Vr)}OP({global:!0,constructor:!0,wrap:!0,forced:Ho},{Promise:Se}),_P(Se,Wr,!1),function(t){var e=ap(t);lp&&e&&!e[ho]&&(0,op.f)(e,ho,{configurable:!0,get:function(){return this}})}(Wr);var kP=Ke,YP=x("iterator"),KP=Array.prototype,VP=zt,os=dr,HP=ke,zP=Ke,QP=x("iterator"),ss=function(t){if(!HP(t))return os(t,QP)||os(t,"@@iterator")||zP[VP(t)]},XP=k,ZP=he,qP=Y,ey=hr,ry=ss,ty=TypeError,iy=k,ls=Y,ay=dr,sy=Pn,ly=k,uy=Y,cy=hr,vy=Ri,us=vr,dy=ss,cs=function(t,e,r){var n,i;ls(t);try{if(!(n=ay(t,"return"))){if("throw"===e)throw r;return r}n=iy(n,t)}catch(a){i=!0,n=a}if("throw"===e)throw r;if(i)throw n;return ls(n),r},py=TypeError,zr=function(t,e){this.stopped=t,this.result=e},fs=zr.prototype,vs=function(t,e,r){var c,f,v,h,d,S,y,i=!(!r||!r.AS_ENTRIES),a=!(!r||!r.IS_RECORD),o=!(!r||!r.IS_ITERATOR),s=!(!r||!r.INTERRUPTED),u=sy(e,r&&r.that),I=function(m){return c&&cs(c,"normal",m),new zr(!0,m)},A=function(m){return i?(uy(m),s?u(m[0],m[1],I):u(m[0],m[1])):s?u(m,I):u(m)};if(a)c=t.iterator;else if(o)c=t;else{if(!(f=dy(t)))throw py(cy(t)+" is not iterable");if(function(t){return void 0!==t&&(kP.Array===t||KP[YP]===t)}(f)){for(v=0,h=vy(t);h>v;v++)if((d=A(t[v]))&&us(fs,d))return d;return new zr(!1)}c=function(t,e){var r=arguments.length<2?ry(t):e;if(ZP(r))return qP(XP(r,t));throw ty(ey(t)+" is not iterable")}(t,f)}for(S=a?t.next:c.next;!(y=ly(S,c)).done;){try{d=A(y.value)}catch(m){cs(c,"throw",m)}if("object"==typeof d&&d&&us(fs,d))return d}return new zr(!1)},hs=x("iterator"),ds=!1;try{var yy=0,ps={next:function(){return{done:!!yy++}},return:function(){ds=!0}};ps[hs]=function(){return this},Array.from(ps,function(){throw 2})}catch{}var Ey=Br,Ps=tr.CONSTRUCTOR||!function(t,e){if(!e&&!ds)return!1;var r=!1;try{var n={};n[hs]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch{}return r}(function(t){Ey.all(t).then(void 0,function(){})}),by=k,my=he,$y=Ce,Ry=wn,Ty=vs;K({target:"Promise",stat:!0,forced:Ps},{all:function(e){var r=this,n=$y.f(r),i=n.resolve,a=n.reject,o=Ry(function(){var s=my(r.resolve),u=[],c=0,f=1;Ty(e,function(v){var h=c++,d=!1;f++,by(s,r,v).then(function(S){d||(d=!0,u[h]=S,--f||i(u))},a)}),--f||i(u)});return o.error&&a(o.value),n.promise}});var Bn=Br,Dy=ve,Cy=T,Ny=Ae,ys=Bn&&Bn.prototype;if(K({target:"Promise",proto:!0,forced:tr.CONSTRUCTOR,real:!0},{catch:function(t){return this.then(void 0,t)}}),Cy(Bn)){var gs=Dy("Promise").prototype.catch;ys.catch!==gs&&Ny(ys,"catch",gs,{unsafe:!0})}var Fy=k,xy=he,Ly=Ce,jy=wn,Uy=vs;K({target:"Promise",stat:!0,forced:Ps},{race:function(e){var r=this,n=Ly.f(r),i=n.reject,a=jy(function(){var o=xy(r.resolve);Uy(e,function(s){Fy(o,r,s).then(n.resolve,i)})});return a.error&&i(a.value),n.promise}});var ky=k,Yy=Ce;K({target:"Promise",stat:!0,forced:tr.CONSTRUCTOR},{reject:function(e){var r=Yy.f(this);return ky(r.reject,void 0,e),r.promise}});var Wy=Y,Vy=ie,Hy=Ce,Jy=K,Xy=tr.CONSTRUCTOR;ve("Promise"),Jy({target:"Promise",stat:!0,forced:Xy},{resolve:function(e){return function(t,e){if(Wy(t),Vy(e)&&e.constructor===t)return e;var r=Hy.f(t);return(0,r.resolve)(e),r.promise}(this,e)}});class qy{performAction(e,r,n,i){return new Promise(()=>{this.performSynchronousAction(e,r,n,i)})}performSynchronousAction(e,r,n,i){throw new Error("Action "+n+" for "+e+" at "+r+" not implemented yet")}}self.dontCodeCore||(self.dontCodeCore=new vo);var Es=self.dontCodeCore;class nr{static createDeleteChange(e,r,n,i,a){return nr.createAnyChange(g.DELETE,e,r,n,i,null,a)}static createMoveChange(e,r,n,i,a,o,s){const u=nr.createAnyChange(g.MOVE,n,i,a,o,null,s);return u.oldPosition=e,r&&(u.beforeKey=r),u}static createTestChange(e,r,n,i,a,o){return nr.createAnyChange(g.ADD,e,r,n,i,a,o)}static addDummyProviderFromContent(e,r){Es.getStoreManager().setProvider(new eg(r),e)}static waitUntilTrue(e,r,n,i){n=n??50,i=i??50;const a=new U.x;let o=!1;(function _s(t=0,e,r=je){let n=-1;return null!=e&&((0,be.K)(e)?r=e:n=e),new q.y(i=>{let a=function Os(t){return t instanceof Date&&!isNaN(t)}(t)?+t-r.now():t;a<0&&(a=0);let o=0;return r.schedule(function(){i.closed||(i.next(o++),0<=n?this.schedule(void 0,n):i.complete())},a)})})(n,n).pipe(function Ts(t){return(0,bs.e)((e,r)=>{(0,$s.Xf)(t).subscribe((0,ms.x)(r,()=>r.complete(),Rs.Z)),!r.closed&&e.subscribe(r)})}(a),(0,As.q)(i)).subscribe({next:()=>{e()&&(o||(o=!0,a.next(!0),r()))},complete:()=>{o||r("Timeout")}})}static createAnyChange(e,r,n,i,a,o,s){var u;const c=n?"/"+n:"",f=a?"/"+a:"";let v=i?"/"+i:"";0==r.length&&(v=i||"");let h=s?"/"+s:"";return 0==r.length&&0==v.length&&(h=s||""),new z(e,r+c+v+f+h,o,new M(r+c+v+f+h,r+v+h,r+c+(s?v+f:a?v:""),r+(s?v:""),null!==(u=s??a)&&void 0!==u?u:void 0,null!=s))}}class eg{constructor(e){this.content=e}canStoreDocument(e){return!1}deleteEntity(e,r){return Promise.reject("Not implemened by Dummy tester")}loadEntity(e,r){return Promise.resolve(null!=this.content[r]?this.content[r]:void 0)}searchEntities(e,...r){return Array.isArray(this.content)?(0,Yn.D)([this.content]):(0,Yn.D)([[this.content]])}storeDocuments(e,r){return(0,Is._)(()=>new Error("Not implemented by Dummy tester"))}storeEntity(e,r){return Promise.reject("Not implemented by Dummy tester")}}class rg{applyFilters(e,...r){return null==r||0==r.length?e:e.filter(n=>{for(const i of r){const a=n[i.name];switch(i.operator){case se.EQUALS:return i.value==a;case se.LESS_THAN:return a<i.value;case se.LESS_THAN_EQUAL:return a<=i.value;default:throw new Error("Operator "+i.operator+" unknown")}}return!0})}}class oe{static clearConfigCache(){this.specialFieldsCache.clear()}static findSpecialFields(e,r){var n,i,a;let o=oe.specialFieldsCache.get(e);if(null!=o)return o;const s={score:-1,field:null};o=new Ss;const u=r.fields;if(null!=u){let c;for(c in u)"Date"===(null===(n=u[c])||void 0===n?void 0:n.type)||"Date & Time"===(null===(i=u[c])||void 0===i?void 0:i.type)?o.addDateField(null===(a=u[c])||void 0===a?void 0:a.name):oe.scoreIdFieldFromEntityField(u[c],s)}return s.score>0&&(o.idField=s.field),oe.specialFieldsCache.set(e,o),console.debug("Found special fields for entity at position "+e,o),o}static findSpecialFieldsFromData(e,r){if(null==r.idField&&e?.length>0){const n=e[0],i={score:-1,field:null};let a;for(a in n)oe.scoreIdFieldFromProperty(a,i);if(i.score>0){const o=e.length>1?e[Math.floor((e.length+1)/2)]:null;(null==o||o[i.field]!=n[i.field])&&(r.idField=i.field)}}}static scoreIdFieldFromEntityField(e,r){return oe.scoreIdFieldFromProperty(e?.name,r)}static scoreIdFieldFromProperty(e,r){if(null==e)return!1;const n=e.toLowerCase();return"_id"===n?(r.field="_id",r.score=100,!0):("id"==n||"uniqueid"==n||"identifier"==n||"key"==n||"primaryKey"==n||"uniqueKey"==n?r.score<80&&(r.score=80,r.field=e):n.includes("unique")||n.includes("primary")?r.score<50&&(r.score=50,r.field=e):(n.includes("id")||n.includes("key"))&&r.score<30&&(r.score=30,r.field=e),!1)}static cleanUpDataBeforeSaving(e,r){null!=r?.idField&&"_id"!=r?.idField&&e.forEach(n=>{delete n._id})}static cleanUpLoadedData(e,r){null!=r&&(null==r.idField&&oe.findSpecialFieldsFromData(e,r),e.forEach(n=>{var i;null!=r.idField&&"_id"!=r.idField&&(n._id=n[r.idField]),null===(i=r.dateFields)||void 0===i||i.forEach(a=>{const o=n[a];if(null!=o){let s=Date.parse(o);if(isNaN(s)){const u=o.lastIndexOf("[");-1!=u&&(s=Date.parse(o.substring(0,u)))}isNaN(s)?delete n[a]:n[a]=new Date(s)}})}))}}oe.specialFieldsCache=new Map;class Ss{constructor(){this.dateFields=null,this.idField=null}addDateField(e){null==this.dateFields&&(this.dateFields=new Array),this.dateFields.push(e)}}class tg{constructor(){this.name="",this.template=!1,this.description=""}}}}]);